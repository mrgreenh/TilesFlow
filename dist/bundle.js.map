{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 39c4233c6cec28df5330","webpack:///./src/main.js","webpack:///./~/babel-runtime/core-js/get-iterator.js","webpack:///./~/core-js/library/fn/get-iterator.js","webpack:///./~/core-js/library/modules/web.dom.iterable.js","webpack:///./~/core-js/library/modules/es6.array.iterator.js","webpack:///./~/core-js/library/modules/_add-to-unscopables.js","webpack:///./~/core-js/library/modules/_iter-step.js","webpack:///./~/core-js/library/modules/_iterators.js","webpack:///./~/core-js/library/modules/_to-iobject.js","webpack:///./~/core-js/library/modules/_iobject.js","webpack:///./~/core-js/library/modules/_cof.js","webpack:///./~/core-js/library/modules/_defined.js","webpack:///./~/core-js/library/modules/_iter-define.js","webpack:///./~/core-js/library/modules/_library.js","webpack:///./~/core-js/library/modules/_export.js","webpack:///./~/core-js/library/modules/_global.js","webpack:///./~/core-js/library/modules/_core.js","webpack:///./~/core-js/library/modules/_ctx.js","webpack:///./~/core-js/library/modules/_a-function.js","webpack:///./~/core-js/library/modules/_hide.js","webpack:///./~/core-js/library/modules/_object-dp.js","webpack:///./~/core-js/library/modules/_an-object.js","webpack:///./~/core-js/library/modules/_is-object.js","webpack:///./~/core-js/library/modules/_ie8-dom-define.js","webpack:///./~/core-js/library/modules/_descriptors.js","webpack:///./~/core-js/library/modules/_fails.js","webpack:///./~/core-js/library/modules/_dom-create.js","webpack:///./~/core-js/library/modules/_to-primitive.js","webpack:///./~/core-js/library/modules/_property-desc.js","webpack:///./~/core-js/library/modules/_redefine.js","webpack:///./~/core-js/library/modules/_has.js","webpack:///./~/core-js/library/modules/_iter-create.js","webpack:///./~/core-js/library/modules/_object-create.js","webpack:///./~/core-js/library/modules/_object-dps.js","webpack:///./~/core-js/library/modules/_object-keys.js","webpack:///./~/core-js/library/modules/_object-keys-internal.js","webpack:///./~/core-js/library/modules/_array-includes.js","webpack:///./~/core-js/library/modules/_to-length.js","webpack:///./~/core-js/library/modules/_to-integer.js","webpack:///./~/core-js/library/modules/_to-index.js","webpack:///./~/core-js/library/modules/_shared-key.js","webpack:///./~/core-js/library/modules/_shared.js","webpack:///./~/core-js/library/modules/_uid.js","webpack:///./~/core-js/library/modules/_enum-bug-keys.js","webpack:///./~/core-js/library/modules/_html.js","webpack:///./~/core-js/library/modules/_set-to-string-tag.js","webpack:///./~/core-js/library/modules/_wks.js","webpack:///./~/core-js/library/modules/_object-gpo.js","webpack:///./~/core-js/library/modules/_to-object.js","webpack:///./~/core-js/library/modules/es6.string.iterator.js","webpack:///./~/core-js/library/modules/_string-at.js","webpack:///./~/core-js/library/modules/core.get-iterator.js","webpack:///./~/core-js/library/modules/core.get-iterator-method.js","webpack:///./~/core-js/library/modules/_classof.js","webpack:///./~/babel-runtime/core-js/object/assign.js","webpack:///./~/core-js/library/fn/object/assign.js","webpack:///./~/core-js/library/modules/es6.object.assign.js","webpack:///./~/core-js/library/modules/_object-assign.js","webpack:///./~/core-js/library/modules/_object-gops.js","webpack:///./~/core-js/library/modules/_object-pie.js","webpack:///./~/tilesflow/dist/bundle.js","webpack:///./~/ptjs/dist/module/pt.js","webpack:///./src/ReadingTracker.js","webpack:///./~/babel-runtime/helpers/classCallCheck.js","webpack:///./~/babel-runtime/helpers/createClass.js","webpack:///./~/babel-runtime/core-js/object/define-property.js","webpack:///./~/core-js/library/fn/object/define-property.js","webpack:///./~/core-js/library/modules/es6.object.define-property.js","webpack:///./src/configurations.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;ACtCA;;;;AACA;;AACA;;;;;;AAEA,KAAI,SAAS,OAAO,UAApB;AACA,KAAI,iBAAiB,8BAArB;;AAEA,KAAI,cAAc,SAAS,gBAAT,CAA0B,aAA1B,CAAlB;;;;;;;AAEA,mDAAe,WAAf,4GAA2B;AAAA,SAAlB,EAAkB;;AACzB,QAAG,KAAH,GAAW,MAAX;AACA,QAAG,MAAH,GAAY,GAAZ;AACD;;;;;;;;;;;;;;;;AAED,KAAI,cAAc,MAAM,KAAN,CAAY,IAAZ,EAAkB,WAAlB,CAAlB;AACA,KAAI,SAAS,sBAAgB,YAAhB,EAA8B,MAA9B,EAAsC,OAAtC,CAA8C,KAA9C,CAAb;AACA,KAAI,SAAS,sBAAgB,aAAhB,EAA+B,MAA/B,EAAuC,OAAvC,CAA+C,MAA/C,CAAb;AACA,KAAI,SAAS,CAAC,MAAD,EAAS,MAAT,CAAb;;;;;;;AAGA,oDAAc,MAAd,iHAAqB;AAAA,SAAb,EAAa;;AACnB,QAAG,IAAH,CAAQ,CAAR,GAAY,YAAY,CAAZ,EAAe,KAA3B;AACA,QAAG,IAAH,CAAQ,CAAR,GAAY,YAAY,CAAZ,EAAe,MAA3B;AACD;;;;;;;;;;;;;;;;AAED,KAAI,QAAQ,OAAO,KAAP,EAAZ;AACA,QAAO,IAAP,CAAY,KAAZ;AACA,KAAI,aAAa,YAAY,KAAZ,EAAjB;AACA,aAAY,IAAZ,CAAiB,UAAjB;;AAEA,KAAI,QAAQ,CAAC,wBAAc,KAAd,EAAqB,eAAe,UAApC,EAAgD,eAAe,cAA/D,CAAD,CAAZ;AACA,KAAI,kBAAkB,EAAtB;AACA,KAAI,eAAe,EAAnB;AACA,KAAI,qBAAqB,CAAzB;AACA,KAAI,mBAAmB,GAAvB;AACA,KAAI,mBAAmB,eAAe,gBAAtC;AACA,KAAI,sBAAsB,IAA1B;;AAEA,UAAS,KAAT,CAAe,SAAf,EAAyB;AACvB,QAAI,IAAI,CAAR,IAAa,KAAb,EAAmB;AACjB,SAAI,cAAc,MAAM,CAAN,CAAlB;AACA,iBAAY,MAAZ,CAAmB,KAAnB,CAAyB,UAAzB,CAAoC,IAApC,EAA0C,SAA1C,CAAoD,CAApD,EAAsD,CAAtD,EAAwD,YAAY,MAAZ,CAAmB,IAAnB,CAAwB,CAAhF,EAAkF,GAAlF;AACA,SAAI,UAAU,YAAU,YAAxB;AACA,iBAAY,MAAZ,CAAmB,OAAnB;AACD;;;AAGD,OAAG,oBAAoB,eAAe,gBAAnC,IAAuD,kBAA1D,EAA6E;AAC3E,SAAG,CAAC,mBAAJ,EAAwB;AACtB,6BAAsB,eAAe,gBAArC;AACA,WAAI,QAAQ,OAAO,KAAP,EAAZ;AACA,WAAI,mBAAmB,MAAM,KAAN,CAAY,IAAZ,EAAkB,eAAe,UAAjC,CAAvB;AACA,WAAI,uBAAuB,sBAAc,EAAd,EAAkB,eAAe,cAAjC,CAA3B;AACA,aAAM,IAAN,CAAW,wBAAc,KAAd,EAAqB,gBAArB,EAAuC,oBAAvC,CAAX;AACA,cAAO,IAAP,CAAY,KAAZ;AACD;;AAED,SAAG,qBAAqB,gBAAxB,EAAyC;AACvC,WAAI,WAAW,qBAAmB,gBAAlC;AACA,WAAI,kBAAkB,IAAI,QAA1B;AACA,mBAAY,CAAZ,EAAe,KAAf,CAAqB,OAArB,GAA+B,eAA/B;AACA,mBAAY,CAAZ,EAAe,KAAf,CAAqB,OAArB,GAA+B,QAA/B;AACA,sBAAe,KAAK,GAAL,CAAS,kBAAkB,mBAAmB,WAAW,CAA9B,CAA3B,CAAf;AACA;AACD,MAPD,MAOK;AACH,4BAAqB,CAArB;AACA,0BAAmB,mBAAnB;AACA,6BAAsB,IAAtB;AACA,aAAM,KAAN;AACA,WAAI,kBAAkB,YAAY,KAAZ,EAAtB;AACA,mBAAY,IAAZ,CAAiB,eAAjB;AACD;AACF;;AAED,UAAO,qBAAP,CAA6B,KAA7B;AACD;;AAED,S;;;;;;AC7EA,mBAAkB,uD;;;;;;ACAlB;AACA;AACA,0C;;;;;;ACFA;AACA;AACA;AACA;AACA;;AAEA,yGAAwG,OAAO;AAC/G;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACZA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC,eAAc;AACd,kBAAiB;AACjB;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,6B;;;;;;ACjCA,6BAA4B,e;;;;;;ACA5B;AACA,WAAU;AACV,G;;;;;;ACFA,qB;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACLA;AACA;AACA;AACA;AACA,G;;;;;;ACJA,kBAAiB;;AAEjB;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6BAA4B,aAAa;;AAEzC;AACA;AACA;AACA;AACA;AACA,yCAAwC,oCAAoC;AAC5E,6CAA4C,oCAAoC;AAChF,MAAK,2BAA2B,oCAAoC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA,kCAAiC,2BAA2B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,G;;;;;;ACrEA,uB;;;;;;ACAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAmE;AACnE;AACA,sFAAqF;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,gDAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd,eAAc;AACd,eAAc;AACd,eAAc;AACd,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf,iBAAgB;AAChB,0B;;;;;;AC5DA;AACA;AACA;AACA,wCAAuC,gC;;;;;;ACHvC,8BAA6B;AAC7B,sCAAqC,gC;;;;;;ACDrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACnBA;AACA;AACA;AACA,G;;;;;;ACHA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,G;;;;;;ACPA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG,UAAU;AACb;AACA;AACA;AACA,G;;;;;;ACfA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA,G;;;;;;ACFA;AACA,sEAAsE,gBAAgB,UAAU,GAAG;AACnG,EAAC,E;;;;;;ACFD;AACA;AACA,kCAAiC,QAAQ,gBAAgB,UAAU,GAAG;AACtE,EAAC,E;;;;;;ACHD;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,G;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACPA,0C;;;;;;ACAA,wBAAuB;AACvB;AACA;AACA,G;;;;;;ACHA;AACA;AACA;AACA;AACA;;AAEA;AACA,4FAAgF,aAAa,EAAE;;AAE/F;AACA,sDAAqD,0BAA0B;AAC/E;AACA,G;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,G;;;;;;ACvCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACZA;AACA;AACA;;AAEA;AACA;AACA,G;;;;;;ACNA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK,WAAW,eAAe;AAC/B;AACA,MAAK;AACL;AACA,G;;;;;;ACpBA;AACA;AACA;AACA;AACA,4DAA2D;AAC3D,G;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACNA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA,oDAAmD;AACnD;AACA,wCAAuC;AACvC,G;;;;;;ACLA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA,c;;;;;;ACHA,+E;;;;;;ACAA;AACA;AACA;;AAEA;AACA,mEAAkE,+BAA+B;AACjG,G;;;;;;ACNA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wB;;;;;;ACVA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,G;;;;;;ACZA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;;AAEA;AACA;AACA,8BAA6B;AAC7B,eAAc;AACd;AACA,EAAC;AACD;AACA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA,WAAU;AACV,EAAC,E;;;;;;AChBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACPA;AACA;AACA;AACA;AACA,0BAAyB,kBAAkB,EAAE;;AAE7C;AACA;AACA;AACA;AACA,IAAG,UAAU;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACtBA,mBAAkB,wD;;;;;;ACAlB;AACA,wD;;;;;;ACDA;AACA;;AAEA,2CAA0C,gCAAoC,E;;;;;;ACH9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,UAAU,EAAE;AAC9C,oBAAmB,sCAAsC;AACzD,EAAC,oCAAoC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC,W;;;;;;AChCD,0C;;;;;;ACAA,eAAc,sB;;;;;;ACAd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,qCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,wCAAuC,uCAAuC,gBAAgB;;AAE9F;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,2DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;;AAEd;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,oFAAmF,gEAAgE;AACnJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAc;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,qDAAoD;AACpD;AACA,OAAM;AACN;AACA;AACA,uDAAsD;AACtD;AACA,OAAM;AACN;AACA,GAAE;;AAEF;;AAEA,QAAO;AACP;AACA;;AAEA,oBAAmB;;AAEnB,QAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,0GAAyG,OAAO;AAChH;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kCAAiC;AACjC,gBAAe;AACf,mBAAkB;AAClB;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA,8BAA6B;;AAE7B,QAAO;AACP;AACA;;AAEA;AACA,YAAW;AACX;;AAEA,QAAO;AACP;AACA;;AAEA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA,mBAAkB;;AAElB;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8BAA6B,aAAa;;AAE1C;AACA;AACA;AACA;AACA;AACA,0CAAyC,oCAAoC;AAC7E,8CAA6C,oCAAoC;AACjF,OAAM,2BAA2B,oCAAoC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,mBAAmB;AACpC;AACA;AACA,mCAAkC,2BAA2B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAoE;AACpE;AACA,uFAAsF;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ,WAAU;AACV;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,iDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB;AAChB,kBAAiB;AACjB;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,yCAAwC;;AAExC,QAAO;AACP;AACA;;AAEA,+BAA8B;AAC9B,uCAAsC;;AAEtC,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI,UAAU;AACd;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA,uEAAsE,gBAAgB,UAAU,GAAG;AACnG,GAAE;;AAEF,QAAO;AACP;AACA;;AAEA;AACA;AACA,mCAAkC,QAAQ,gBAAgB,UAAU,GAAG;AACvE,GAAE;;AAEF,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;;AAEA,QAAO;AACP;AACA;;AAEA,yBAAwB;AACxB;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,6FAA4F,aAAa,EAAE;;AAE3G;AACA,uDAAsD,0BAA0B;AAChF;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM,WAAW,eAAe;AAChC;AACA,OAAM;AACN;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,6DAA4D;AAC5D;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA,qDAAoD;AACpD;AACA,yCAAwC;AACxC;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oEAAmE,+BAA+B;AAClG;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA,+BAA8B;AAC9B,gBAAe;AACf;AACA,GAAE;AACF;AACA;AACA;AACA,iCAAgC;AAChC;AACA;AACA,YAAW;AACX,GAAE;;AAEF,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA0B,kBAAkB,EAAE;;AAE9C;AACA;AACA;AACA;AACA,KAAI,UAAU;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,wCAAuC,uCAAuC,gBAAgB;;AAE9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN,KAAI;AACJ;AACA;;AAEA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA,oBAAmB;;AAEnB,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;AACA,uEAAsE,0CAA0C;;AAEhH,QAAO;AACP;AACA;;AAEA,oBAAmB;;AAEnB,QAAO;AACP;AACA;;AAEA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;AACA;;AAEA,4CAA2C,gCAAgC;;AAE3E,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,UAAU,EAAE;AAC/C,qBAAoB,sCAAsC;AAC1D,GAAE,oCAAoC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,GAAE;;AAEF,QAAO;AACP;AACA;;AAEA;;AAEA,QAAO;AACP;AACA;;AAEA,gBAAe;;AAEf,QAAO;AACP;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,wCAAuC,uCAAuC,gBAAgB;;AAE9F;AACA;AACA,qBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF,QAAO;AACP;AACA;;AAEA,cAAa,cAAc;AAC3B,sCAAqC,0BAA0B,yDAAyD,EAAE,kBAAkB,0BAA0B,EAAE,mCAAmC,8BAA8B,oCAAoC,cAAc,EAAE;AAC7R,gBAAe;AACf;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,wCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAqB,WAAW;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV,SAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV,SAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC;AACjC;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,UAAU;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,SAAQ;AACR;AACA;AACA,OAAM;AACN;AACA;AACA,SAAQ;AACR;AACA;AACA,OAAM;AACN;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA,OAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA,WAAU;AACV;AACA,WAAU;AACV;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC,WAAW;AACnD;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,OAAM;AACN;AACA;AACA,OAAM;AACN;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yCAAwC,WAAW;AACnD;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA,2CAA0C,WAAW;AACrD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA,SAAQ;AACR;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,OAAM;AACN;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA,SAAQ;AACR;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,WAAW;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,iCAAgC,kCAAkC;AAClE;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,WAAW;AAClD;AACA,0CAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0CAAyC,gCAAgC;AACzE,0CAAyC,mCAAmC;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAsC,gCAAgC;AACtE;AACA,6CAA4C,mCAAmC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,gCAAgC;AAC9D,kCAAiC,mCAAmC;AACpE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qEAAoE,qCAAqC;AACzG,2EAA0E,sCAAsC;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6CAA4C,gCAAgC;AAC5E;AACA;AACA,mDAAkD,mCAAmC;AACrF;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yCAAwC,WAAW;AACnD;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yCAAwC,WAAW;AACnD;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD,UAAU;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAkC,WAAW;AAC7C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,WAAW;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,YAAY;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,WAAW;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,YAAY;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC,WAAW;AACnD;AACA;AACA,WAAU;AACV,0CAAyC,YAAY;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA,OAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA,OAAM;AACN;;AAEA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,UAAU;AACnD;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAAyC,qCAAqC;AAC9E,6CAA4C,sCAAsC;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0DAAyD,qCAAqC;AAC9F;AACA,6CAA4C,mCAAmC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gEAA+D,qCAAqC;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAkD,mCAAmC;AACrF;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA,qEAAoE,sCAAsC;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,WAAW;AACrD;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,UAAU;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,2CAA0C,WAAW;AACrD;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN,yCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,WAAW;AAClD;AACA,2CAA0C,WAAW;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,WAAW;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR,2CAA0C,WAAW;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,gCAAgC;AACpE;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,kCAAkC;AACzE;AACA;AACA;AACA;AACA;AACA,yCAAwC,qCAAqC;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,kCAAkC;AACrE;AACA;AACA;AACA;AACA;AACA,qCAAoC,qCAAqC;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,UAAU;AACjC;AACA;AACA;AACA,OAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,WAAW;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;AACA,GAAE,WAAW;;AAEb,QAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,wCAAuC,uCAAuC,gBAAgB;;AAE9F;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B,2CAA2C;AACvE;AACA,iCAAgC,+BAA+B;AAC/D;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB;AACrB;AACA,OAAM;AACN;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;;AAEA,yEAAwE;AACxE;AACA,OAAM;AACN;AACA;AACA;AACA,wCAAuC,4CAA4C;AACnF;AACA,4CAA2C,iDAAiD;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,GAAE;;AAEF;;AAEA,QAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,wCAAuC,uCAAuC,gBAAgB;;AAE9F;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA,mBAAkB;AAClB,eAAc;AACd;AACA,OAAM;AACN;AACA,GAAE;;AAEF;;AAEA,QAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,wCAAuC,uCAAuC,gBAAgB;;AAE9F;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,mDAAkD;AAClD,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc;AACd,sBAAqB;AACrB;AACA,OAAM;AACN;AACA,GAAE;;AAEF;;AAEA,QAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,wCAAuC,uCAAuC,gBAAgB;;AAE9F;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,QAAO;AACP;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,wCAAuC,uCAAuC,gBAAgB;;AAE9F;AACA;AACA;;AAEA;AACA;AACA,WAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,GAAE;;AAEF;;AAEA;AACA;AACA,EAAC;AACD;AACA,mC;;;;;;ACz2OA,aAAY,cAAc;AAC1B,qCAAoC,0BAA0B,yDAAyD,EAAE,kBAAkB,0BAA0B,EAAE,mCAAmC,8BAA8B,oCAAoC,cAAc,EAAE;AAC5R,eAAc;AACd;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAoB,WAAW;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,UAAU;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,WAAW;AAClD;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAuC,WAAW;AAClD;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,0CAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAA+B,kCAAkC;AACjE;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,WAAW;AACjD;AACA,yCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yCAAwC,gCAAgC;AACxE,yCAAwC,mCAAmC;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sCAAqC,gCAAgC;AACrE;AACA,4CAA2C,mCAAmC;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B,gCAAgC;AAC7D,iCAAgC,mCAAmC;AACnE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oEAAmE,qCAAqC;AACxG,0EAAyE,sCAAsC;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA2C,gCAAgC;AAC3E;AACA;AACA,kDAAiD,mCAAmC;AACpF;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAuC,WAAW;AAClD;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAuC,WAAW;AAClD;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAkD,UAAU;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kCAAiC,WAAW;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,WAAW;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,YAAY;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,WAAW;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,YAAY;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,WAAW;AAClD;AACA;AACA,UAAS;AACT,yCAAwC,YAAY;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,WAAW;AAC7C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA,mCAAkC,WAAW;AAC7C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC,UAAU;AAClD;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAwC,qCAAqC;AAC7E,4CAA2C,sCAAsC;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yDAAwD,qCAAqC;AAC7F;AACA,4CAA2C,mCAAmC;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+DAA8D,qCAAqC;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAiD,mCAAmC;AACpF;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,oEAAmE,sCAAsC;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,WAAW;AACpD;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,UAAU;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,0CAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,wCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,WAAW;AACjD;AACA,0CAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,0CAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,gCAAgC;AACnE;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,kCAAkC;AACxE;AACA;AACA;AACA;AACA;AACA,wCAAuC,qCAAqC;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,kCAAkC;AACpE;AACA;AACA;AACA;AACA;AACA,oCAAmC,qCAAqC;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB,UAAU;AAChC;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,WAAW;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;AAED;AACA,EAAC,WAAW,qB;;;;;;;;;;;;;;;;;;;;AChyLZ;;;;;;KAEM,c;AAEF,6BAAY,cAAZ,EAA2B;AAAA;;AACvB,cAAK,KAAL,GAAa,SAAS,aAAT,CAAuB,qBAAvB,CAAb;;AAEA,cAAK,gBAAL,GAAwB,SAAxB;AACA,cAAK,aAAL,CAAmB,SAAnB;AACA,cAAK,iBAAL;AACH;;;;uCAEa,I,EAAK;AACf,iBAAG,yBAAe,IAAf,CAAH,EAAwB;AACpB,sBAAK,UAAL,GAAkB,yBAAe,IAAf,EAAqB,MAAvC;AACA,sBAAK,cAAL,GAAsB,yBAAe,IAAf,EAAqB,YAA3C;AACA,sBAAK,gBAAL,GAAwB,IAAxB;AACH;AACJ;;;6CAEkB;AAAA;;AACf,oBAAO,gBAAP,CAAwB,QAAxB,EAAkC,UAAC,CAAD,EAAO;AACrC,qBAAI,aAAa,SAAS,gBAAT,CAA0B,uBAA1B,CAAjB;AACA,sBAAI,IAAI,IAAI,WAAW,MAAX,GAAkB,CAA9B,EAAiC,KAAG,CAApC,EAAuC,GAAvC,EAA2C;AACvC,yBAAI,IAAI,WAAW,IAAX,CAAgB,CAAhB,CAAR;AACA,yBAAI,cAAc,EAAE,qBAAF,EAAlB;AACA,yBAAI,YAAY,GAAZ,GAAkB,GAAtB,EAA2B;AACvB,6BAAI,qBAAqB,EAAE,YAAF,CAAe,mBAAf,CAAzB;AACA,6BAAG,sBAAsB,yBAAe,kBAAf,CAAzB,EAA4D;AACxD,qCAAQ,GAAR,CAAY,kBAAZ;AACA,mCAAK,aAAL,CAAmB,kBAAnB;AACA;AACH;AACJ;AACJ;AACJ,cAdD;AAeH;;;;;mBAGU,c;;;;;;ACvCf;;AAEA;;AAEA;AACA;AACA;AACA;AACA,G;;;;;;ACRA;;AAEA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA,oBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC,G;;;;;;AC1BD,mBAAkB,wD;;;;;;ACAlB;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA,sEAAuE,0CAA0C,E;;;;;;;;;;;ACFjH,KAAI,iBAAiB,iBAAiB;AAClC,cAAS;AACL,iBAAQ,EADH;AAIL,uBAAc;AACV,mBAAM,EADI;AAEV,wBAAW,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAFD;AAGV,qCAAuB,UAHb;AAIV,sBAAS,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAJC;AAKV,qBAAQ,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,EAAa,GAAb;AALE;AAJT,MADyB;AAalC,aAAQ;AACJ,iBAAQ,CACJ;AACC,gBAAG,EADJ;AAEC,gBAAG,EAFJ;AAGC,oBAAO,QAHR;AAIC,wBAAW,EAJZ;AAKC,gCAAmB,IALpB;AAMC,qBAAQ,IANT;AAOC,oBAAO,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX,EAAc,GAAd;AAPR,UADI,CADJ;AAYJ,uBAAc;AACV,qBAAQ,CAAC,CAAD,EAAG,GAAH,EAAO,CAAP,EAAS,GAAT;AADE;AAZV,MAb0B;AA6BlC,aAAQ;AACJ,uBAAc;AACT,gBAAG,EADM;AAET,gBAAG,EAFM;AAGT,oBAAO,QAHE;AAIT,qBAAQ,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAJC;AAKT,wBAAW,EALF;AAMT,gCAAmB,IANV;AAOT,qBAAQ,IAPC;AAQT,oBAAO,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX,EAAc,GAAd;AARE,UADV;AAWL,iBAAQ,CACH;AACC,gBAAG,EADJ;AAEC,gBAAG,EAFJ;AAGC,oBAAO,QAHR;AAIC,wBAAW,EAJZ;AAKC,gCAAmB,IALpB;AAMC,6BAAgB,IANjB;AAOC,qBAAQ,IAPT;AAQC,oBAAO,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX,EAAc,GAAd;AARR,UADG;AAXH;AA7B0B,EAAtC;;mBAuDe,c","file":"./dist/bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tilesflow\"] = factory();\n\telse\n\t\troot[\"tilesflow\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 39c4233c6cec28df5330\n **/","import TilesFlow from 'tilesflow';\nimport {CanvasSpace, Form, Point} from 'ptjs';\nimport ReadingTracker from './ReadingTracker.js';\n\nvar wwidth = window.innerWidth;\nvar readingTracker = new ReadingTracker();\n\nvar canvasElems = document.querySelectorAll(\".canvasElem\");\n\nfor (var ce of canvasElems){\n  ce.width = wwidth;\n  ce.height = 350;\n}\n\nvar canvasElems = Array.apply(null, canvasElems);\nvar space1 = new CanvasSpace('canvasElem', '#fff').display(\"#pt\");\nvar space2 = new CanvasSpace('canvasElem2', '#fff').display(\"#pt2\");\nvar spaces = [space1, space2];\n\n\nfor(var sp of spaces){\n  sp.size.x = canvasElems[0].width;\n  sp.size.y = canvasElems[0].height;\n}\n\nvar space = spaces.shift();\nspaces.push(space);\nvar canvasElem = canvasElems.shift();\ncanvasElems.push(canvasElem);\n\nvar flows = [new TilesFlow(space, readingTracker.forceField, readingTracker.visualSettings)];\nvar maxSpeedInverse = 20;\nvar speedInverse = 20;\nvar transitionProgress = 0;\nvar transitionLength = 100;\nvar previousConfName = readingTracker.selectedConfName;\nvar transitioningToConf = null;\n\nfunction paint(timestamp){\n  for(var i in flows){\n    var currentFlow = flows[i];\n    currentFlow._space.space.getContext(\"2d\").clearRect(0,0,currentFlow._space.size.x,500)\n    var offsetX = timestamp/speedInverse;\n    currentFlow.render(offsetX);    \n  }\n\n  //Transition handling\n  if(previousConfName != readingTracker.selectedConfName || transitionProgress){\n    if(!transitioningToConf){\n      transitioningToConf = readingTracker.selectedConfName;\n      var space = spaces.shift();\n      var targetForceField = Array.apply(null, readingTracker.forceField);\n      var targetVisualSettings = Object.assign({}, readingTracker.visualSettings)\n      flows.push(new TilesFlow(space, targetForceField, targetVisualSettings))\n      spaces.push(space);\n    }\n\n    if(transitionProgress < transitionLength){\n      var progress = transitionProgress/transitionLength;\n      var inverseProgress = 1 - progress;\n      canvasElems[1].style.opacity = inverseProgress;\n      canvasElems[0].style.opacity = progress;\n      speedInverse = Math.abs(maxSpeedInverse - maxSpeedInverse * (progress * 2));\n      transitionProgress ++;\n    }else{\n      transitionProgress = 0;\n      previousConfName = transitioningToConf;\n      transitioningToConf = null;\n      flows.shift();\n      var invisibleCanvas = canvasElems.shift();\n      canvasElems.push(invisibleCanvas);\n    }\n  }\n\n  window.requestAnimationFrame(paint);\n}\n\npaint();\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/get-iterator.js\n ** module id = 1\n ** module chunks = 0\n **/","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/get-iterator.js\n ** module id = 2\n ** module chunks = 0\n **/","require('./es6.array.iterator');\nvar global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , TO_STRING_TAG = require('./_wks')('toStringTag');\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype;\n  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/web.dom.iterable.js\n ** module id = 3\n ** module chunks = 0\n **/","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.array.iterator.js\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = function(){ /* empty */ };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_add-to-unscopables.js\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_iter-step.js\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = {};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_iterators.js\n ** module id = 7\n ** module chunks = 0\n **/","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_to-iobject.js\n ** module id = 8\n ** module chunks = 0\n **/","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_iobject.js\n ** module id = 9\n ** module chunks = 0\n **/","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_cof.js\n ** module id = 10\n ** module chunks = 0\n **/","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_defined.js\n ** module id = 11\n ** module chunks = 0\n **/","'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_iter-define.js\n ** module id = 12\n ** module chunks = 0\n **/","module.exports = true;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_library.js\n ** module id = 13\n ** module chunks = 0\n **/","var global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_export.js\n ** module id = 14\n ** module chunks = 0\n **/","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_global.js\n ** module id = 15\n ** module chunks = 0\n **/","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_core.js\n ** module id = 16\n ** module chunks = 0\n **/","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_ctx.js\n ** module id = 17\n ** module chunks = 0\n **/","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_a-function.js\n ** module id = 18\n ** module chunks = 0\n **/","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_hide.js\n ** module id = 19\n ** module chunks = 0\n **/","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_object-dp.js\n ** module id = 20\n ** module chunks = 0\n **/","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_an-object.js\n ** module id = 21\n ** module chunks = 0\n **/","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_is-object.js\n ** module id = 22\n ** module chunks = 0\n **/","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\r\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_ie8-dom-define.js\n ** module id = 23\n ** module chunks = 0\n **/","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_descriptors.js\n ** module id = 24\n ** module chunks = 0\n **/","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_fails.js\n ** module id = 25\n ** module chunks = 0\n **/","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_dom-create.js\n ** module id = 26\n ** module chunks = 0\n **/","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_to-primitive.js\n ** module id = 27\n ** module chunks = 0\n **/","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_property-desc.js\n ** module id = 28\n ** module chunks = 0\n **/","module.exports = require('./_hide');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_redefine.js\n ** module id = 29\n ** module chunks = 0\n **/","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_has.js\n ** module id = 30\n ** module chunks = 0\n **/","'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_iter-create.js\n ** module id = 31\n ** module chunks = 0\n **/","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\nvar anObject    = require('./_an-object')\r\n  , dPs         = require('./_object-dps')\r\n  , enumBugKeys = require('./_enum-bug-keys')\r\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\r\n  , Empty       = function(){ /* empty */ }\r\n  , PROTOTYPE   = 'prototype';\r\n\r\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\r\nvar createDict = function(){\r\n  // Thrash, waste and sodomy: IE GC bug\r\n  var iframe = require('./_dom-create')('iframe')\r\n    , i      = enumBugKeys.length\r\n    , gt     = '>'\r\n    , iframeDocument;\r\n  iframe.style.display = 'none';\r\n  require('./_html').appendChild(iframe);\r\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\r\n  // createDict = iframe.contentWindow.Object;\r\n  // html.removeChild(iframe);\r\n  iframeDocument = iframe.contentWindow.document;\r\n  iframeDocument.open();\r\n  iframeDocument.write('<script>document.F=Object</script' + gt);\r\n  iframeDocument.close();\r\n  createDict = iframeDocument.F;\r\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\r\n  return createDict();\r\n};\r\n\r\nmodule.exports = Object.create || function create(O, Properties){\r\n  var result;\r\n  if(O !== null){\r\n    Empty[PROTOTYPE] = anObject(O);\r\n    result = new Empty;\r\n    Empty[PROTOTYPE] = null;\r\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\r\n    result[IE_PROTO] = O;\r\n  } else result = createDict();\r\n  return Properties === undefined ? result : dPs(result, Properties);\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_object-create.js\n ** module id = 32\n ** module chunks = 0\n **/","var dP       = require('./_object-dp')\r\n  , anObject = require('./_an-object')\r\n  , getKeys  = require('./_object-keys');\r\n\r\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\r\n  anObject(O);\r\n  var keys   = getKeys(Properties)\r\n    , length = keys.length\r\n    , i = 0\r\n    , P;\r\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\r\n  return O;\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_object-dps.js\n ** module id = 33\n ** module chunks = 0\n **/","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\r\nvar $keys       = require('./_object-keys-internal')\r\n  , enumBugKeys = require('./_enum-bug-keys');\r\n\r\nmodule.exports = Object.keys || function keys(O){\r\n  return $keys(O, enumBugKeys);\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_object-keys.js\n ** module id = 34\n ** module chunks = 0\n **/","var has          = require('./_has')\r\n  , toIObject    = require('./_to-iobject')\r\n  , arrayIndexOf = require('./_array-includes')(false)\r\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\r\n\r\nmodule.exports = function(object, names){\r\n  var O      = toIObject(object)\r\n    , i      = 0\r\n    , result = []\r\n    , key;\r\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\r\n  // Don't enum bug & hidden keys\r\n  while(names.length > i)if(has(O, key = names[i++])){\r\n    ~arrayIndexOf(result, key) || result.push(key);\r\n  }\r\n  return result;\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_object-keys-internal.js\n ** module id = 35\n ** module chunks = 0\n **/","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_array-includes.js\n ** module id = 36\n ** module chunks = 0\n **/","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_to-length.js\n ** module id = 37\n ** module chunks = 0\n **/","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_to-integer.js\n ** module id = 38\n ** module chunks = 0\n **/","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_to-index.js\n ** module id = 39\n ** module chunks = 0\n **/","var shared = require('./_shared')('keys')\r\n  , uid    = require('./_uid');\r\nmodule.exports = function(key){\r\n  return shared[key] || (shared[key] = uid(key));\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_shared-key.js\n ** module id = 40\n ** module chunks = 0\n **/","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_shared.js\n ** module id = 41\n ** module chunks = 0\n **/","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_uid.js\n ** module id = 42\n ** module chunks = 0\n **/","// IE 8- don't enum bug keys\r\nmodule.exports = (\r\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\r\n).split(',');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_enum-bug-keys.js\n ** module id = 43\n ** module chunks = 0\n **/","module.exports = require('./_global').document && document.documentElement;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_html.js\n ** module id = 44\n ** module chunks = 0\n **/","var def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_set-to-string-tag.js\n ** module id = 45\n ** module chunks = 0\n **/","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_wks.js\n ** module id = 46\n ** module chunks = 0\n **/","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\r\nvar has         = require('./_has')\r\n  , toObject    = require('./_to-object')\r\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\r\n  , ObjectProto = Object.prototype;\r\n\r\nmodule.exports = Object.getPrototypeOf || function(O){\r\n  O = toObject(O);\r\n  if(has(O, IE_PROTO))return O[IE_PROTO];\r\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\r\n    return O.constructor.prototype;\r\n  } return O instanceof Object ? ObjectProto : null;\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_object-gpo.js\n ** module id = 47\n ** module chunks = 0\n **/","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_to-object.js\n ** module id = 48\n ** module chunks = 0\n **/","'use strict';\nvar $at  = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.string.iterator.js\n ** module id = 49\n ** module chunks = 0\n **/","var toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_string-at.js\n ** module id = 50\n ** module chunks = 0\n **/","var anObject = require('./_an-object')\n  , get      = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function(it){\n  var iterFn = get(it);\n  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/core.get-iterator.js\n ** module id = 51\n ** module chunks = 0\n **/","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/core.get-iterator-method.js\n ** module id = 52\n ** module chunks = 0\n **/","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof')\n  , TAG = require('./_wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_classof.js\n ** module id = 53\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/assign.js\n ** module id = 54\n ** module chunks = 0\n **/","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/assign.js\n ** module id = 55\n ** module chunks = 0\n **/","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./_object-assign')});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.object.assign.js\n ** module id = 56\n ** module chunks = 0\n **/","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys  = require('./_object-keys')\n  , gOPS     = require('./_object-gops')\n  , pIE      = require('./_object-pie')\n  , toObject = require('./_to-object')\n  , IObject  = require('./_iobject')\n  , $assign  = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function(){\n  var A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , aLen  = arguments.length\n    , index = 1\n    , getSymbols = gOPS.f\n    , isEnum     = pIE.f;\n  while(aLen > index){\n    var S      = IObject(arguments[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_object-assign.js\n ** module id = 57\n ** module chunks = 0\n **/","exports.f = Object.getOwnPropertySymbols;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_object-gops.js\n ** module id = 58\n ** module chunks = 0\n **/","exports.f = {}.propertyIsEnumerable;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/_object-pie.js\n ** module id = 59\n ** module chunks = 0\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tilesflow\"] = factory();\n\telse\n\t\troot[\"tilesflow\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _getIterator2 = __webpack_require__(1);\n\t\n\tvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\t\n\tvar _defineProperty2 = __webpack_require__(54);\n\t\n\tvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\t\n\tvar _assign = __webpack_require__(58);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _classCallCheck2 = __webpack_require__(64);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(65);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _ptjs = __webpack_require__(66);\n\t\n\tvar _PointsMatrix = __webpack_require__(67);\n\t\n\tvar _PointsMatrix2 = _interopRequireDefault(_PointsMatrix);\n\t\n\tvar _patterns = __webpack_require__(71);\n\t\n\tvar _ForceField = __webpack_require__(72);\n\t\n\tvar _ForceField2 = _interopRequireDefault(_ForceField);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar TilesFlow = function () {\n\t    function TilesFlow(space, forceField, visualSettings) {\n\t        (0, _classCallCheck3.default)(this, TilesFlow);\n\t\n\t        this._space = space;\n\t        this._forceField = new _ForceField2.default(forceField, space.size.x, space.size.y);\n\t        this._visualSettings = visualSettings;\n\t    }\n\t\n\t    (0, _createClass3.default)(TilesFlow, [{\n\t        key: 'render',\n\t        value: function render(offsetX) {\n\t            var _Object$assign2;\n\t\n\t            var visualSettings = (0, _assign2.default)({}, (_Object$assign2 = {\n\t                step: 100,\n\t                stroke: undefined,\n\t                fill: undefined,\n\t                pattern: undefined,\n\t                baseColor: [0, 0, 0, 0],\n\t                colorInterpolationMode: \"addition\",\n\t                showForces: false\n\t            }, (0, _defineProperty3.default)(_Object$assign2, 'pattern', _patterns.cloth), (0, _defineProperty3.default)(_Object$assign2, 'padding', [0, 0, 0, 0]), (0, _defineProperty3.default)(_Object$assign2, 'pointsColor', [0, 0, 0, 0]), _Object$assign2), this._visualSettings);\n\t\n\t            var form = new _ptjs.Form(this._space);\n\t            var pointsMatrix = new _PointsMatrix2.default(this._space.size.x, this._space.size.y, visualSettings.step, visualSettings.baseColor, visualSettings.colorInterpolationMode, this._forceField, offsetX);\n\t            var points = pointsMatrix.getFlattenedMatrix();\n\t            var triangles = pointsMatrix.getTiles(visualSettings.pattern, visualSettings.padding);\n\t\n\t            var forces = pointsMatrix._forces;\n\t\n\t            var _iteratorNormalCompletion = true;\n\t            var _didIteratorError = false;\n\t            var _iteratorError = undefined;\n\t\n\t            try {\n\t                for (var _iterator = (0, _getIterator3.default)(triangles), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t                    var triangle = _step.value;\n\t\n\t                    if (triangle.color) {\n\t                        var color = triangle.color;\n\t                        var fillColor = this.getFillWithSettings(color, visualSettings);\n\t                        form.fill(new _ptjs.Color(fillColor[0], fillColor[1], fillColor[2], fillColor[3] / 255, 'rgba').rgba());\n\t                        var strokeColor = this.getStrokeWithSettings(color, visualSettings);\n\t                        form.stroke(new _ptjs.Color(strokeColor[0], strokeColor[1], strokeColor[2], strokeColor[3] / 255, 'rgba').rgba());\n\t                    }\n\t                    form.triangle(triangle.concept);\n\t                }\n\t            } catch (err) {\n\t                _didIteratorError = true;\n\t                _iteratorError = err;\n\t            } finally {\n\t                try {\n\t                    if (!_iteratorNormalCompletion && _iterator.return) {\n\t                        _iterator.return();\n\t                    }\n\t                } finally {\n\t                    if (_didIteratorError) {\n\t                        throw _iteratorError;\n\t                    }\n\t                }\n\t            }\n\t\n\t            var pointsColor = visualSettings.pointsColor;\n\t            form.fill(new _ptjs.Color(pointsColor[0], pointsColor[1], pointsColor[2], pointsColor[3] / 255, 'rgba').rgba());\n\t            form.stroke(new _ptjs.Color(pointsColor[0], pointsColor[1], pointsColor[2], pointsColor[3] / 255, 'rgba').rgba());\n\t            form.points(points.map(function (point) {\n\t                return point.concept;\n\t            }));\n\t\n\t            if (visualSettings.showForces) {\n\t                for (var i in forces) {\n\t                    var p = new _ptjs.Point(forces[i]._x, forces[i]._y);\n\t                    form.stroke(\"red\");\n\t                    form.fill(\"red\");\n\t                    form.point(p);\n\t                }\n\t            }\n\t        }\n\t    }, {\n\t        key: 'getFillWithSettings',\n\t        value: function getFillWithSettings(color, visualSettings) {\n\t            if (!visualSettings.fill) return color;else return visualSettings.fill;\n\t        }\n\t    }, {\n\t        key: 'getStrokeWithSettings',\n\t        value: function getStrokeWithSettings(color, visualSettings) {\n\t            if (!visualSettings.stroke) return color;else return visualSettings.stroke;\n\t        }\n\t    }]);\n\t    return TilesFlow;\n\t}();\n\t\n\texports.default = TilesFlow;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(2), __esModule: true };\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(3);\n\t__webpack_require__(49);\n\tmodule.exports = __webpack_require__(51);\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(4);\n\tvar global        = __webpack_require__(15)\n\t  , hide          = __webpack_require__(19)\n\t  , Iterators     = __webpack_require__(7)\n\t  , TO_STRING_TAG = __webpack_require__(46)('toStringTag');\n\t\n\tfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n\t  var NAME       = collections[i]\n\t    , Collection = global[NAME]\n\t    , proto      = Collection && Collection.prototype;\n\t  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n\t  Iterators[NAME] = Iterators.Array;\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar addToUnscopables = __webpack_require__(5)\n\t  , step             = __webpack_require__(6)\n\t  , Iterators        = __webpack_require__(7)\n\t  , toIObject        = __webpack_require__(8);\n\t\n\t// 22.1.3.4 Array.prototype.entries()\n\t// 22.1.3.13 Array.prototype.keys()\n\t// 22.1.3.29 Array.prototype.values()\n\t// 22.1.3.30 Array.prototype[@@iterator]()\n\tmodule.exports = __webpack_require__(12)(Array, 'Array', function(iterated, kind){\n\t  this._t = toIObject(iterated); // target\n\t  this._i = 0;                   // next index\n\t  this._k = kind;                // kind\n\t// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n\t}, function(){\n\t  var O     = this._t\n\t    , kind  = this._k\n\t    , index = this._i++;\n\t  if(!O || index >= O.length){\n\t    this._t = undefined;\n\t    return step(1);\n\t  }\n\t  if(kind == 'keys'  )return step(0, index);\n\t  if(kind == 'values')return step(0, O[index]);\n\t  return step(0, [index, O[index]]);\n\t}, 'values');\n\t\n\t// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\n\tIterators.Arguments = Iterators.Array;\n\t\n\taddToUnscopables('keys');\n\taddToUnscopables('values');\n\taddToUnscopables('entries');\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(){ /* empty */ };\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(done, value){\n\t  return {value: value, done: !!done};\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = {};\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// to indexed object, toObject with fallback for non-array-like ES3 strings\n\tvar IObject = __webpack_require__(9)\n\t  , defined = __webpack_require__(11);\n\tmodule.exports = function(it){\n\t  return IObject(defined(it));\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// fallback for non-array-like ES3 and non-enumerable old V8 strings\n\tvar cof = __webpack_require__(10);\n\tmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n\t  return cof(it) == 'String' ? it.split('') : Object(it);\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tvar toString = {}.toString;\n\t\n\tmodule.exports = function(it){\n\t  return toString.call(it).slice(8, -1);\n\t};\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t// 7.2.1 RequireObjectCoercible(argument)\n\tmodule.exports = function(it){\n\t  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n\t  return it;\n\t};\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar LIBRARY        = __webpack_require__(13)\n\t  , $export        = __webpack_require__(14)\n\t  , redefine       = __webpack_require__(29)\n\t  , hide           = __webpack_require__(19)\n\t  , has            = __webpack_require__(30)\n\t  , Iterators      = __webpack_require__(7)\n\t  , $iterCreate    = __webpack_require__(31)\n\t  , setToStringTag = __webpack_require__(45)\n\t  , getPrototypeOf = __webpack_require__(47)\n\t  , ITERATOR       = __webpack_require__(46)('iterator')\n\t  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n\t  , FF_ITERATOR    = '@@iterator'\n\t  , KEYS           = 'keys'\n\t  , VALUES         = 'values';\n\t\n\tvar returnThis = function(){ return this; };\n\t\n\tmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n\t  $iterCreate(Constructor, NAME, next);\n\t  var getMethod = function(kind){\n\t    if(!BUGGY && kind in proto)return proto[kind];\n\t    switch(kind){\n\t      case KEYS: return function keys(){ return new Constructor(this, kind); };\n\t      case VALUES: return function values(){ return new Constructor(this, kind); };\n\t    } return function entries(){ return new Constructor(this, kind); };\n\t  };\n\t  var TAG        = NAME + ' Iterator'\n\t    , DEF_VALUES = DEFAULT == VALUES\n\t    , VALUES_BUG = false\n\t    , proto      = Base.prototype\n\t    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n\t    , $default   = $native || getMethod(DEFAULT)\n\t    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n\t    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n\t    , methods, key, IteratorPrototype;\n\t  // Fix native\n\t  if($anyNative){\n\t    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n\t    if(IteratorPrototype !== Object.prototype){\n\t      // Set @@toStringTag to native iterators\n\t      setToStringTag(IteratorPrototype, TAG, true);\n\t      // fix for some old engines\n\t      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n\t    }\n\t  }\n\t  // fix Array#{values, @@iterator}.name in V8 / FF\n\t  if(DEF_VALUES && $native && $native.name !== VALUES){\n\t    VALUES_BUG = true;\n\t    $default = function values(){ return $native.call(this); };\n\t  }\n\t  // Define iterator\n\t  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n\t    hide(proto, ITERATOR, $default);\n\t  }\n\t  // Plug for library\n\t  Iterators[NAME] = $default;\n\t  Iterators[TAG]  = returnThis;\n\t  if(DEFAULT){\n\t    methods = {\n\t      values:  DEF_VALUES ? $default : getMethod(VALUES),\n\t      keys:    IS_SET     ? $default : getMethod(KEYS),\n\t      entries: $entries\n\t    };\n\t    if(FORCED)for(key in methods){\n\t      if(!(key in proto))redefine(proto, key, methods[key]);\n\t    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n\t  }\n\t  return methods;\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tmodule.exports = true;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global    = __webpack_require__(15)\n\t  , core      = __webpack_require__(16)\n\t  , ctx       = __webpack_require__(17)\n\t  , hide      = __webpack_require__(19)\n\t  , PROTOTYPE = 'prototype';\n\t\n\tvar $export = function(type, name, source){\n\t  var IS_FORCED = type & $export.F\n\t    , IS_GLOBAL = type & $export.G\n\t    , IS_STATIC = type & $export.S\n\t    , IS_PROTO  = type & $export.P\n\t    , IS_BIND   = type & $export.B\n\t    , IS_WRAP   = type & $export.W\n\t    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n\t    , expProto  = exports[PROTOTYPE]\n\t    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n\t    , key, own, out;\n\t  if(IS_GLOBAL)source = name;\n\t  for(key in source){\n\t    // contains in native\n\t    own = !IS_FORCED && target && target[key] !== undefined;\n\t    if(own && key in exports)continue;\n\t    // export native or passed\n\t    out = own ? target[key] : source[key];\n\t    // prevent global pollution for namespaces\n\t    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n\t    // bind timers to global for call from export context\n\t    : IS_BIND && own ? ctx(out, global)\n\t    // wrap global constructors for prevent change them in library\n\t    : IS_WRAP && target[key] == out ? (function(C){\n\t      var F = function(a, b, c){\n\t        if(this instanceof C){\n\t          switch(arguments.length){\n\t            case 0: return new C;\n\t            case 1: return new C(a);\n\t            case 2: return new C(a, b);\n\t          } return new C(a, b, c);\n\t        } return C.apply(this, arguments);\n\t      };\n\t      F[PROTOTYPE] = C[PROTOTYPE];\n\t      return F;\n\t    // make static versions for prototype methods\n\t    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n\t    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n\t    if(IS_PROTO){\n\t      (exports.virtual || (exports.virtual = {}))[key] = out;\n\t      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n\t      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n\t    }\n\t  }\n\t};\n\t// type bitmap\n\t$export.F = 1;   // forced\n\t$export.G = 2;   // global\n\t$export.S = 4;   // static\n\t$export.P = 8;   // proto\n\t$export.B = 16;  // bind\n\t$export.W = 32;  // wrap\n\t$export.U = 64;  // safe\n\t$export.R = 128; // real proto method for `library` \n\tmodule.exports = $export;\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\n\tvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n\t  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\tif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\tvar core = module.exports = {version: '2.4.0'};\n\tif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// optional / simple context binding\n\tvar aFunction = __webpack_require__(18);\n\tmodule.exports = function(fn, that, length){\n\t  aFunction(fn);\n\t  if(that === undefined)return fn;\n\t  switch(length){\n\t    case 1: return function(a){\n\t      return fn.call(that, a);\n\t    };\n\t    case 2: return function(a, b){\n\t      return fn.call(that, a, b);\n\t    };\n\t    case 3: return function(a, b, c){\n\t      return fn.call(that, a, b, c);\n\t    };\n\t  }\n\t  return function(/* ...args */){\n\t    return fn.apply(that, arguments);\n\t  };\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n\t  return it;\n\t};\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar dP         = __webpack_require__(20)\n\t  , createDesc = __webpack_require__(28);\n\tmodule.exports = __webpack_require__(24) ? function(object, key, value){\n\t  return dP.f(object, key, createDesc(1, value));\n\t} : function(object, key, value){\n\t  object[key] = value;\n\t  return object;\n\t};\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar anObject       = __webpack_require__(21)\n\t  , IE8_DOM_DEFINE = __webpack_require__(23)\n\t  , toPrimitive    = __webpack_require__(27)\n\t  , dP             = Object.defineProperty;\n\t\n\texports.f = __webpack_require__(24) ? Object.defineProperty : function defineProperty(O, P, Attributes){\n\t  anObject(O);\n\t  P = toPrimitive(P, true);\n\t  anObject(Attributes);\n\t  if(IE8_DOM_DEFINE)try {\n\t    return dP(O, P, Attributes);\n\t  } catch(e){ /* empty */ }\n\t  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n\t  if('value' in Attributes)O[P] = Attributes.value;\n\t  return O;\n\t};\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(22);\n\tmodule.exports = function(it){\n\t  if(!isObject(it))throw TypeError(it + ' is not an object!');\n\t  return it;\n\t};\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  return typeof it === 'object' ? it !== null : typeof it === 'function';\n\t};\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = !__webpack_require__(24) && !__webpack_require__(25)(function(){\r\n\t  return Object.defineProperty(__webpack_require__(26)('div'), 'a', {get: function(){ return 7; }}).a != 7;\r\n\t});\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Thank's IE8 for his funny defineProperty\n\tmodule.exports = !__webpack_require__(25)(function(){\n\t  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n\t});\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(exec){\n\t  try {\n\t    return !!exec();\n\t  } catch(e){\n\t    return true;\n\t  }\n\t};\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(22)\n\t  , document = __webpack_require__(15).document\n\t  // in old IE typeof document.createElement is 'object'\n\t  , is = isObject(document) && isObject(document.createElement);\n\tmodule.exports = function(it){\n\t  return is ? document.createElement(it) : {};\n\t};\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.1 ToPrimitive(input [, PreferredType])\n\tvar isObject = __webpack_require__(22);\n\t// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n\t// and the second argument - flag - preferred type is a string\n\tmodule.exports = function(it, S){\n\t  if(!isObject(it))return it;\n\t  var fn, val;\n\t  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  throw TypeError(\"Can't convert object to primitive value\");\n\t};\n\n/***/ },\n/* 28 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(bitmap, value){\n\t  return {\n\t    enumerable  : !(bitmap & 1),\n\t    configurable: !(bitmap & 2),\n\t    writable    : !(bitmap & 4),\n\t    value       : value\n\t  };\n\t};\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(19);\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\tvar hasOwnProperty = {}.hasOwnProperty;\n\tmodule.exports = function(it, key){\n\t  return hasOwnProperty.call(it, key);\n\t};\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar create         = __webpack_require__(32)\n\t  , descriptor     = __webpack_require__(28)\n\t  , setToStringTag = __webpack_require__(45)\n\t  , IteratorPrototype = {};\n\t\n\t// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n\t__webpack_require__(19)(IteratorPrototype, __webpack_require__(46)('iterator'), function(){ return this; });\n\t\n\tmodule.exports = function(Constructor, NAME, next){\n\t  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n\t  setToStringTag(Constructor, NAME + ' Iterator');\n\t};\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\n\tvar anObject    = __webpack_require__(21)\r\n\t  , dPs         = __webpack_require__(33)\r\n\t  , enumBugKeys = __webpack_require__(43)\r\n\t  , IE_PROTO    = __webpack_require__(40)('IE_PROTO')\r\n\t  , Empty       = function(){ /* empty */ }\r\n\t  , PROTOTYPE   = 'prototype';\r\n\t\r\n\t// Create object with fake `null` prototype: use iframe Object with cleared prototype\r\n\tvar createDict = function(){\r\n\t  // Thrash, waste and sodomy: IE GC bug\r\n\t  var iframe = __webpack_require__(26)('iframe')\r\n\t    , i      = enumBugKeys.length\r\n\t    , gt     = '>'\r\n\t    , iframeDocument;\r\n\t  iframe.style.display = 'none';\r\n\t  __webpack_require__(44).appendChild(iframe);\r\n\t  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\r\n\t  // createDict = iframe.contentWindow.Object;\r\n\t  // html.removeChild(iframe);\r\n\t  iframeDocument = iframe.contentWindow.document;\r\n\t  iframeDocument.open();\r\n\t  iframeDocument.write('<script>document.F=Object</script' + gt);\r\n\t  iframeDocument.close();\r\n\t  createDict = iframeDocument.F;\r\n\t  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\r\n\t  return createDict();\r\n\t};\r\n\t\r\n\tmodule.exports = Object.create || function create(O, Properties){\r\n\t  var result;\r\n\t  if(O !== null){\r\n\t    Empty[PROTOTYPE] = anObject(O);\r\n\t    result = new Empty;\r\n\t    Empty[PROTOTYPE] = null;\r\n\t    // add \"__proto__\" for Object.getPrototypeOf polyfill\r\n\t    result[IE_PROTO] = O;\r\n\t  } else result = createDict();\r\n\t  return Properties === undefined ? result : dPs(result, Properties);\r\n\t};\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar dP       = __webpack_require__(20)\r\n\t  , anObject = __webpack_require__(21)\r\n\t  , getKeys  = __webpack_require__(34);\r\n\t\r\n\tmodule.exports = __webpack_require__(24) ? Object.defineProperties : function defineProperties(O, Properties){\r\n\t  anObject(O);\r\n\t  var keys   = getKeys(Properties)\r\n\t    , length = keys.length\r\n\t    , i = 0\r\n\t    , P;\r\n\t  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\r\n\t  return O;\r\n\t};\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.14 / 15.2.3.14 Object.keys(O)\r\n\tvar $keys       = __webpack_require__(35)\r\n\t  , enumBugKeys = __webpack_require__(43);\r\n\t\r\n\tmodule.exports = Object.keys || function keys(O){\r\n\t  return $keys(O, enumBugKeys);\r\n\t};\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar has          = __webpack_require__(30)\r\n\t  , toIObject    = __webpack_require__(8)\r\n\t  , arrayIndexOf = __webpack_require__(36)(false)\r\n\t  , IE_PROTO     = __webpack_require__(40)('IE_PROTO');\r\n\t\r\n\tmodule.exports = function(object, names){\r\n\t  var O      = toIObject(object)\r\n\t    , i      = 0\r\n\t    , result = []\r\n\t    , key;\r\n\t  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\r\n\t  // Don't enum bug & hidden keys\r\n\t  while(names.length > i)if(has(O, key = names[i++])){\r\n\t    ~arrayIndexOf(result, key) || result.push(key);\r\n\t  }\r\n\t  return result;\r\n\t};\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// false -> Array#indexOf\n\t// true  -> Array#includes\n\tvar toIObject = __webpack_require__(8)\n\t  , toLength  = __webpack_require__(37)\n\t  , toIndex   = __webpack_require__(39);\n\tmodule.exports = function(IS_INCLUDES){\n\t  return function($this, el, fromIndex){\n\t    var O      = toIObject($this)\n\t      , length = toLength(O.length)\n\t      , index  = toIndex(fromIndex, length)\n\t      , value;\n\t    // Array#includes uses SameValueZero equality algorithm\n\t    if(IS_INCLUDES && el != el)while(length > index){\n\t      value = O[index++];\n\t      if(value != value)return true;\n\t    // Array#toIndex ignores holes, Array#includes - not\n\t    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n\t      if(O[index] === el)return IS_INCLUDES || index || 0;\n\t    } return !IS_INCLUDES && -1;\n\t  };\n\t};\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.15 ToLength\n\tvar toInteger = __webpack_require__(38)\n\t  , min       = Math.min;\n\tmodule.exports = function(it){\n\t  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n\t};\n\n/***/ },\n/* 38 */\n/***/ function(module, exports) {\n\n\t// 7.1.4 ToInteger\n\tvar ceil  = Math.ceil\n\t  , floor = Math.floor;\n\tmodule.exports = function(it){\n\t  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n\t};\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar toInteger = __webpack_require__(38)\n\t  , max       = Math.max\n\t  , min       = Math.min;\n\tmodule.exports = function(index, length){\n\t  index = toInteger(index);\n\t  return index < 0 ? max(index + length, 0) : min(index, length);\n\t};\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar shared = __webpack_require__(41)('keys')\r\n\t  , uid    = __webpack_require__(42);\r\n\tmodule.exports = function(key){\r\n\t  return shared[key] || (shared[key] = uid(key));\r\n\t};\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global = __webpack_require__(15)\n\t  , SHARED = '__core-js_shared__'\n\t  , store  = global[SHARED] || (global[SHARED] = {});\n\tmodule.exports = function(key){\n\t  return store[key] || (store[key] = {});\n\t};\n\n/***/ },\n/* 42 */\n/***/ function(module, exports) {\n\n\tvar id = 0\n\t  , px = Math.random();\n\tmodule.exports = function(key){\n\t  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n\t};\n\n/***/ },\n/* 43 */\n/***/ function(module, exports) {\n\n\t// IE 8- don't enum bug keys\r\n\tmodule.exports = (\r\n\t  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\r\n\t).split(',');\n\n/***/ },\n/* 44 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(15).document && document.documentElement;\n\n/***/ },\n/* 45 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar def = __webpack_require__(20).f\n\t  , has = __webpack_require__(30)\n\t  , TAG = __webpack_require__(46)('toStringTag');\n\t\n\tmodule.exports = function(it, tag, stat){\n\t  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n\t};\n\n/***/ },\n/* 46 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar store      = __webpack_require__(41)('wks')\n\t  , uid        = __webpack_require__(42)\n\t  , Symbol     = __webpack_require__(15).Symbol\n\t  , USE_SYMBOL = typeof Symbol == 'function';\n\t\n\tvar $exports = module.exports = function(name){\n\t  return store[name] || (store[name] =\n\t    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n\t};\n\t\n\t$exports.store = store;\n\n/***/ },\n/* 47 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\r\n\tvar has         = __webpack_require__(30)\r\n\t  , toObject    = __webpack_require__(48)\r\n\t  , IE_PROTO    = __webpack_require__(40)('IE_PROTO')\r\n\t  , ObjectProto = Object.prototype;\r\n\t\r\n\tmodule.exports = Object.getPrototypeOf || function(O){\r\n\t  O = toObject(O);\r\n\t  if(has(O, IE_PROTO))return O[IE_PROTO];\r\n\t  if(typeof O.constructor == 'function' && O instanceof O.constructor){\r\n\t    return O.constructor.prototype;\r\n\t  } return O instanceof Object ? ObjectProto : null;\r\n\t};\n\n/***/ },\n/* 48 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.13 ToObject(argument)\n\tvar defined = __webpack_require__(11);\n\tmodule.exports = function(it){\n\t  return Object(defined(it));\n\t};\n\n/***/ },\n/* 49 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar $at  = __webpack_require__(50)(true);\n\t\n\t// 21.1.3.27 String.prototype[@@iterator]()\n\t__webpack_require__(12)(String, 'String', function(iterated){\n\t  this._t = String(iterated); // target\n\t  this._i = 0;                // next index\n\t// 21.1.5.2.1 %StringIteratorPrototype%.next()\n\t}, function(){\n\t  var O     = this._t\n\t    , index = this._i\n\t    , point;\n\t  if(index >= O.length)return {value: undefined, done: true};\n\t  point = $at(O, index);\n\t  this._i += point.length;\n\t  return {value: point, done: false};\n\t});\n\n/***/ },\n/* 50 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar toInteger = __webpack_require__(38)\n\t  , defined   = __webpack_require__(11);\n\t// true  -> String#at\n\t// false -> String#codePointAt\n\tmodule.exports = function(TO_STRING){\n\t  return function(that, pos){\n\t    var s = String(defined(that))\n\t      , i = toInteger(pos)\n\t      , l = s.length\n\t      , a, b;\n\t    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n\t    a = s.charCodeAt(i);\n\t    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n\t      ? TO_STRING ? s.charAt(i) : a\n\t      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n\t  };\n\t};\n\n/***/ },\n/* 51 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar anObject = __webpack_require__(21)\n\t  , get      = __webpack_require__(52);\n\tmodule.exports = __webpack_require__(16).getIterator = function(it){\n\t  var iterFn = get(it);\n\t  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');\n\t  return anObject(iterFn.call(it));\n\t};\n\n/***/ },\n/* 52 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar classof   = __webpack_require__(53)\n\t  , ITERATOR  = __webpack_require__(46)('iterator')\n\t  , Iterators = __webpack_require__(7);\n\tmodule.exports = __webpack_require__(16).getIteratorMethod = function(it){\n\t  if(it != undefined)return it[ITERATOR]\n\t    || it['@@iterator']\n\t    || Iterators[classof(it)];\n\t};\n\n/***/ },\n/* 53 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// getting tag from 19.1.3.6 Object.prototype.toString()\n\tvar cof = __webpack_require__(10)\n\t  , TAG = __webpack_require__(46)('toStringTag')\n\t  // ES3 wrong here\n\t  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\t\n\t// fallback for IE11 Script Access Denied error\n\tvar tryGet = function(it, key){\n\t  try {\n\t    return it[key];\n\t  } catch(e){ /* empty */ }\n\t};\n\t\n\tmodule.exports = function(it){\n\t  var O, T, B;\n\t  return it === undefined ? 'Undefined' : it === null ? 'Null'\n\t    // @@toStringTag case\n\t    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n\t    // builtinTag case\n\t    : ARG ? cof(O)\n\t    // ES3 arguments fallback\n\t    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n\t};\n\n/***/ },\n/* 54 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _defineProperty = __webpack_require__(55);\n\t\n\tvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function (obj, key, value) {\n\t  if (key in obj) {\n\t    (0, _defineProperty2.default)(obj, key, {\n\t      value: value,\n\t      enumerable: true,\n\t      configurable: true,\n\t      writable: true\n\t    });\n\t  } else {\n\t    obj[key] = value;\n\t  }\n\t\n\t  return obj;\n\t};\n\n/***/ },\n/* 55 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(56), __esModule: true };\n\n/***/ },\n/* 56 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(57);\n\tvar $Object = __webpack_require__(16).Object;\n\tmodule.exports = function defineProperty(it, key, desc){\n\t  return $Object.defineProperty(it, key, desc);\n\t};\n\n/***/ },\n/* 57 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $export = __webpack_require__(14);\r\n\t// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\r\n\t$export($export.S + $export.F * !__webpack_require__(24), 'Object', {defineProperty: __webpack_require__(20).f});\n\n/***/ },\n/* 58 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(59), __esModule: true };\n\n/***/ },\n/* 59 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(60);\n\tmodule.exports = __webpack_require__(16).Object.assign;\n\n/***/ },\n/* 60 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.3.1 Object.assign(target, source)\n\tvar $export = __webpack_require__(14);\n\t\n\t$export($export.S + $export.F, 'Object', {assign: __webpack_require__(61)});\n\n/***/ },\n/* 61 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t// 19.1.2.1 Object.assign(target, source, ...)\n\tvar getKeys  = __webpack_require__(34)\n\t  , gOPS     = __webpack_require__(62)\n\t  , pIE      = __webpack_require__(63)\n\t  , toObject = __webpack_require__(48)\n\t  , IObject  = __webpack_require__(9)\n\t  , $assign  = Object.assign;\n\t\n\t// should work with symbols and should have deterministic property order (V8 bug)\n\tmodule.exports = !$assign || __webpack_require__(25)(function(){\n\t  var A = {}\n\t    , B = {}\n\t    , S = Symbol()\n\t    , K = 'abcdefghijklmnopqrst';\n\t  A[S] = 7;\n\t  K.split('').forEach(function(k){ B[k] = k; });\n\t  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n\t}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n\t  var T     = toObject(target)\n\t    , aLen  = arguments.length\n\t    , index = 1\n\t    , getSymbols = gOPS.f\n\t    , isEnum     = pIE.f;\n\t  while(aLen > index){\n\t    var S      = IObject(arguments[index++])\n\t      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n\t      , length = keys.length\n\t      , j      = 0\n\t      , key;\n\t    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n\t  } return T;\n\t} : $assign;\n\n/***/ },\n/* 62 */\n/***/ function(module, exports) {\n\n\texports.f = Object.getOwnPropertySymbols;\n\n/***/ },\n/* 63 */\n/***/ function(module, exports) {\n\n\texports.f = {}.propertyIsEnumerable;\n\n/***/ },\n/* 64 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\texports.default = function (instance, Constructor) {\n\t  if (!(instance instanceof Constructor)) {\n\t    throw new TypeError(\"Cannot call a class as a function\");\n\t  }\n\t};\n\n/***/ },\n/* 65 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _defineProperty = __webpack_require__(55);\n\t\n\tvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function () {\n\t  function defineProperties(target, props) {\n\t    for (var i = 0; i < props.length; i++) {\n\t      var descriptor = props[i];\n\t      descriptor.enumerable = descriptor.enumerable || false;\n\t      descriptor.configurable = true;\n\t      if (\"value\" in descriptor) descriptor.writable = true;\n\t      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n\t    }\n\t  }\n\t\n\t  return function (Constructor, protoProps, staticProps) {\n\t    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t    if (staticProps) defineProperties(Constructor, staticProps);\n\t    return Constructor;\n\t  };\n\t}();\n\n/***/ },\n/* 66 */\n/***/ function(module, exports) {\n\n\tvar Pt = {}; (function() {var CanvasSpace, Circle, Color, Const, Curve, DOMSpace, Easing, Form, Grid, GridCascade, Line, Matrix, Noise, Pair, Particle, ParticleEmitter, ParticleField, ParticleSystem, Point, PointSet, QuadTree, Rectangle, SVGForm, SVGSpace, SamplePoints, Space, StripeBound, Timer, Triangle, UI, Util, Vector,\r\n\t  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n\t  hasProp = {}.hasOwnProperty,\r\n\t  slice = [].slice;\r\n\t\r\n\tConst = (function() {\r\n\t  function Const() {}\r\n\t\r\n\t  Const.xy = 'xy';\r\n\t\r\n\t  Const.yz = 'yz';\r\n\t\r\n\t  Const.xz = 'xz';\r\n\t\r\n\t  Const.xyz = 'xyz';\r\n\t\r\n\t  Const.identical = -1;\r\n\t\r\n\t  Const.right = 3;\r\n\t\r\n\t  Const.bottom_right = 4;\r\n\t\r\n\t  Const.bottom = 5;\r\n\t\r\n\t  Const.bottom_left = 6;\r\n\t\r\n\t  Const.left = 7;\r\n\t\r\n\t  Const.top_left = 0;\r\n\t\r\n\t  Const.top = 1;\r\n\t\r\n\t  Const.top_right = 2;\r\n\t\r\n\t  Const.sideLabels = [\"identical\", \"right\", \"bottom right\", \"bottom\", \"bottom left\", \"left\", \"top left\", \"top\", \"top right\"];\r\n\t\r\n\t  Const.epsilon = 0.0001;\r\n\t\r\n\t  Const.pi = Math.PI;\r\n\t\r\n\t  Const.two_pi = 6.283185307179586;\r\n\t\r\n\t  Const.half_pi = 1.5707963267948966;\r\n\t\r\n\t  Const.quarter_pi = 0.7853981633974483;\r\n\t\r\n\t  Const.one_degree = 0.017453292519943295;\r\n\t\r\n\t  Const.rad_to_deg = 57.29577951308232;\r\n\t\r\n\t  Const.deg_to_rad = 0.017453292519943295;\r\n\t\r\n\t  Const.gravity = 9.81;\r\n\t\r\n\t  Const.newton = 0.10197;\r\n\t\r\n\t  Const.gaussian = 0.3989422804014327;\r\n\t\r\n\t  return Const;\r\n\t\r\n\t})();\r\n\t\r\n\tthis.Const = Const;\r\n\t\r\n\tMatrix = (function() {\r\n\t  function Matrix() {}\r\n\t\r\n\t  Matrix.rotateAnchor2D = function(radian, anchor, axis) {\r\n\t    var a, cosA, sinA;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    a = anchor.get2D(axis);\r\n\t    cosA = Math.cos(radian);\r\n\t    sinA = Math.sin(radian);\r\n\t    return [cosA, sinA, 0, -sinA, cosA, 0, a.x * (1 - cosA) + a.y * sinA, a.y * (1 - cosA) - a.x * sinA, 1];\r\n\t  };\r\n\t\r\n\t  Matrix.reflectAnchor2D = function(line, axis) {\r\n\t    var ang2, cosA, inc, sinA;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    inc = line.intercept(axis);\r\n\t    ang2 = Math.atan(inc.slope) * 2;\r\n\t    cosA = Math.cos(ang2);\r\n\t    sinA = Math.sin(ang2);\r\n\t    return [cosA, sinA, 0, sinA, -cosA, 0, -inc.yi * sinA, inc.yi + inc.yi * cosA, 1];\r\n\t  };\r\n\t\r\n\t  Matrix.shearAnchor2D = function(sx, sy, anchor, axis) {\r\n\t    var a, tx, ty;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    a = anchor.get2D(axis);\r\n\t    tx = Math.tan(sx);\r\n\t    ty = Math.tan(sy);\r\n\t    return [1, tx, 0, ty, 1, 0, -a.y * ty, -a.x * tx, 1];\r\n\t  };\r\n\t\r\n\t  Matrix.scaleAnchor2D = function(sx, sy, anchor, axis) {\r\n\t    var a;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    a = anchor.get2D(axis);\r\n\t    return [sx, 0, 0, 0, sy, 0, -a.x * sx + a.x, -a.y * sy + a.y, 1];\r\n\t  };\r\n\t\r\n\t  Matrix.scale2D = function(x, y) {\r\n\t    return [x, 0, 0, 0, y, 0, 0, 0, 1];\r\n\t  };\r\n\t\r\n\t  Matrix.shear2D = function(x, y) {\r\n\t    return [1, Math.tan(x), 0, Math.tan(y), 1, 0, 0, 0, 1];\r\n\t  };\r\n\t\r\n\t  Matrix.rotate2D = function(cosA, sinA) {\r\n\t    return [cosA, sinA, 0, -sinA, cosA, 0, 0, 0, 1];\r\n\t  };\r\n\t\r\n\t  Matrix.translate2D = function(x, y) {\r\n\t    return [1, 0, 0, 0, 1, 0, x, y, 1];\r\n\t  };\r\n\t\r\n\t  Matrix.transform2D = function(pt, m, axis, byValue) {\r\n\t    var v, x, y;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    if (byValue == null) {\r\n\t      byValue = false;\r\n\t    }\r\n\t    v = pt.get2D(axis);\r\n\t    x = v.x * m[0] + v.y * m[3] + m[6];\r\n\t    y = v.x * m[1] + v.y * m[4] + m[7];\r\n\t    v.x = x;\r\n\t    v.y = y;\r\n\t    v = v.get2D(axis, true);\r\n\t    if (!byValue) {\r\n\t      pt.set(v);\r\n\t      return pt;\r\n\t    }\r\n\t    return v;\r\n\t  };\r\n\t\r\n\t  return Matrix;\r\n\t\r\n\t})();\r\n\t\r\n\tthis.Matrix = Matrix;\r\n\t\r\n\tUtil = (function() {\r\n\t  function Util() {}\r\n\t\r\n\t  Util.toRadian = function(angle) {\r\n\t    return angle * Const.deg_to_rad;\r\n\t  };\r\n\t\r\n\t  Util.toDegree = function(radian) {\r\n\t    return radian * Const.rad_to_deg;\r\n\t  };\r\n\t\r\n\t  Util.toHexColor = function(number) {\r\n\t    var h;\r\n\t    h = Math.floor(number).toString(16);\r\n\t    if (h.length === 1) {\r\n\t      return \"0\" + h;\r\n\t    } else {\r\n\t      return h;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Util.toRGBColor = function(hexString, asRGBA, opacity) {\r\n\t    var b, g, r;\r\n\t    if (asRGBA == null) {\r\n\t      asRGBA = false;\r\n\t    }\r\n\t    if (opacity == null) {\r\n\t      opacity = 1;\r\n\t    }\r\n\t    if (hexString[0] === \"#\") {\r\n\t      hexString = hexString.substr(1);\r\n\t    }\r\n\t    if (hexString.length === 3) {\r\n\t      r = parseInt(hexString[0] + hexString[0], 16);\r\n\t      g = parseInt(hexString[1] + hexString[1], 16);\r\n\t      b = parseInt(hexString[2] + hexString[2], 16);\r\n\t    } else if (hexString.length >= 6) {\r\n\t      r = parseInt(hexString[0] + hexString[1], 16);\r\n\t      g = parseInt(hexString[2] + hexString[3], 16);\r\n\t      b = parseInt(hexString[4] + hexString[5], 16);\r\n\t    } else {\r\n\t      r = 0;\r\n\t      g = 0;\r\n\t      b = 0;\r\n\t    }\r\n\t    if (asRGBA) {\r\n\t      return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + opacity + \")\";\r\n\t    } else {\r\n\t      return [r, g, b, opacity];\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Util.bound = function(val, max, positive) {\r\n\t    var a, half;\r\n\t    if (positive == null) {\r\n\t      positive = false;\r\n\t    }\r\n\t    a = val % max;\r\n\t    half = max / 2;\r\n\t    if (a > half) {\r\n\t      a -= max;\r\n\t    } else if (a < -half) {\r\n\t      a += max;\r\n\t    }\r\n\t    if (positive) {\r\n\t      if (a < 0) {\r\n\t        return a + max;\r\n\t      } else {\r\n\t        return a;\r\n\t      }\r\n\t    } else {\r\n\t      return a;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Util.boundAngle = function(ang, positive) {\r\n\t    return Util.bound(ang, 360, positive);\r\n\t  };\r\n\t\r\n\t  Util.boundRadian = function(radian, positive) {\r\n\t    return Util.bound(radian, Const.two_pi, positive);\r\n\t  };\r\n\t\r\n\t  Util.boundingBox = function(points, is3D) {\r\n\t    var aa, len1, maxPt, minPt, p;\r\n\t    if (is3D == null) {\r\n\t      is3D = false;\r\n\t    }\r\n\t    minPt = new Point(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);\r\n\t    maxPt = new Point(Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY);\r\n\t    for (aa = 0, len1 = points.length; aa < len1; aa++) {\r\n\t      p = points[aa];\r\n\t      if (p.x < minPt.x) {\r\n\t        minPt.x = p.x;\r\n\t      }\r\n\t      if (p.y < minPt.y) {\r\n\t        minPt.y = p.y;\r\n\t      }\r\n\t      if (p.x > maxPt.x) {\r\n\t        maxPt.x = p.x;\r\n\t      }\r\n\t      if (p.y > maxPt.y) {\r\n\t        maxPt.y = p.y;\r\n\t      }\r\n\t      if (is3D) {\r\n\t        if (p.z < minPt.z) {\r\n\t          minPt.z = p.z;\r\n\t        }\r\n\t        if (p.z > maxPt.z) {\r\n\t          maxPt.z = p.z;\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return new Rectangle(minPt).to(maxPt);\r\n\t  };\r\n\t\r\n\t  Util.lerp = function(a, b, t) {\r\n\t    return (1 - t) * a + t * b;\r\n\t  };\r\n\t\r\n\t  Util.centroid = function(points) {\r\n\t    var aa, c, len1, p;\r\n\t    c = new Vector();\r\n\t    for (aa = 0, len1 = points.length; aa < len1; aa++) {\r\n\t      p = points[aa];\r\n\t      c.add(p);\r\n\t    }\r\n\t    return c.divide(points.length);\r\n\t  };\r\n\t\r\n\t  Util.same = function(a, b, threshold) {\r\n\t    if (threshold == null) {\r\n\t      threshold = Const.epsilon;\r\n\t    }\r\n\t    return Math.abs(a - b) < threshold;\r\n\t  };\r\n\t\r\n\t  Util.within = function(p, a, b) {\r\n\t    return p >= Math.min(a, b) && p <= Math.max(a, b);\r\n\t  };\r\n\t\r\n\t  Util.randomRange = function(a, b) {\r\n\t    var r;\r\n\t    if (b == null) {\r\n\t      b = 0;\r\n\t    }\r\n\t    r = a > b ? a - b : b - a;\r\n\t    return a + Math.random() * r;\r\n\t  };\r\n\t\r\n\t  Util.mixin = function(klass, mix) {\r\n\t    var k, v;\r\n\t    for (k in mix) {\r\n\t      v = mix[k];\r\n\t      if (mix.hasOwnProperty(k)) {\r\n\t        klass.prototype[k] = mix[k];\r\n\t      }\r\n\t    }\r\n\t    return klass;\r\n\t  };\r\n\t\r\n\t  Util.extend = function(klass, parent) {\r\n\t    klass.prototype = Object.create(parent.prototype);\r\n\t    klass.prototype.constructor = klass;\r\n\t    return klass;\r\n\t  };\r\n\t\r\n\t  Util.clonePoints = function(array) {\r\n\t    var aa, len1, p, results;\r\n\t    results = [];\r\n\t    for (aa = 0, len1 = array.length; aa < len1; aa++) {\r\n\t      p = array[aa];\r\n\t      results.push(p.clone());\r\n\t    }\r\n\t    return results;\r\n\t  };\r\n\t\r\n\t  Util.contextRotateOrigin = function(ctx, bound, radian, origin, mask) {\r\n\t    var msz, size;\r\n\t    if (origin == null) {\r\n\t      origin = false;\r\n\t    }\r\n\t    size = bound.size();\r\n\t    if (!origin) {\r\n\t      origin = size.$multiply(0.5);\r\n\t      origin.add(bound);\r\n\t    }\r\n\t    if (mask) {\r\n\t      msz = mask.size();\r\n\t      Form.rect(ctx, mask);\r\n\t      ctx.clip();\r\n\t    }\r\n\t    ctx.translate(origin.x, origin.y);\r\n\t    ctx.rotate(radian);\r\n\t    return ctx.translate(-origin.x, -origin.y);\r\n\t  };\r\n\t\r\n\t  Util.sinCosTable = function() {\r\n\t    var aa, cos, i, sin;\r\n\t    cos = [];\r\n\t    sin = [];\r\n\t    for (i = aa = 0; aa <= 360; i = aa += 1) {\r\n\t      cos[i] = Math.cos(i * Math.PI / 180);\r\n\t      sin[i] = Math.sin(i * Math.PI / 180);\r\n\t    }\r\n\t    return {\r\n\t      sin: sin,\r\n\t      cos: cos\r\n\t    };\r\n\t  };\r\n\t\r\n\t  Util.chance = function(p) {\r\n\t    return Math.random() < p;\r\n\t  };\r\n\t\r\n\t  Util.gaussian = function(x, mean, sigma) {\r\n\t    if (mean == null) {\r\n\t      mean = 0;\r\n\t    }\r\n\t    if (sigma == null) {\r\n\t      sigma = 1;\r\n\t    }\r\n\t    x = (x - mean) / sigma;\r\n\t    return Const.gaussian * Math.exp(-0.5 * x * x) / sigma;\r\n\t  };\r\n\t\r\n\t  return Util;\r\n\t\r\n\t})();\r\n\t\r\n\tthis.Util = Util;\r\n\t\r\n\tTimer = (function() {\r\n\t  function Timer(d) {\r\n\t    if (d == null) {\r\n\t      d = 1000;\r\n\t    }\r\n\t    this.duration = d;\r\n\t    this._time = 0;\r\n\t    this._ease = function(t, b, c, d) {\r\n\t      return t / d;\r\n\t    };\r\n\t    this._intervalID = -1;\r\n\t  }\r\n\t\r\n\t  Timer.prototype.start = function(reset) {\r\n\t    var diff;\r\n\t    diff = Math.min(Date.now() - this._time, this.duration);\r\n\t    if (reset || diff >= this.duration) {\r\n\t      return this._time = Date.now();\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Timer.prototype.setEasing = function(ease) {\r\n\t    return this._ease = ease;\r\n\t  };\r\n\t\r\n\t  Timer.prototype.check = function() {\r\n\t    var diff;\r\n\t    diff = Math.min(Date.now() - this._time, this.duration);\r\n\t    return this._ease(diff, 0, 1, this.duration);\r\n\t  };\r\n\t\r\n\t  Timer.prototype.track = function(callback) {\r\n\t    var me;\r\n\t    clearInterval(this._intervalID);\r\n\t    this.start(true);\r\n\t    me = this;\r\n\t    this._intervalID = setInterval((function() {\r\n\t      var t;\r\n\t      t = me.check();\r\n\t      callback(t);\r\n\t      if (t >= 1) {\r\n\t        return clearInterval(me._intervalID);\r\n\t      }\r\n\t    }), 25);\r\n\t    return this._intervalID;\r\n\t  };\r\n\t\r\n\t  return Timer;\r\n\t\r\n\t})();\r\n\t\r\n\tthis.Timer = Timer;\r\n\t\r\n\tSpace = (function() {\r\n\t  function Space(id) {\r\n\t    if (id == null) {\r\n\t      id = 'space';\r\n\t    }\r\n\t    this.id = id;\r\n\t    this.size = new Vector();\r\n\t    this.center = new Vector();\r\n\t    this._timePrev = 0;\r\n\t    this._timeDiff = 0;\r\n\t    this._timeEnd = -1;\r\n\t    this.items = {};\r\n\t    this._animID = -1;\r\n\t    this._animCount = 0;\r\n\t    this._animPause = false;\r\n\t    this._refresh = true;\r\n\t  }\r\n\t\r\n\t  Space.prototype.refresh = function(b) {\r\n\t    this._refresh = b;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Space.prototype.render = function(context) {\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Space.prototype.resize = function(w, h) {};\r\n\t\r\n\t  Space.prototype.clear = function() {};\r\n\t\r\n\t  Space.prototype.add = function(item) {\r\n\t    var k;\r\n\t    if ((item.animate != null) && typeof item.animate === 'function') {\r\n\t      k = this._animCount++;\r\n\t      this.items[k] = item;\r\n\t      item.animateID = k;\r\n\t      if (item.onSpaceResize != null) {\r\n\t        item.onSpaceResize(this.size.x, this.size.y);\r\n\t      }\r\n\t    } else {\r\n\t      throw \"a player object for Space.add must define animate()\";\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Space.prototype.remove = function(item) {\r\n\t    delete this.items[item.animateID];\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Space.prototype.removeAll = function() {\r\n\t    this.items = {};\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Space.prototype.play = function(time) {\r\n\t    var err;\r\n\t    if (time == null) {\r\n\t      time = 0;\r\n\t    }\r\n\t    this._animID = requestAnimationFrame((function(_this) {\r\n\t      return function(t) {\r\n\t        return _this.play(t);\r\n\t      };\r\n\t    })(this));\r\n\t    if (this._animPause) {\r\n\t      return;\r\n\t    }\r\n\t    this._timeDiff = time - this._timePrev;\r\n\t    try {\r\n\t      this._playItems(time);\r\n\t    } catch (_error) {\r\n\t      err = _error;\r\n\t      cancelAnimationFrame(this._animID);\r\n\t      console.error(err.stack);\r\n\t      throw err;\r\n\t    }\r\n\t    this._timePrev = time;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Space.prototype._playItems = function(time) {\r\n\t    var k, ref, v;\r\n\t    if (this._refresh) {\r\n\t      this.clear();\r\n\t    }\r\n\t    ref = this.items;\r\n\t    for (k in ref) {\r\n\t      v = ref[k];\r\n\t      v.animate(time, this._timeDiff, this.ctx);\r\n\t    }\r\n\t    if (this._timeEnd >= 0 && time > this._timeEnd) {\r\n\t      cancelAnimationFrame(this._animID);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Space.prototype.pause = function(toggle) {\r\n\t    if (toggle == null) {\r\n\t      toggle = false;\r\n\t    }\r\n\t    this._animPause = toggle ? !this._animPause : true;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Space.prototype.resume = function() {\r\n\t    this._animPause = false;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Space.prototype.stop = function(t) {\r\n\t    if (t == null) {\r\n\t      t = 0;\r\n\t    }\r\n\t    this._timeEnd = t;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Space.prototype.playTime = function(duration) {\r\n\t    if (duration == null) {\r\n\t      duration = 5000;\r\n\t    }\r\n\t    this.play();\r\n\t    return this.stop(duration);\r\n\t  };\r\n\t\r\n\t  return Space;\r\n\t\r\n\t})();\r\n\t\r\n\tthis.Space = Space;\r\n\t\r\n\tCanvasSpace = (function(superClass) {\r\n\t  extend(CanvasSpace, superClass);\r\n\t\r\n\t  function CanvasSpace(id, bgcolor, context) {\r\n\t    if (id == null) {\r\n\t      id = 'pt_space';\r\n\t    }\r\n\t    if (bgcolor == null) {\r\n\t      bgcolor = false;\r\n\t    }\r\n\t    if (context == null) {\r\n\t      context = '2d';\r\n\t    }\r\n\t    CanvasSpace.__super__.constructor.apply(this, arguments);\r\n\t    this.space = document.querySelector(\"#\" + this.id);\r\n\t    this.appended = true;\r\n\t    if (!this.space) {\r\n\t      this.space = document.createElement(\"canvas\");\r\n\t      this.space.setAttribute(\"id\", this.id);\r\n\t      this.appended = false;\r\n\t    }\r\n\t    this._mdown = false;\r\n\t    this._mdrag = false;\r\n\t    this.bgcolor = bgcolor;\r\n\t    this.ctx = this.space.getContext(context);\r\n\t  }\r\n\t\r\n\t  CanvasSpace.prototype.display = function(parent_id, readyCallback) {\r\n\t    var frame, frame_rect;\r\n\t    if (parent_id == null) {\r\n\t      parent_id = \"#pt\";\r\n\t    }\r\n\t    if (!this.appended) {\r\n\t      frame = document.querySelector(parent_id);\r\n\t      frame_rect = frame.getBoundingClientRect();\r\n\t      if (frame) {\r\n\t        this.resize(frame_rect.width, frame_rect.height);\r\n\t        window.addEventListener('resize', (function(evt) {\r\n\t          frame_rect = frame.getBoundingClientRect();\r\n\t          return this.resize(frame_rect.width, frame_rect.height, evt);\r\n\t        }).bind(this));\r\n\t        if (this.space.parentNode !== frame) {\r\n\t          frame.appendChild(this.space);\r\n\t        }\r\n\t        this.appended = true;\r\n\t        setTimeout((function() {\r\n\t          this.space.dispatchEvent(new Event('ready'));\r\n\t          if (readyCallback) {\r\n\t            return readyCallback(frame_rect.width, frame_rect.height, this.space);\r\n\t          }\r\n\t        }).bind(this));\r\n\t      } else {\r\n\t        throw 'Cannot add canvas to element ' + parent_id;\r\n\t      }\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  CanvasSpace.prototype.resize = function(w, h, evt) {\r\n\t    var k, p, ref;\r\n\t    this.size.set(w, h);\r\n\t    this.center = new Vector(w / 2, h / 2);\r\n\t    this.space.setAttribute('width', Math.floor(w));\r\n\t    this.space.setAttribute('height', Math.floor(h));\r\n\t    ref = this.items;\r\n\t    for (k in ref) {\r\n\t      p = ref[k];\r\n\t      if (p.onSpaceResize != null) {\r\n\t        p.onSpaceResize(w, h, evt);\r\n\t      }\r\n\t    }\r\n\t    this.render(this.ctx);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  CanvasSpace.prototype.clear = function(bg) {\r\n\t    var lastColor;\r\n\t    if (bg) {\r\n\t      this.bgcolor = bg;\r\n\t    }\r\n\t    lastColor = this.ctx.fillStyle;\r\n\t    if (this.bgcolor) {\r\n\t      this.ctx.fillStyle = this.bgcolor;\r\n\t      this.ctx.fillRect(0, 0, this.size.x, this.size.y);\r\n\t    } else {\r\n\t      this.ctx.clearRect(0, 0, this.size.x, this.size.y);\r\n\t    }\r\n\t    this.ctx.fillStyle = lastColor;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  CanvasSpace.prototype.animate = function(time) {\r\n\t    var k, ref, v;\r\n\t    this.ctx.save();\r\n\t    if (this._refresh) {\r\n\t      this.clear();\r\n\t    }\r\n\t    ref = this.items;\r\n\t    for (k in ref) {\r\n\t      v = ref[k];\r\n\t      v.animate(time, this._timeDiff, this.ctx);\r\n\t    }\r\n\t    if (this._timeEnd >= 0 && time > this._timeEnd) {\r\n\t      cancelAnimationFrame(this._animID);\r\n\t    }\r\n\t    this.ctx.restore();\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  CanvasSpace.prototype.bindCanvas = function(evt, callback) {\r\n\t    return this.space.addEventListener(evt, callback);\r\n\t  };\r\n\t\r\n\t  CanvasSpace.prototype.bindMouse = function(_bind) {\r\n\t    if (_bind == null) {\r\n\t      _bind = true;\r\n\t    }\r\n\t    if (_bind) {\r\n\t      this.space.addEventListener(\"mousedown\", this._mouseDown.bind(this));\r\n\t      this.space.addEventListener(\"mouseup\", this._mouseUp.bind(this));\r\n\t      this.space.addEventListener(\"mouseover\", this._mouseOver.bind(this));\r\n\t      this.space.addEventListener(\"mouseout\", this._mouseOut.bind(this));\r\n\t      return this.space.addEventListener(\"mousemove\", this._mouseMove.bind(this));\r\n\t    } else {\r\n\t      this.space.removeEventListener(\"mousedown\", this._mouseDown.bind(this));\r\n\t      this.space.removeEventListener(\"mouseup\", this._mouseUp.bind(this));\r\n\t      this.space.removeEventListener(\"mouseover\", this._mouseOver.bind(this));\r\n\t      this.space.removeEventListener(\"mouseout\", this._mouseOut.bind(this));\r\n\t      return this.space.removeEventListener(\"mousemove\", this._mouseMove.bind(this));\r\n\t    }\r\n\t  };\r\n\t\r\n\t  CanvasSpace.prototype._mouseAction = function(type, evt) {\r\n\t    var k, px, py, ref, results, v;\r\n\t    ref = this.items;\r\n\t    results = [];\r\n\t    for (k in ref) {\r\n\t      v = ref[k];\r\n\t      px = evt.offsetX || evt.layerX;\r\n\t      py = evt.offsetY || evt.layerY;\r\n\t      if (v.onMouseAction != null) {\r\n\t        results.push(v.onMouseAction(type, px, py, evt));\r\n\t      } else {\r\n\t        results.push(void 0);\r\n\t      }\r\n\t    }\r\n\t    return results;\r\n\t  };\r\n\t\r\n\t  CanvasSpace.prototype._mouseDown = function(evt) {\r\n\t    this._mouseAction(\"down\", evt);\r\n\t    return this._mdown = true;\r\n\t  };\r\n\t\r\n\t  CanvasSpace.prototype._mouseUp = function(evt) {\r\n\t    this._mouseAction(\"up\", evt);\r\n\t    if (this._mdrag) {\r\n\t      this._mouseAction(\"drop\", evt);\r\n\t    }\r\n\t    this._mdown = false;\r\n\t    return this._mdrag = false;\r\n\t  };\r\n\t\r\n\t  CanvasSpace.prototype._mouseMove = function(evt) {\r\n\t    this._mouseAction(\"move\", evt);\r\n\t    if (this._mdown) {\r\n\t      this._mdrag = true;\r\n\t      return this._mouseAction(\"drag\", evt);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  CanvasSpace.prototype._mouseOver = function(evt) {\r\n\t    return this._mouseAction(\"over\", evt);\r\n\t  };\r\n\t\r\n\t  CanvasSpace.prototype._mouseOut = function(evt) {\r\n\t    this._mouseAction(\"out\", evt);\r\n\t    if (this._mdrag) {\r\n\t      this._mouseAction(\"drop\", evt);\r\n\t    }\r\n\t    return this._mdrag = false;\r\n\t  };\r\n\t\r\n\t  return CanvasSpace;\r\n\t\r\n\t})(Space);\r\n\t\r\n\tthis.CanvasSpace = CanvasSpace;\r\n\t\r\n\tDOMSpace = (function(superClass) {\r\n\t  extend(DOMSpace, superClass);\r\n\t\r\n\t  function DOMSpace(id, bgcolor, context) {\r\n\t    if (id == null) {\r\n\t      id = 'pt_space';\r\n\t    }\r\n\t    if (bgcolor == null) {\r\n\t      bgcolor = false;\r\n\t    }\r\n\t    if (context == null) {\r\n\t      context = 'html';\r\n\t    }\r\n\t    DOMSpace.__super__.constructor.apply(this, arguments);\r\n\t    this.space = document.querySelector(\"#\" + this.id);\r\n\t    this.css = {\r\n\t      width: \"100%\",\r\n\t      height: \"100%\"\r\n\t    };\r\n\t    this.appended = true;\r\n\t    if (!this.space) {\r\n\t      this._createSpaceElement();\r\n\t    }\r\n\t    this._mdown = false;\r\n\t    this._mdrag = false;\r\n\t    this.bgcolor = bgcolor;\r\n\t    this.ctx = {};\r\n\t  }\r\n\t\r\n\t  DOMSpace.prototype._createSpaceElement = function() {\r\n\t    this.space = document.createElement(\"div\");\r\n\t    this.space.setAttribute(\"id\", this.id);\r\n\t    return this.appended = false;\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype.setCSS = function(key, val, isPx) {\r\n\t    if (isPx == null) {\r\n\t      isPx = false;\r\n\t    }\r\n\t    this.css[key] = (isPx ? val + \"px\" : val);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype.updateCSS = function() {\r\n\t    var k, ref, results, v;\r\n\t    ref = this.css;\r\n\t    results = [];\r\n\t    for (k in ref) {\r\n\t      v = ref[k];\r\n\t      results.push(this.space.style[k] = v);\r\n\t    }\r\n\t    return results;\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype.display = function(parent_id, readyCallback) {\r\n\t    var frame, frame_rect;\r\n\t    if (parent_id == null) {\r\n\t      parent_id = \"#pt\";\r\n\t    }\r\n\t    if (!this.appended) {\r\n\t      frame = document.querySelector(parent_id);\r\n\t      frame_rect = frame.getBoundingClientRect();\r\n\t      if (frame) {\r\n\t        this.resize(frame_rect.width, frame_rect.height);\r\n\t        window.addEventListener('resize', (function(evt) {\r\n\t          frame_rect = frame.getBoundingClientRect();\r\n\t          return this.resize(frame_rect.width, frame_rect.height, evt);\r\n\t        }).bind(this));\r\n\t        if (this.space.parentNode !== frame) {\r\n\t          frame.appendChild(this.space);\r\n\t        }\r\n\t        this.appended = true;\r\n\t        setTimeout((function() {\r\n\t          this.space.dispatchEvent(new Event('ready'));\r\n\t          if (readyCallback) {\r\n\t            return readyCallback(frame_rect.width, frame_rect.height, this.space);\r\n\t          }\r\n\t        }).bind(this));\r\n\t      } else {\r\n\t        throw 'Cannot add canvas to element ' + parent_id;\r\n\t      }\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype.resize = function(w, h, evt) {\r\n\t    var k, p, ref;\r\n\t    this.size.set(w, h);\r\n\t    this.center = new Vector(w / 2, h / 2);\r\n\t    ref = this.items;\r\n\t    for (k in ref) {\r\n\t      p = ref[k];\r\n\t      if (p.onSpaceResize != null) {\r\n\t        p.onSpaceResize(w, h, evt);\r\n\t      }\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype.clear = function() {\r\n\t    return this.space.innerHML = \"\";\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype.animate = function(time) {\r\n\t    var k, ref, v;\r\n\t    ref = this.items;\r\n\t    for (k in ref) {\r\n\t      v = ref[k];\r\n\t      v.animate(time, this._timeDiff, this.ctx);\r\n\t    }\r\n\t    if (this._timeEnd >= 0 && time > this._timeEnd) {\r\n\t      cancelAnimationFrame(this._animID);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype.bindCanvas = function(evt, callback) {\r\n\t    return this.space.addEventListener(evt, callback);\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype.bindMouse = function(_bind) {\r\n\t    if (_bind == null) {\r\n\t      _bind = true;\r\n\t    }\r\n\t    if (_bind) {\r\n\t      this.space.addEventListener(\"mousedown\", this._mouseDown.bind(this));\r\n\t      this.space.addEventListener(\"mouseup\", this._mouseUp.bind(this));\r\n\t      this.space.addEventListener(\"mouseover\", this._mouseOver.bind(this));\r\n\t      this.space.addEventListener(\"mouseout\", this._mouseOut.bind(this));\r\n\t      return this.space.addEventListener(\"mousemove\", this._mouseMove.bind(this));\r\n\t    } else {\r\n\t      this.space.removeEventListener(\"mousedown\", this._mouseDown.bind(this));\r\n\t      this.space.removeEventListener(\"mouseup\", this._mouseUp.bind(this));\r\n\t      this.space.removeEventListener(\"mouseover\", this._mouseOver.bind(this));\r\n\t      this.space.removeEventListener(\"mouseout\", this._mouseOut.bind(this));\r\n\t      return this.space.removeEventListener(\"mousemove\", this._mouseMove.bind(this));\r\n\t    }\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype._mouseAction = function(type, evt) {\r\n\t    var k, px, py, ref, results, v;\r\n\t    ref = this.items;\r\n\t    results = [];\r\n\t    for (k in ref) {\r\n\t      v = ref[k];\r\n\t      px = evt.offsetX || evt.layerX;\r\n\t      py = evt.offsetY || evt.layerY;\r\n\t      if (v.onMouseAction != null) {\r\n\t        results.push(v.onMouseAction(type, px, py, evt));\r\n\t      } else {\r\n\t        results.push(void 0);\r\n\t      }\r\n\t    }\r\n\t    return results;\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype._mouseDown = function(evt) {\r\n\t    this._mouseAction(\"down\", evt);\r\n\t    return this._mdown = true;\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype._mouseUp = function(evt) {\r\n\t    this._mouseAction(\"up\", evt);\r\n\t    if (this._mdrag) {\r\n\t      this._mouseAction(\"drop\", evt);\r\n\t    }\r\n\t    this._mdown = false;\r\n\t    return this._mdrag = false;\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype._mouseMove = function(evt) {\r\n\t    this._mouseAction(\"move\", evt);\r\n\t    if (this._mdown) {\r\n\t      this._mdrag = true;\r\n\t      return this._mouseAction(\"drag\", evt);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype._mouseOver = function(evt) {\r\n\t    return this._mouseAction(\"over\", evt);\r\n\t  };\r\n\t\r\n\t  DOMSpace.prototype._mouseOut = function(evt) {\r\n\t    this._mouseAction(\"out\", evt);\r\n\t    if (this._mdrag) {\r\n\t      this._mouseAction(\"drop\", evt);\r\n\t    }\r\n\t    return this._mdrag = false;\r\n\t  };\r\n\t\r\n\t  DOMSpace.attr = function(elem, data) {\r\n\t    var k, results, v;\r\n\t    results = [];\r\n\t    for (k in data) {\r\n\t      v = data[k];\r\n\t      results.push(elem.setAttribute(k, v));\r\n\t    }\r\n\t    return results;\r\n\t  };\r\n\t\r\n\t  DOMSpace.css = function(data) {\r\n\t    var k, str, v;\r\n\t    str = \"\";\r\n\t    for (k in data) {\r\n\t      v = data[k];\r\n\t      if (v) {\r\n\t        str += k + \": \" + v + \"; \";\r\n\t      }\r\n\t    }\r\n\t    return str;\r\n\t  };\r\n\t\r\n\t  return DOMSpace;\r\n\t\r\n\t})(Space);\r\n\t\r\n\tthis.DOMSpace = DOMSpace;\r\n\t\r\n\tForm = (function() {\r\n\t  function Form(space) {\r\n\t    this.cc = space.ctx;\r\n\t    this.cc.fillStyle = '#999';\r\n\t    this.cc.strokeStyle = '#666';\r\n\t    this.cc.lineWidth = 1;\r\n\t    this.cc.font = \"11px sans-serif\";\r\n\t    this.filled = true;\r\n\t    this.stroked = true;\r\n\t    this.fontSize = 11;\r\n\t    this.fontFace = \"sans-serif\";\r\n\t  }\r\n\t\r\n\t  Form.context = function(canvas_id) {\r\n\t    var cc, elem;\r\n\t    elem = document.getElementById(canvas_id);\r\n\t    cc = elem && elem.getContext ? elem.getContext('2d') : false;\r\n\t    if (!cc) {\r\n\t      throw \"Cannot initiate canvas 2d context\";\r\n\t    }\r\n\t    return cc;\r\n\t  };\r\n\t\r\n\t  Form.line = function(ctx, pair) {\r\n\t    if (!pair.p1) {\r\n\t      throw (pair.toString()) + \" is not a Pair\";\r\n\t    }\r\n\t    ctx.beginPath();\r\n\t    ctx.moveTo(pair.x, pair.y);\r\n\t    ctx.lineTo(pair.p1.x, pair.p1.y);\r\n\t    return ctx.stroke();\r\n\t  };\r\n\t\r\n\t  Form.lines = function(ctx, pairs) {\r\n\t    var aa, len1, ln, results;\r\n\t    results = [];\r\n\t    for (aa = 0, len1 = pairs.length; aa < len1; aa++) {\r\n\t      ln = pairs[aa];\r\n\t      results.push(Form.line(ctx, ln));\r\n\t    }\r\n\t    return results;\r\n\t  };\r\n\t\r\n\t  Form.rect = function(ctx, pair, fill, stroke) {\r\n\t    if (fill == null) {\r\n\t      fill = true;\r\n\t    }\r\n\t    if (stroke == null) {\r\n\t      stroke = false;\r\n\t    }\r\n\t    if (!pair.p1) {\r\n\t      throw \"\" + (pair.toString() === !a(Pair));\r\n\t    }\r\n\t    ctx.beginPath();\r\n\t    ctx.moveTo(pair.x, pair.y);\r\n\t    ctx.lineTo(pair.x, pair.p1.y);\r\n\t    ctx.lineTo(pair.p1.x, pair.p1.y);\r\n\t    ctx.lineTo(pair.p1.x, pair.y);\r\n\t    ctx.closePath();\r\n\t    if (stroke) {\r\n\t      ctx.stroke();\r\n\t    }\r\n\t    if (fill) {\r\n\t      return ctx.fill();\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Form.circle = function(ctx, c, fill, stroke) {\r\n\t    if (fill == null) {\r\n\t      fill = true;\r\n\t    }\r\n\t    if (stroke == null) {\r\n\t      stroke = false;\r\n\t    }\r\n\t    ctx.beginPath();\r\n\t    ctx.arc(c.x, c.y, c.radius, 0, Const.two_pi, false);\r\n\t    if (fill) {\r\n\t      ctx.fill();\r\n\t    }\r\n\t    if (stroke) {\r\n\t      ctx.stroke();\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Form.triangle = function(ctx, tri, fill, stroke) {\r\n\t    if (fill == null) {\r\n\t      fill = true;\r\n\t    }\r\n\t    if (stroke == null) {\r\n\t      stroke = false;\r\n\t    }\r\n\t    ctx.beginPath();\r\n\t    ctx.moveTo(tri.x, tri.y);\r\n\t    ctx.lineTo(tri.p1.x, tri.p1.y);\r\n\t    ctx.lineTo(tri.p2.x, tri.p2.y);\r\n\t    ctx.closePath();\r\n\t    if (fill) {\r\n\t      ctx.fill();\r\n\t    }\r\n\t    if (stroke) {\r\n\t      ctx.stroke();\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Form.point = function(ctx, pt, halfsize, fill, stroke, circle) {\r\n\t    var x1, x2, y1, y2;\r\n\t    if (halfsize == null) {\r\n\t      halfsize = 2;\r\n\t    }\r\n\t    if (fill == null) {\r\n\t      fill = true;\r\n\t    }\r\n\t    if (stroke == null) {\r\n\t      stroke = false;\r\n\t    }\r\n\t    if (circle == null) {\r\n\t      circle = false;\r\n\t    }\r\n\t    if (circle) {\r\n\t      ctx.beginPath();\r\n\t      ctx.arc(pt.x, pt.y, halfsize, 0, Const.two_pi, false);\r\n\t    } else {\r\n\t      x1 = pt.x - halfsize;\r\n\t      y1 = pt.y - halfsize;\r\n\t      x2 = pt.x + halfsize;\r\n\t      y2 = pt.y + halfsize;\r\n\t      ctx.beginPath();\r\n\t      ctx.moveTo(x1, y1);\r\n\t      ctx.lineTo(x1, y2);\r\n\t      ctx.lineTo(x2, y2);\r\n\t      ctx.lineTo(x2, y1);\r\n\t      ctx.closePath();\r\n\t    }\r\n\t    if (fill) {\r\n\t      ctx.fill();\r\n\t    }\r\n\t    if (stroke) {\r\n\t      ctx.stroke();\r\n\t    }\r\n\t    return pt;\r\n\t  };\r\n\t\r\n\t  Form.points = function(ctx, pts, halfsize, fill, stroke, circle) {\r\n\t    var aa, len1, p, results;\r\n\t    if (halfsize == null) {\r\n\t      halfsize = 2;\r\n\t    }\r\n\t    if (fill == null) {\r\n\t      fill = true;\r\n\t    }\r\n\t    if (stroke == null) {\r\n\t      stroke = false;\r\n\t    }\r\n\t    if (circle == null) {\r\n\t      circle = false;\r\n\t    }\r\n\t    results = [];\r\n\t    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n\t      p = pts[aa];\r\n\t      results.push(Form.point(ctx, p, halfsize, fill, stroke, circle));\r\n\t    }\r\n\t    return results;\r\n\t  };\r\n\t\r\n\t  Form.polygon = function(ctx, pts, closePath, fill, stroke) {\r\n\t    var aa, i, ref;\r\n\t    if (closePath == null) {\r\n\t      closePath = true;\r\n\t    }\r\n\t    if (fill == null) {\r\n\t      fill = true;\r\n\t    }\r\n\t    if (stroke == null) {\r\n\t      stroke = true;\r\n\t    }\r\n\t    if (pts.length <= 1) {\r\n\t      return;\r\n\t    }\r\n\t    ctx.beginPath();\r\n\t    ctx.moveTo(pts[0].x, pts[0].y);\r\n\t    for (i = aa = 1, ref = pts.length; aa < ref; i = aa += 1) {\r\n\t      ctx.lineTo(pts[i].x, pts[i].y);\r\n\t    }\r\n\t    if (closePath) {\r\n\t      ctx.closePath();\r\n\t    }\r\n\t    if (fill) {\r\n\t      ctx.fill();\r\n\t    }\r\n\t    if (stroke) {\r\n\t      ctx.stroke();\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Form.curve = function(ctx, pts) {\r\n\t    return Form.polygon(ctx, pts, false, false, true);\r\n\t  };\r\n\t\r\n\t  Form.text = function(ctx, pt, txt, maxWidth) {\r\n\t    return ctx.fillText(txt, pt.x, pt.y, maxWidth);\r\n\t  };\r\n\t\r\n\t  Form.prototype.fill = function(c) {\r\n\t    this.cc.fillStyle = c ? c : \"transparent\";\r\n\t    this.filled = !!c;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Form.prototype.stroke = function(c, width, joint) {\r\n\t    this.cc.strokeStyle = c ? c : \"transparent\";\r\n\t    this.stroked = !!c;\r\n\t    if (width) {\r\n\t      this.cc.lineWidth = width;\r\n\t    }\r\n\t    if (joint) {\r\n\t      this.cc.lineJoin = joint;\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Form.prototype.font = function(size, face) {\r\n\t    if (face == null) {\r\n\t      face = this.fontFace;\r\n\t    }\r\n\t    this.fontSize = size;\r\n\t    this.cc.font = size + \"px \" + face;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Form.prototype.draw = function(shape) {\r\n\t    return this.sketch(shape);\r\n\t  };\r\n\t\r\n\t  Form.prototype.sketch = function(shape) {\r\n\t    shape.floor();\r\n\t    if (shape instanceof Circle) {\r\n\t      Form.circle(this.cc, shape, this.filled, this.stroked);\r\n\t    } else if (shape instanceof Rectangle) {\r\n\t      Form.rect(this.cc, shape, this.filled, this.stroked);\r\n\t    } else if (shape instanceof Triangle) {\r\n\t      Form.triangle(this.cc, shape, this.filled, this.stroked);\r\n\t    } else if (shape instanceof Line || shape instanceof Pair) {\r\n\t      Form.line(this.cc, shape);\r\n\t    } else if (shape instanceof PointSet) {\r\n\t      Form.polygon(this.cc, shape.points);\r\n\t    } else if (shape instanceof Vector || shape instanceof Point) {\r\n\t      Form.point(this.cc, shape);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Form.prototype.point = function(p, halfsize, isCircle) {\r\n\t    if (halfsize == null) {\r\n\t      halfsize = 2;\r\n\t    }\r\n\t    if (isCircle == null) {\r\n\t      isCircle = false;\r\n\t    }\r\n\t    Form.point(this.cc, p, halfsize, this.filled, this.stroked, isCircle);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Form.prototype.points = function(ps, halfsize, isCircle) {\r\n\t    if (halfsize == null) {\r\n\t      halfsize = 2;\r\n\t    }\r\n\t    if (isCircle == null) {\r\n\t      isCircle = false;\r\n\t    }\r\n\t    Form.points(this.cc, ps, halfsize, this.filled, this.stroked, isCircle);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Form.prototype.line = function(p) {\r\n\t    Form.line(this.cc, p);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Form.prototype.lines = function(ps) {\r\n\t    Form.lines(this.cc, ps);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Form.prototype.rect = function(p) {\r\n\t    Form.rect(this.cc, p, this.filled, this.stroked);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Form.prototype.circle = function(p) {\r\n\t    Form.circle(this.cc, p, this.filled, this.stroked);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Form.prototype.triangle = function(p) {\r\n\t    Form.triangle(this.cc, p, this.filled, this.stroked);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Form.prototype.polygon = function(ps, closePath) {\r\n\t    Form.polygon(this.cc, ps, closePath, this.filled, this.stroked);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Form.prototype.curve = function(ps) {\r\n\t    Form.curve(this.cc, ps);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Form.prototype.text = function(p, txt, maxWidth, xoff, yoff) {\r\n\t    var pos;\r\n\t    if (maxWidth == null) {\r\n\t      maxWidth = 1000;\r\n\t    }\r\n\t    pos = new Vector(p);\r\n\t    if (xoff) {\r\n\t      pos.add(xoff, 0);\r\n\t    }\r\n\t    if (yoff) {\r\n\t      pos.add(0, yoff);\r\n\t    }\r\n\t    this.cc.fillText(txt, pos.x, pos.y, maxWidth);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  return Form;\r\n\t\r\n\t})();\r\n\t\r\n\tthis.Form = Form;\r\n\t\r\n\tPoint = (function() {\r\n\t  function Point(args) {\r\n\t    this.copy(Point.get(arguments));\r\n\t  }\r\n\t\r\n\t  Point.get = function(args) {\r\n\t    if (args.length > 0) {\r\n\t      if (typeof args[0] === 'object') {\r\n\t        if (args[0] instanceof Array || args[0].length > 0) {\r\n\t          return {\r\n\t            x: args[0][0] || 0,\r\n\t            y: args[0][1] || 0,\r\n\t            z: args[0][2] || 0\r\n\t          };\r\n\t        } else {\r\n\t          return {\r\n\t            x: args[0].x || 0,\r\n\t            y: args[0].y || 0,\r\n\t            z: args[0].z || 0\r\n\t          };\r\n\t        }\r\n\t      } else {\r\n\t        return {\r\n\t          x: args[0] || 0,\r\n\t          y: args[1] || 0,\r\n\t          z: args[2] || 0\r\n\t        };\r\n\t      }\r\n\t    } else {\r\n\t      return {\r\n\t        x: 0,\r\n\t        y: 0,\r\n\t        z: 0\r\n\t      };\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Point.prototype.quadrant = function(pt, epsilon) {\r\n\t    if (epsilon == null) {\r\n\t      epsilon = Const.epsilon;\r\n\t    }\r\n\t    if (pt.near(this)) {\r\n\t      return Const.identical;\r\n\t    }\r\n\t    if (Math.abs(pt.x - this.x) < epsilon) {\r\n\t      if (pt.y < this.y) {\r\n\t        return Const.top;\r\n\t      } else {\r\n\t        return Const.bottom;\r\n\t      }\r\n\t    }\r\n\t    if (Math.abs(pt.y - this.y) < epsilon) {\r\n\t      if (pt.x < this.x) {\r\n\t        return Const.left;\r\n\t      } else {\r\n\t        return Const.right;\r\n\t      }\r\n\t    }\r\n\t    if (pt.y < this.y && pt.x > this.x) {\r\n\t      return Const.top_right;\r\n\t    } else if (pt.y < this.y && pt.x < this.x) {\r\n\t      return Const.top_left;\r\n\t    } else if (pt.y > this.y && pt.x < this.x) {\r\n\t      return Const.bottom_left;\r\n\t    } else {\r\n\t      return Const.bottom_right;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Point.prototype.set = function(args) {\r\n\t    var p;\r\n\t    p = Point.get(arguments);\r\n\t    this.x = p.x;\r\n\t    this.y = p.y;\r\n\t    this.z = p.z;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Point.prototype.copy = function(p) {\r\n\t    this.x = p.x;\r\n\t    this.y = p.y;\r\n\t    this.z = p.z;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Point.prototype.clone = function() {\r\n\t    return new Point(this);\r\n\t  };\r\n\t\r\n\t  Point.prototype.toString = function() {\r\n\t    return \"Point \" + this.x + \", \" + this.y + \", \" + this.z;\r\n\t  };\r\n\t\r\n\t  Point.prototype.toArray = function() {\r\n\t    return [this];\r\n\t  };\r\n\t\r\n\t  Point.prototype.get2D = function(axis, reverse) {\r\n\t    if (reverse == null) {\r\n\t      reverse = false;\r\n\t    }\r\n\t    if (axis === Const.xy) {\r\n\t      return new this.__proto__.constructor(this);\r\n\t    }\r\n\t    if (axis === Const.xz) {\r\n\t      return new this.__proto__.constructor(this.x, this.z, this.y);\r\n\t    }\r\n\t    if (axis === Const.yz) {\r\n\t      if (reverse) {\r\n\t        return new this.__proto__.constructor(this.z, this.x, this.y);\r\n\t      } else {\r\n\t        return new this.__proto__.constructor(this.y, this.z, this.x);\r\n\t      }\r\n\t    }\r\n\t    return new this.__proto__.constructor(this);\r\n\t  };\r\n\t\r\n\t  Point.prototype.min = function(args) {\r\n\t    var _p;\r\n\t    _p = Point.get(arguments);\r\n\t    this.x = Math.min(this.x, _p.x);\r\n\t    this.y = Math.min(this.y, _p.y);\r\n\t    this.z = Math.min(this.z, _p.z);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Point.prototype.$min = function(args) {\r\n\t    var _p;\r\n\t    _p = Point.get(arguments);\r\n\t    return new this.__proto__.constructor(Math.min(this.x, _p.x), Math.min(this.y, _p.y), Math.min(this.z, _p.z));\r\n\t  };\r\n\t\r\n\t  Point.prototype.max = function(args) {\r\n\t    var _p;\r\n\t    _p = Point.get(arguments);\r\n\t    this.x = Math.max(this.x, _p.x);\r\n\t    this.y = Math.max(this.y, _p.y);\r\n\t    this.z = Math.max(this.z, _p.z);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Point.prototype.$max = function(args) {\r\n\t    var _p;\r\n\t    _p = Point.get(arguments);\r\n\t    return new this.__proto__.constructor(Math.max(this.x, _p.x), Math.max(this.y, _p.y), Math.max(this.z, _p.z));\r\n\t  };\r\n\t\r\n\t  Point.prototype.equal = function(args) {\r\n\t    var _p;\r\n\t    _p = Point.get(arguments);\r\n\t    return (_p.x === this.x) && (_p.y === this.y) && (_p.z === this.z);\r\n\t  };\r\n\t\r\n\t  Point.prototype.near = function(pt, epsilon) {\r\n\t    var _p;\r\n\t    if (epsilon == null) {\r\n\t      epsilon = Const.epsilon;\r\n\t    }\r\n\t    _p = Point.get(arguments);\r\n\t    return (Math.abs(_p.x - this.x) < epsilon) && (Math.abs(_p.y - this.y) < epsilon) && (Math.abs(_p.z - this.z) < epsilon);\r\n\t  };\r\n\t\r\n\t  Point.prototype.floor = function() {\r\n\t    this.x = Math.floor(this.x);\r\n\t    this.y = Math.floor(this.y);\r\n\t    this.z = Math.floor(this.z);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Point.prototype.ceil = function() {\r\n\t    this.x = Math.ceil(this.x);\r\n\t    this.y = Math.ceil(this.y);\r\n\t    this.z = Math.ceil(this.z);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  return Point;\r\n\t\r\n\t})();\r\n\t\r\n\tthis.Point = Point;\r\n\t\r\n\tVector = (function(superClass) {\r\n\t  extend(Vector, superClass);\r\n\t\r\n\t  function Vector() {\r\n\t    Vector.__super__.constructor.apply(this, arguments);\r\n\t  }\r\n\t\r\n\t  Vector.prototype._getArgs = function(args) {\r\n\t    if (typeof args[0] === 'number' && args.length > 1) {\r\n\t      return args;\r\n\t    } else {\r\n\t      return args[0];\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Vector.prototype.add = function(args) {\r\n\t    var _p;\r\n\t    if (typeof arguments[0] === 'number' && arguments.length === 1) {\r\n\t      this.x += arguments[0];\r\n\t      this.y += arguments[0];\r\n\t      this.z += arguments[0];\r\n\t    } else {\r\n\t      _p = Point.get(arguments);\r\n\t      this.x += _p.x;\r\n\t      this.y += _p.y;\r\n\t      this.z += _p.z;\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.$add = function(args) {\r\n\t    var a;\r\n\t    a = this._getArgs(arguments);\r\n\t    return new Vector(this).add(a);\r\n\t  };\r\n\t\r\n\t  Vector.prototype.subtract = function(args) {\r\n\t    var _p;\r\n\t    if (typeof arguments[0] === 'number' && arguments.length === 1) {\r\n\t      this.x -= arguments[0];\r\n\t      this.y -= arguments[0];\r\n\t      this.z -= arguments[0];\r\n\t    } else {\r\n\t      _p = Point.get(arguments);\r\n\t      this.x -= _p.x;\r\n\t      this.y -= _p.y;\r\n\t      this.z -= _p.z;\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.$subtract = function(args) {\r\n\t    var a;\r\n\t    a = this._getArgs(arguments);\r\n\t    return new Vector(this).subtract(a);\r\n\t  };\r\n\t\r\n\t  Vector.prototype.multiply = function(args) {\r\n\t    var _p;\r\n\t    if (arguments.length === 1 && (typeof arguments[0] === 'number' || (typeof arguments[0] === 'object' && arguments[0].length === 1))) {\r\n\t      this.x *= arguments[0];\r\n\t      this.y *= arguments[0];\r\n\t      this.z *= arguments[0];\r\n\t    } else {\r\n\t      _p = Point.get(arguments);\r\n\t      this.x *= _p.x;\r\n\t      this.y *= _p.y;\r\n\t      this.z *= _p.z;\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.$multiply = function(args) {\r\n\t    var a;\r\n\t    a = this._getArgs(arguments);\r\n\t    return new Vector(this).multiply(a);\r\n\t  };\r\n\t\r\n\t  Vector.prototype.divide = function(args) {\r\n\t    var _p;\r\n\t    if (arguments.length === 1 && (typeof arguments[0] === 'number' || (typeof arguments[0] === 'object' && arguments[0].length === 1))) {\r\n\t      this.x /= arguments[0];\r\n\t      this.y /= arguments[0];\r\n\t      this.z /= arguments[0];\r\n\t    } else {\r\n\t      _p = Point.get(arguments);\r\n\t      this.x /= _p.x;\r\n\t      this.y /= _p.y;\r\n\t      this.z /= _p.z;\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.$divide = function(args) {\r\n\t    var a;\r\n\t    a = this._getArgs(arguments);\r\n\t    return new Vector(this).divide(a);\r\n\t  };\r\n\t\r\n\t  Vector.prototype.op = function() {\r\n\t    var aa, args, len1, name, p, pts;\r\n\t    name = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\r\n\t    pts = this.toArray();\r\n\t    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n\t      p = pts[aa];\r\n\t      p[name].apply(p, args);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.$op = function() {\r\n\t    var aa, args, instance, len1, name, p, pts;\r\n\t    name = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\r\n\t    instance = this.clone();\r\n\t    pts = instance.toArray();\r\n\t    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n\t      p = pts[aa];\r\n\t      p[name].apply(p, args);\r\n\t    }\r\n\t    return instance;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.angle = function(args) {\r\n\t    var axis, p;\r\n\t    if (arguments.length === 0) {\r\n\t      return Math.atan2(this.y, this.x);\r\n\t    }\r\n\t    if (typeof arguments[0] === 'string') {\r\n\t      axis = arguments[0];\r\n\t      p = arguments.length > 1 ? this.$subtract(arguments[1]).multiply(-1) : void 0;\r\n\t    } else {\r\n\t      p = this.$subtract(arguments[0]).multiply(-1);\r\n\t      axis = false;\r\n\t    }\r\n\t    if (p && !axis) {\r\n\t      return Math.atan2(p.y, p.x);\r\n\t    } else if (axis === Const.xy) {\r\n\t      if (p) {\r\n\t        return Math.atan2(p.y, p.x);\r\n\t      } else {\r\n\t        return Math.atan2(this.y, this.x);\r\n\t      }\r\n\t    } else if (axis === Const.yz) {\r\n\t      if (p) {\r\n\t        return Math.atan2(p.z, p.y);\r\n\t      } else {\r\n\t        return Math.atan2(this.z, this.y);\r\n\t      }\r\n\t    } else if (axis === Const.xz) {\r\n\t      if (p) {\r\n\t        return Math.atan2(p.z, p.x);\r\n\t      } else {\r\n\t        return Math.atan2(this.z, this.x);\r\n\t      }\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Vector.prototype.angleBetween = function(vec, axis) {\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    return Util.boundRadian(this.angle(axis), true) - Util.boundRadian(vec.angle(axis), true);\r\n\t  };\r\n\t\r\n\t  Vector.prototype.magnitude = function(args) {\r\n\t    var _sq, axis, m, mag, p, useSq;\r\n\t    m = {\r\n\t      x: this.x * this.x,\r\n\t      y: this.y * this.y,\r\n\t      z: this.z * this.z\r\n\t    };\r\n\t    useSq = arguments.length >= 1 && !arguments[arguments.length - 1];\r\n\t    _sq = useSq ? (function(x) {\r\n\t      return x;\r\n\t    }) : Math.sqrt;\r\n\t    if (arguments.length === 0) {\r\n\t      return _sq(m.x + m.y + m.z);\r\n\t    }\r\n\t    if (typeof arguments[0] === 'string') {\r\n\t      axis = arguments[0];\r\n\t      if (arguments.length > 1 && arguments[1]) {\r\n\t        p = this.$subtract(arguments[1]);\r\n\t      } else {\r\n\t        p = void 0;\r\n\t      }\r\n\t    } else {\r\n\t      p = this.$subtract(arguments[0]);\r\n\t      axis = false;\r\n\t    }\r\n\t    mag = p ? {\r\n\t      x: p.x * p.x,\r\n\t      y: p.y * p.y,\r\n\t      z: p.z * p.z\r\n\t    } : m;\r\n\t    if (p && !axis) {\r\n\t      return _sq(mag.x + mag.y + mag.z);\r\n\t    } else if (axis === Const.xy) {\r\n\t      return _sq(mag.x + mag.y);\r\n\t    } else if (axis === Const.yz) {\r\n\t      return _sq(mag.y + mag.z);\r\n\t    } else if (axis === Const.xz) {\r\n\t      return _sq(mag.x + mag.z);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Vector.prototype.distance = function(pt, axis) {\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    return this.magnitude(axis, pt);\r\n\t  };\r\n\t\r\n\t  Vector.prototype.normalize = function() {\r\n\t    this.set(this.$normalize());\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.$normalize = function() {\r\n\t    var m;\r\n\t    m = this.magnitude();\r\n\t    if (m === 0) {\r\n\t      return new Vector();\r\n\t    } else {\r\n\t      return new Vector(this.x / m, this.y / m, this.z / m);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Vector.prototype.abs = function() {\r\n\t    this.x = Math.abs(this.x);\r\n\t    this.y = Math.abs(this.y);\r\n\t    this.z = Math.abs(this.z);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.dot = function(p, axis) {\r\n\t    if (axis == null) {\r\n\t      axis = Const.xyz;\r\n\t    }\r\n\t    if (axis === Const.xyz) {\r\n\t      return this.x * p.x + this.y * p.y + this.z * p.z;\r\n\t    } else if (axis === Const.xy) {\r\n\t      return this.x * p.x + this.y * p.y;\r\n\t    } else if (axis === Const.yz) {\r\n\t      return this.y * p.y + this.z * p.z;\r\n\t    } else if (axis === Const.xz) {\r\n\t      return this.x * p.x + this.z * p.z;\r\n\t    } else {\r\n\t      return this.x * p.x + this.y * p.y + this.z * p.z;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Vector.prototype.projection = function(vec, axis) {\r\n\t    var a, b, dot, m;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xyz;\r\n\t    }\r\n\t    m = vec.magnitude();\r\n\t    a = this.$normalize();\r\n\t    b = new Vector(vec.x / m, vec.y / m, vec.z / m);\r\n\t    dot = a.dot(b, axis);\r\n\t    return a.$multiply(m * dot);\r\n\t  };\r\n\t\r\n\t  Vector.prototype.cross = function(p) {\r\n\t    return new Vector(this.y * p.z - this.z * p.y, this.z * p.x - this.x * p.z, this.x * p.y - this.y * p.x);\r\n\t  };\r\n\t\r\n\t  Vector.prototype.bisect = function(vec, isNormalized) {\r\n\t    if (isNormalized == null) {\r\n\t      isNormalized = false;\r\n\t    }\r\n\t    if (isNormalized) {\r\n\t      return this.$add(vec).divide(2);\r\n\t    } else {\r\n\t      return this.$normalize().add(vec.$normalize()).divide(2);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Vector.prototype.perpendicular = function(axis) {\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    switch (axis) {\r\n\t      case Const.xy:\r\n\t        return [new Vector(-this.y, this.x, this.z), new Vector(this.y, -this.x, this.z)];\r\n\t      case Const.yz:\r\n\t        return [new Vector(this.x, -this.z, this.y), new Vector(this.x, this.z, -this.y)];\r\n\t      case Const.xz:\r\n\t        return [new Vector(-this.z, this.y, this.x), new Vector(this.z, -this.y, this.x)];\r\n\t      default:\r\n\t        return [new Vector(-this.y, this.x, this.z), new Vector(this.y, -this.x, this.z)];\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Vector.prototype.isPerpendicular = function(p, axis) {\r\n\t    if (axis == null) {\r\n\t      axis = Const.xyz;\r\n\t    }\r\n\t    return this.dot(p, axis) === 0;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.surfaceNormal = function(p) {\r\n\t    return this.cross(p).normalize(true);\r\n\t  };\r\n\t\r\n\t  Vector.prototype.moveTo = function(args) {\r\n\t    var aa, d, len1, p, pts, target;\r\n\t    target = Point.get(arguments);\r\n\t    d = this.$subtract(target);\r\n\t    pts = this.toArray();\r\n\t    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n\t      p = pts[aa];\r\n\t      p.subtract(d);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.moveBy = function(args) {\r\n\t    var aa, inc, len1, p, pts;\r\n\t    inc = Point.get(arguments);\r\n\t    pts = this.toArray();\r\n\t    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n\t      p = pts[aa];\r\n\t      p.add(inc);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.rotate2D = function(radian, anchor, axis) {\r\n\t    var aa, len1, mx, p, pts;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    if (!anchor) {\r\n\t      anchor = new Point(0, 0, 0);\r\n\t    }\r\n\t    mx = Matrix.rotateAnchor2D(radian, anchor, axis);\r\n\t    pts = this.toArray();\r\n\t    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n\t      p = pts[aa];\r\n\t      Matrix.transform2D(p, mx, axis);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.reflect2D = function(line, axis) {\r\n\t    var aa, len1, mx, p, pts;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    mx = Matrix.reflectAnchor2D(line, axis);\r\n\t    pts = this.toArray();\r\n\t    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n\t      p = pts[aa];\r\n\t      Matrix.transform2D(p, mx, axis);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.scale2D = function(sx, sy, anchor, axis) {\r\n\t    var aa, len1, mx, p, pts;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    if (!anchor) {\r\n\t      anchor = new Point(0, 0, 0);\r\n\t    }\r\n\t    mx = Matrix.scaleAnchor2D(sx, sy, anchor, axis);\r\n\t    pts = this.toArray();\r\n\t    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n\t      p = pts[aa];\r\n\t      Matrix.transform2D(p, mx, axis);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.shear2D = function(sx, sy, anchor, axis) {\r\n\t    var aa, len1, mx, p, pts;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    if (!anchor) {\r\n\t      anchor = new Point(0, 0, 0);\r\n\t    }\r\n\t    mx = Matrix.shearAnchor2D(sx, sy, anchor, axis);\r\n\t    pts = this.toArray();\r\n\t    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n\t      p = pts[aa];\r\n\t      Matrix.transform2D(p, mx, axis);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Vector.prototype.clone = function() {\r\n\t    return new Vector(this);\r\n\t  };\r\n\t\r\n\t  Vector.prototype.toString = function() {\r\n\t    return \"Vector \" + this.x + \", \" + this.y + \", \" + this.z;\r\n\t  };\r\n\t\r\n\t  return Vector;\r\n\t\r\n\t})(Point);\r\n\t\r\n\tthis.Vector = Vector;\r\n\t\r\n\tColor = (function(superClass) {\r\n\t  extend(Color, superClass);\r\n\t\r\n\t  function Color(args) {\r\n\t    Color.__super__.constructor.apply(this, arguments);\r\n\t    this.alpha = arguments.length >= 4 ? Math.min(1, Math.max(arguments[3], 0)) : 1;\r\n\t    this.mode = arguments.length >= 5 ? arguments[4] : 'rgb';\r\n\t  }\r\n\t\r\n\t  Color.XYZ = {\r\n\t    D65: {\r\n\t      x: 95.047,\r\n\t      y: 100,\r\n\t      z: 108.883\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Color.parseHex = function(hex, asColor) {\r\n\t    var hexValue, rgb;\r\n\t    if (asColor == null) {\r\n\t      asColor = false;\r\n\t    }\r\n\t    if (hex.indexOf('#') === 0) {\r\n\t      hex = hex.substr(1);\r\n\t    }\r\n\t    if (hex.length === 3) {\r\n\t      hex = \"\" + hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\r\n\t    }\r\n\t    if (hex.length === 8) {\r\n\t      this.alpha = hex.substr(6) & 0xFF / 255;\r\n\t      hex = hex.substring(0, 6);\r\n\t    }\r\n\t    hexValue = parseInt(hex, 16);\r\n\t    rgb = [hexValue >> 16, hexValue >> 8 & 0xFF, hexValue & 0xFF];\r\n\t    if (asColor) {\r\n\t      return new Color(rgb[0], rgb[1], rgb[2]);\r\n\t    } else {\r\n\t      return rgb;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Color.prototype.setMode = function(m) {\r\n\t    m = m.toLowerCase();\r\n\t    if (m !== this.mode) {\r\n\t      switch (this.mode) {\r\n\t        case 'hsl':\r\n\t          this.copy(Point.get(Color.HSLtoRGB(this.x, this.y, this.z)));\r\n\t          break;\r\n\t        case 'hsb':\r\n\t          this.copy(Point.get(Color.HSBtoRGB(this.x, this.y, this.z)));\r\n\t          break;\r\n\t        case 'lab':\r\n\t          this.copy(Point.get(Color.LABtoRGB(this.x, this.y, this.z)));\r\n\t          break;\r\n\t        case 'lch':\r\n\t          this.copy(Point.get(Color.LCHtoRGB(this.x, this.y, this.z)));\r\n\t          break;\r\n\t        case 'xyz':\r\n\t          this.copy(Point.get(Color.XYZtoRGB(this.x, this.y, this.z)));\r\n\t      }\r\n\t      switch (m) {\r\n\t        case 'hsl':\r\n\t          this.copy(Point.get(Color.RGBtoHSL(this.x, this.y, this.z)));\r\n\t          break;\r\n\t        case 'hsb':\r\n\t          this.copy(Point.get(Color.RGBtoHSB(this.x, this.y, this.z)));\r\n\t          break;\r\n\t        case 'lab':\r\n\t          this.copy(Point.get(Color.RGBtoLAB(this.x, this.y, this.z)));\r\n\t          break;\r\n\t        case 'lch':\r\n\t          this.copy(Point.get(Color.RGBtoLCH(this.x, this.y, this.z)));\r\n\t          break;\r\n\t        case 'xyz':\r\n\t          this.copy(Point.get(Color.RGBtoXYZ(this.x, this.y, this.z)));\r\n\t      }\r\n\t    }\r\n\t    this.mode = m;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Color.prototype.hex = function() {\r\n\t    var _hexstring, cs, ct, n;\r\n\t    if (this.mode === 'rgb') {\r\n\t      this.floor();\r\n\t    }\r\n\t    cs = this.values(this.mode !== 'rgb');\r\n\t    _hexstring = function(n) {\r\n\t      n = n.toString(16);\r\n\t      if (n.length < 2) {\r\n\t        return '0' + n;\r\n\t      } else {\r\n\t        return n;\r\n\t      }\r\n\t    };\r\n\t    ct = (function() {\r\n\t      var aa, len1, results;\r\n\t      results = [];\r\n\t      for (aa = 0, len1 = cs.length; aa < len1; aa++) {\r\n\t        n = cs[aa];\r\n\t        results.push(_hexstring(n));\r\n\t      }\r\n\t      return results;\r\n\t    })();\r\n\t    return '#' + ct[0] + ct[1] + ct[2];\r\n\t  };\r\n\t\r\n\t  Color.prototype.rgb = function() {\r\n\t    var cs;\r\n\t    if (this.mode === 'rgb') {\r\n\t      this.floor();\r\n\t    }\r\n\t    cs = this.values(this.mode !== 'rgb');\r\n\t    return \"rgb(\" + cs[0] + \", \" + cs[1] + \", \" + cs[2] + \")\";\r\n\t  };\r\n\t\r\n\t  Color.prototype.rgba = function() {\r\n\t    var cs;\r\n\t    if (this.mode === 'rgb') {\r\n\t      this.floor();\r\n\t    }\r\n\t    cs = this.values(this.mode !== 'rgb');\r\n\t    return \"rgba(\" + cs[0] + \", \" + cs[1] + \", \" + cs[2] + \", \" + this.alpha + \")\";\r\n\t  };\r\n\t\r\n\t  Color.prototype.values = function(toRGB) {\r\n\t    var cs, v;\r\n\t    if (toRGB == null) {\r\n\t      toRGB = false;\r\n\t    }\r\n\t    cs = [this.x, this.y, this.z];\r\n\t    if (toRGB && this.mode !== 'rgb') {\r\n\t      switch (this.mode) {\r\n\t        case 'hsl':\r\n\t          cs = Color.HSLtoRGB(this.x, this.y, this.z);\r\n\t          break;\r\n\t        case 'hsb':\r\n\t          cs = Color.HSBtoRGB(this.x, this.y, this.z);\r\n\t          break;\r\n\t        case 'lab':\r\n\t          cs = Color.LABtoRGB(this.x, this.y, this.z);\r\n\t          break;\r\n\t        case 'lch':\r\n\t          cs = Color.LCHtoRGB(this.x, this.y, this.z);\r\n\t          break;\r\n\t        case 'xyz':\r\n\t          cs = Color.XYZtoRGB(this.x, this.y, this.z);\r\n\t      }\r\n\t    }\r\n\t    return (function() {\r\n\t      var aa, len1, results;\r\n\t      results = [];\r\n\t      for (aa = 0, len1 = cs.length; aa < len1; aa++) {\r\n\t        v = cs[aa];\r\n\t        results.push(Math.floor(v));\r\n\t      }\r\n\t      return results;\r\n\t    })();\r\n\t  };\r\n\t\r\n\t  Color.RGBtoHSL = function(r, g, b, normalizedInput, normalizedOutput) {\r\n\t    var d, h, l, max, min, s;\r\n\t    if (!normalizedInput) {\r\n\t      r /= 255;\r\n\t      g /= 255;\r\n\t      b /= 255;\r\n\t    }\r\n\t    max = Math.max(r, g, b);\r\n\t    min = Math.min(r, g, b);\r\n\t    h = (max + min) / 2;\r\n\t    s = h;\r\n\t    l = h;\r\n\t    if (max === min) {\r\n\t      h = 0;\r\n\t      s = 0;\r\n\t    } else {\r\n\t      d = max - min;\r\n\t      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n\t      switch (max) {\r\n\t        case r:\r\n\t          h = (g - b) / d + (g < b ? 6 : 0);\r\n\t          break;\r\n\t        case g:\r\n\t          h = (b - r) / d + 2;\r\n\t          break;\r\n\t        case b:\r\n\t          h = (r - g) / d + 4;\r\n\t          break;\r\n\t        default:\r\n\t          h = 0;\r\n\t      }\r\n\t    }\r\n\t    if (normalizedOutput) {\r\n\t      return [h / 60, s, l];\r\n\t    } else {\r\n\t      return [h * 60, s, l];\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Color.HSLtoRGB = function(h, s, l, normalizedInput, normalizedOutput) {\r\n\t    var b, g, hue2rgb, p, q, r;\r\n\t    if (s === 0) {\r\n\t      if (normalizedOutput) {\r\n\t        return [1, 1, 1];\r\n\t      } else {\r\n\t        return [255, 255, 255];\r\n\t      }\r\n\t    } else {\r\n\t      if (!normalizedInput) {\r\n\t        h /= 360;\r\n\t      }\r\n\t      q = l <= 0.5 ? l * (1 + s) : l + s - (l * s);\r\n\t      p = 2 * l - q;\r\n\t      hue2rgb = function(p, q, t) {\r\n\t        if (t < 0) {\r\n\t          t += 1;\r\n\t        } else if (t > 1) {\r\n\t          t -= 1;\r\n\t        }\r\n\t        if (t * 6 < 1) {\r\n\t          return p + (q - p) * t * 6;\r\n\t        } else if (t * 2 < 1) {\r\n\t          return q;\r\n\t        } else if (t * 3 < 2) {\r\n\t          return p + (q - p) * ((2 / 3) - t) * 6;\r\n\t        } else {\r\n\t          return p;\r\n\t        }\r\n\t      };\r\n\t      r = hue2rgb(p, q, h + 1 / 3);\r\n\t      g = hue2rgb(p, q, h);\r\n\t      b = hue2rgb(p, q, h - 1 / 3);\r\n\t      if (normalizedOutput) {\r\n\t        return [r, g, b];\r\n\t      } else {\r\n\t        return [r * 255, g * 255, b * 255];\r\n\t      }\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Color.RGBtoHSB = function(r, g, b, normalizedInput, normalizedOutput) {\r\n\t    var d, h, max, min, s, v;\r\n\t    if (!normalizedInput) {\r\n\t      r /= 255;\r\n\t      g /= 255;\r\n\t      b /= 255;\r\n\t    }\r\n\t    max = Math.max(r, g, b);\r\n\t    min = Math.min(r, g, b);\r\n\t    d = max - min;\r\n\t    s = max === 0 ? 0 : d / max;\r\n\t    v = max;\r\n\t    if (max === min) {\r\n\t      h = 0;\r\n\t    } else {\r\n\t      switch (max) {\r\n\t        case r:\r\n\t          h = (g - b) / d + (g < b ? 6 : 0);\r\n\t          break;\r\n\t        case g:\r\n\t          h = (b - r) / d + 2;\r\n\t          break;\r\n\t        case b:\r\n\t          h = (r - g) / d + 4;\r\n\t          break;\r\n\t        default:\r\n\t          h = 0;\r\n\t      }\r\n\t    }\r\n\t    if (normalizedOutput) {\r\n\t      return [h / 60, s, v];\r\n\t    } else {\r\n\t      return [h * 60, s, v];\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Color.HSBtoRGB = function(h, s, v, normalizedInput, normalizedOutput) {\r\n\t    var f, i, p, q, rgb, t;\r\n\t    if (!normalizedInput) {\r\n\t      h /= 360;\r\n\t    }\r\n\t    i = Math.floor(h * 6);\r\n\t    f = h * 6 - i;\r\n\t    p = v * (1 - s);\r\n\t    q = v * (1 - f * s);\r\n\t    t = v * (1 - (1 - f) * s);\r\n\t    switch (i % 6) {\r\n\t      case 0:\r\n\t        rgb = [v, t, p];\r\n\t        break;\r\n\t      case 1:\r\n\t        rgb = [q, v, p];\r\n\t        break;\r\n\t      case 2:\r\n\t        rgb = [p, v, t];\r\n\t        break;\r\n\t      case 3:\r\n\t        rgb = [p, q, v];\r\n\t        break;\r\n\t      case 4:\r\n\t        rgb = [t, p, v];\r\n\t        break;\r\n\t      case 5:\r\n\t        rgb = [v, p, q];\r\n\t        break;\r\n\t      default:\r\n\t        rgb = [0, 0, 0];\r\n\t    }\r\n\t    if (normalizedOutput) {\r\n\t      return rgb;\r\n\t    } else {\r\n\t      return [rgb[0] * 255, rgb[1] * 255, rgb[2] * 255];\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Color.RGBtoLAB = function(r, g, b, normalizedInput, normalizedOutput) {\r\n\t    var xyz;\r\n\t    if (normalizedInput) {\r\n\t      r *= 255;\r\n\t      g *= 255;\r\n\t      b *= 255;\r\n\t    }\r\n\t    xyz = Color.RGBtoXYZ(r, g, b);\r\n\t    return Color.XYZtoLAB(xyz[0], xyz[1], xyz[2]);\r\n\t  };\r\n\t\r\n\t  Color.LABtoRGB = function(L, a, b, normalizedInput, normalizedOutput) {\r\n\t    var rgb, xyz;\r\n\t    if (normalizedInput) {\r\n\t      L *= 100;\r\n\t      a = (a - 0.5) * 127;\r\n\t      b = (b - 0.5) * 127;\r\n\t    }\r\n\t    xyz = Color.LABtoXYZ(L, a, b);\r\n\t    rgb = Color.XYZtoRGB(xyz[0], xyz[1], xyz[2]);\r\n\t    if (normalizedOutput) {\r\n\t      return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255];\r\n\t    } else {\r\n\t      return rgb;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Color.RGBtoLCH = function(r, g, b, normalizedInput, normalizedOutput) {\r\n\t    var lab, lch;\r\n\t    if (normalizedInput) {\r\n\t      r *= 255;\r\n\t      g *= 255;\r\n\t      b *= 255;\r\n\t    }\r\n\t    lab = Color.RGBtoLAB(r, g, b);\r\n\t    lch = Color.LABtoLCH(lab[0], lab[1], lab[2]);\r\n\t    if (normalizedOutput) {\r\n\t      return [lch[0] / 100, lch[1] / 100, lch[2] / 360];\r\n\t    } else {\r\n\t      return lch;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Color.LCHtoRGB = function(L, c, h, normalizedInput, normalizedOutput) {\r\n\t    var lab, rgb, xyz;\r\n\t    if (normalizedInput) {\r\n\t      L *= 100;\r\n\t      c *= 100;\r\n\t      h *= 360;\r\n\t    }\r\n\t    lab = Color.LCHtoLAB(L, c, h);\r\n\t    xyz = Color.LABtoXYZ(lab[0], lab[1], lab[2]);\r\n\t    rgb = Color.XYZtoRGB(xyz[0], xyz[1], xyz[2]);\r\n\t    if (normalizedOutput) {\r\n\t      return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255];\r\n\t    } else {\r\n\t      return rgb;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Color.XYZtoRGB = function(x, y, z, normalizedInput, normalizedOutput) {\r\n\t    var aa, c, i, len1, rgb;\r\n\t    if (!normalizedInput) {\r\n\t      x = x / 100;\r\n\t      y = y / 100;\r\n\t      z = z / 100;\r\n\t    }\r\n\t    rgb = [x * 3.2404542 + y * -1.5371385 + z * -0.4985314, x * -0.9692660 + y * 1.8760108 + z * 0.0415560, x * 0.0556434 + y * -0.2040259 + z * 1.0572252];\r\n\t    for (i = aa = 0, len1 = rgb.length; aa < len1; i = ++aa) {\r\n\t      c = rgb[i];\r\n\t      if (c < 0) {\r\n\t        rgb[i] = 0;\r\n\t      } else {\r\n\t        rgb[i] = Math.min(1, c > 0.0031308 ? 1.055 * (Math.pow(c, 1 / 2.4)) - 0.055 : 12.92 * c);\r\n\t      }\r\n\t    }\r\n\t    if (normalizedOutput) {\r\n\t      return rgb;\r\n\t    } else {\r\n\t      return [Math.round(rgb[0] * 255), Math.round(rgb[1] * 255), Math.round(rgb[2] * 255)];\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Color.RGBtoXYZ = function(r, g, b, normalizedInput, normalizedOutput) {\r\n\t    if (!normalizedInput) {\r\n\t      r = r / 255;\r\n\t      g = g / 255;\r\n\t      b = b / 255;\r\n\t    }\r\n\t    r = r > 0.04045 ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92;\r\n\t    g = g > 0.04045 ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92;\r\n\t    b = b > 0.04045 ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;\r\n\t    if (!normalizedOutput) {\r\n\t      r = r * 100;\r\n\t      g = g * 100;\r\n\t      b = b * 100;\r\n\t    }\r\n\t    return [r * 0.4124564 + g * 0.3575761 + b * 0.1804375, r * 0.2126729 + g * 0.7151522 + b * 0.0721750, r * 0.0193339 + g * 0.1191920 + b * 0.9503041];\r\n\t  };\r\n\t\r\n\t  Color.XYZtoLAB = function(x, y, z) {\r\n\t    var calc, cy;\r\n\t    x = x / Color.XYZ.D65.x;\r\n\t    y = y / Color.XYZ.D65.y;\r\n\t    z = z / Color.XYZ.D65.z;\r\n\t    calc = function(n) {\r\n\t      if (n > 0.008856) {\r\n\t        return Math.pow(n, 1 / 3);\r\n\t      } else {\r\n\t        return (7.787 * n) + 16 / 116;\r\n\t      }\r\n\t    };\r\n\t    cy = calc(y);\r\n\t    return [(116 * cy) - 16, 500 * (calc(x) - cy), 200 * (cy - calc(z))];\r\n\t  };\r\n\t\r\n\t  Color.LABtoXYZ = function(L, a, b) {\r\n\t    var calc, x, xyz, y, z;\r\n\t    y = (L + 16) / 116;\r\n\t    x = a / 500 + y;\r\n\t    z = y - b / 200;\r\n\t    calc = function(n) {\r\n\t      var nnn;\r\n\t      nnn = Math.pow(n, 3);\r\n\t      if (nnn > 0.008856) {\r\n\t        return nnn;\r\n\t      } else {\r\n\t        return (n - 16 / 116) / 7.787;\r\n\t      }\r\n\t    };\r\n\t    xyz = [Math.min(Color.XYZ.D65.x, Color.XYZ.D65.x * calc(x)), Math.min(Color.XYZ.D65.y, Color.XYZ.D65.y * calc(y)), Math.min(Color.XYZ.D65.y, Color.XYZ.D65.z * calc(z))];\r\n\t    return xyz;\r\n\t  };\r\n\t\r\n\t  Color.XYZtoLUV = function(x, y, z) {\r\n\t    var L, refU, refV, u, v;\r\n\t    u = (4 * x) / (x + (15 * y) + (3 * z));\r\n\t    v = (9 * y) / (x + (15 * y) + (3 * z));\r\n\t    y = y / 100;\r\n\t    y = y > 0.008856 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116;\r\n\t    refU = (4 * Color.XYZ.D65.x) / (Color.XYZ.D65.x + (15 * Color.XYZ.D65.y) + (3 * Color.XYZ.D65.z));\r\n\t    refV = (9 * Color.XYZ.D65.y) / (Color.XYZ.D65.x + (15 * Color.XYZ.D65.y) + (3 * Color.XYZ.D65.z));\r\n\t    L = (116 * y) - 16;\r\n\t    return [L, 13 * L * (u - refU), 13 * L * (v - refV)];\r\n\t  };\r\n\t\r\n\t  Color.LUVtoXYZ = function(L, u, v) {\r\n\t    var cubeY, refU, refV, x, y;\r\n\t    y = (L + 16) / 116;\r\n\t    cubeY = y * y * y;\r\n\t    y = cubeY > 0.008856 ? cubeY : (y - 16 / 116) / 7.787;\r\n\t    refU = (4 * Color.XYZ.D65.x) / (Color.XYZ.D65.x + (15 * Color.XYZ.D65.y) + (3 * Color.XYZ.D65.z));\r\n\t    refV = (9 * Color.XYZ.D65.y) / (Color.XYZ.D65.x + (15 * Color.XYZ.D65.y) + (3 * Color.XYZ.D65.z));\r\n\t    u = u / (13 * L) + refU;\r\n\t    v = v / (13 * L) + refV;\r\n\t    y = y * 100;\r\n\t    x = -1 * (9 * y * u) / ((u - 4) * v - u * v);\r\n\t    return [x, y, (9 * y - (15 * v * y) - (v * x)) / (3 * v)];\r\n\t  };\r\n\t\r\n\t  Color.LABtoLCH = function(L, a, b) {\r\n\t    var h;\r\n\t    h = Math.atan2(b, a);\r\n\t    h = h > 0 ? 180 * h / Math.PI : 360 - (180 * Math.abs(h) / Math.PI);\r\n\t    return [L, Math.sqrt(a * a + b * b), h];\r\n\t  };\r\n\t\r\n\t  Color.LCHtoLAB = function(L, c, h) {\r\n\t    var radH;\r\n\t    radH = Math.PI * h / 180;\r\n\t    return [L, Math.cos(radH) * c, Math.sin(radH) * c];\r\n\t  };\r\n\t\r\n\t  Color.LUVtoLCH = function(L, u, v) {\r\n\t    return LABtoLCH(L, u, v);\r\n\t  };\r\n\t\r\n\t  Color.LCHtoLUV = function(L, c, h) {\r\n\t    return LCHtoLAB(L, c, h);\r\n\t  };\r\n\t\r\n\t  return Color;\r\n\t\r\n\t})(Vector);\r\n\t\r\n\tthis.Color = Color;\r\n\t\r\n\tCircle = (function(superClass) {\r\n\t  extend(Circle, superClass);\r\n\t\r\n\t  function Circle() {\r\n\t    Circle.__super__.constructor.apply(this, arguments);\r\n\t    this.radius = arguments[3] != null ? arguments[3] : 0;\r\n\t  }\r\n\t\r\n\t  Circle.prototype.setRadius = function(r) {\r\n\t    this.radius = r;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Circle.prototype.intersectPoint = function(args) {\r\n\t    var d, item;\r\n\t    item = new Vector(Point.get(arguments));\r\n\t    d = item.$subtract(this);\r\n\t    return d.x * d.x + d.y * d.y < this.radius * this.radius;\r\n\t  };\r\n\t\r\n\t  Circle.prototype.intersectPath = function(path, get_pts) {\r\n\t    var a, b, c, d, disc, discSqrt, f, p, p1, p2, q, t1, t2;\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    if (!path instanceof Pair) {\r\n\t      return false;\r\n\t    }\r\n\t    d = path.direction();\r\n\t    f = this.$subtract(path);\r\n\t    a = d.dot(d, Const.xy);\r\n\t    b = f.dot(d, Const.xy);\r\n\t    c = f.dot(f, Const.xy) - (this.radius * this.radius);\r\n\t    p = b / a;\r\n\t    q = c / a;\r\n\t    disc = p * p - q;\r\n\t    if (disc < 0) {\r\n\t      return (get_pts ? [] : false);\r\n\t    } else {\r\n\t      if (!get_pts) {\r\n\t        return true;\r\n\t      }\r\n\t      discSqrt = Math.sqrt(disc);\r\n\t      t1 = -p + discSqrt;\r\n\t      t2 = -p - discSqrt;\r\n\t      p1 = new Point(path.x - d.x * t1, path.y - d.y * t1);\r\n\t      p2 = new Point(path.x - d.x * t2, path.y - d.y * t2);\r\n\t      if (disc === 0) {\r\n\t        return [p1];\r\n\t      } else {\r\n\t        return [p1, p2];\r\n\t      }\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Circle.prototype.intersectLine = function(line, get_pts) {\r\n\t    var aa, bounds, len1, p, pi, pts;\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    pts = this.intersectPath(line);\r\n\t    if (pts && pts.length > 0) {\r\n\t      pi = [];\r\n\t      bounds = line.bounds();\r\n\t      for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n\t        p = pts[aa];\r\n\t        if (Rectangle.contain(p, bounds, bounds.p1)) {\r\n\t          if (!get_pts) {\r\n\t            return true;\r\n\t          }\r\n\t          pi.push(p);\r\n\t        }\r\n\t      }\r\n\t      return (get_pts ? pi : pi.length > 0);\r\n\t    } else {\r\n\t      return (get_pts ? [] : false);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Circle.prototype.intersectLines = function(lines, get_pts) {\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    return Line.intersectLines(this, lines, get_pts);\r\n\t  };\r\n\t\r\n\t  Circle.prototype.intersectCircle = function(circle, get_pts) {\r\n\t    var a, ca_r2, cb_r2, dr, dr2, dv, h, p;\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    dv = circle.$subtract(this);\r\n\t    dr2 = dv.magnitude(false);\r\n\t    dr = Math.sqrt(dr2);\r\n\t    ca_r2 = this.radius * this.radius;\r\n\t    cb_r2 = circle.radius * circle.radius;\r\n\t    if (dr > this.radius + circle.radius) {\r\n\t      return (get_pts ? [] : false);\r\n\t    } else if (dr < Math.abs(this.radius - circle.radius)) {\r\n\t      return (get_pts ? [new Vector(this), new Vector(circle)] : true);\r\n\t    } else {\r\n\t      if (!get_pts) {\r\n\t        return true;\r\n\t      }\r\n\t      a = (ca_r2 - cb_r2 + dr2) / (2 * dr);\r\n\t      h = Math.sqrt(ca_r2 - a * a);\r\n\t      p = dv.$multiply(a / dr).add(this);\r\n\t      return [new Vector(p.x + h * dv.y / dr, p.y - h * dv.x / dr), new Vector(p.x - h * dv.y / dr, p.y + h * dv.x / dr)];\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Circle.prototype.hasIntersect = function(item, get_pts) {\r\n\t    var d, ins;\r\n\t    if (get_pts == null) {\r\n\t      get_pts = false;\r\n\t    }\r\n\t    if (item instanceof Circle) {\r\n\t      return this.intersectCircle(item, get_pts);\r\n\t    } else if (item instanceof Rectangle || item instanceof PointSet || item instanceof Triangle) {\r\n\t      return this.intersectLines(item.sides(), get_pts);\r\n\t    } else if (item instanceof Pair) {\r\n\t      ins = this.intersectLine(item);\r\n\t      if (!get_pts) {\r\n\t        return ins.length > 0;\r\n\t      } else {\r\n\t        return ins;\r\n\t      }\r\n\t    } else if (item instanceof Point) {\r\n\t      d = item.$subtract(this);\r\n\t      return d.x * d.x + d.y * d.y < this.radius * this.radius;\r\n\t    } else {\r\n\t      if (get_pts) {\r\n\t        return [];\r\n\t      } else {\r\n\t        return false;\r\n\t      }\r\n\t    }\r\n\t  };\r\n\t\r\n\t  return Circle;\r\n\t\r\n\t})(Vector);\r\n\t\r\n\tthis.Circle = Circle;\r\n\t\r\n\tParticle = (function(superClass) {\r\n\t  extend(Particle, superClass);\r\n\t\r\n\t  function Particle() {\r\n\t    Particle.__super__.constructor.apply(this, arguments);\r\n\t    this.id = 0;\r\n\t    this.life = {\r\n\t      age: 0,\r\n\t      maxAge: 0,\r\n\t      active: true,\r\n\t      complete: false\r\n\t    };\r\n\t    this.momentum = new Vector();\r\n\t    this.velocity = new Vector();\r\n\t    this.mass = 2;\r\n\t    this.friction = 0;\r\n\t    this.frame_ms = 20;\r\n\t  }\r\n\t\r\n\t  Particle.prototype.play = function(time, timeDiff) {\r\n\t    var dt, results, t;\r\n\t    t = 0;\r\n\t    results = [];\r\n\t    while (timeDiff > 0) {\r\n\t      dt = Math.min(timeDiff, this.frame_ms);\r\n\t      this.integrate(t / 1000, dt / 1000);\r\n\t      timeDiff -= dt;\r\n\t      t += dt;\r\n\t      results.push(this.life.age++);\r\n\t    }\r\n\t    return results;\r\n\t  };\r\n\t\r\n\t  Particle.prototype.integrate = function(t, dt) {\r\n\t    return this.integrateRK4(t, dt);\r\n\t  };\r\n\t\r\n\t  Particle.prototype.forces = function(state, t) {\r\n\t    return {\r\n\t      force: new Vector()\r\n\t    };\r\n\t  };\r\n\t\r\n\t  Particle.prototype.impulse = function(force_dt) {\r\n\t    this.momentum.add(force_dt);\r\n\t    return this.velocity = this.momentum.$divide(this.mass);\r\n\t  };\r\n\t\r\n\t  Particle.prototype._evaluate = function(t, dt, derivative) {\r\n\t    var f, state;\r\n\t    if (dt == null) {\r\n\t      dt = 0;\r\n\t    }\r\n\t    if (derivative == null) {\r\n\t      derivative = false;\r\n\t    }\r\n\t    if (dt !== 0 && derivative) {\r\n\t      state = {\r\n\t        position: this.$add(derivative.velocity.$multiply(dt)),\r\n\t        momentum: this.momentum.$add(derivative.force.$multiply(dt))\r\n\t      };\r\n\t    } else {\r\n\t      state = {\r\n\t        position: new Vector(this),\r\n\t        momentum: new Vector(this.momentum)\r\n\t      };\r\n\t    }\r\n\t    state.velocity = state.momentum.$divide(this.mass);\r\n\t    f = this.forces(state, t + dt);\r\n\t    return {\r\n\t      velocity: state.velocity,\r\n\t      force: f.force\r\n\t    };\r\n\t  };\r\n\t\r\n\t  Particle.prototype.integrateRK4 = function(t, dt) {\r\n\t    var _map, a, b, c, d;\r\n\t    _map = function(m1, m2, m3, m4) {\r\n\t      var v;\r\n\t      v = new Vector((m1.x + 2 * (m2.x + m3.x) + m4.x) / 6, (m1.y + 2 * (m2.y + m3.y) + m4.y) / 6, (m1.z + 2 * (m2.z + m3.z) + m4.z) / 6);\r\n\t      return v;\r\n\t    };\r\n\t    a = this._evaluate(t, 0);\r\n\t    b = this._evaluate(t, dt * 0.5, a);\r\n\t    c = this._evaluate(t, dt * 0.5, b);\r\n\t    d = this._evaluate(t, dt, c);\r\n\t    this.add(_map(a.velocity, b.velocity, c.velocity, d.velocity));\r\n\t    return this.momentum.add(_map(a.force, b.force, c.force, d.force));\r\n\t  };\r\n\t\r\n\t  Particle.prototype.integrateEuler = function(t, dt) {\r\n\t    var f;\r\n\t    f = this.forces({\r\n\t      position: new Vector(this),\r\n\t      momentum: new Vector(this.momentum)\r\n\t    }, t + dt);\r\n\t    this.add(this.velocity);\r\n\t    this.momentum.add(f.force);\r\n\t    return this.velocity = this.momentum.$divide(this.mass);\r\n\t  };\r\n\t\r\n\t  Particle.prototype.collideLine2d = function(wall, precise) {\r\n\t    var collideEndPt, collided, crossed, curr_dist, curr_pos, dot, end_path, next_dist, next_pos, path, perpend, prev_pt_on_wall, proj, pt, pt2, pt_on_wall, pvec, r, tangent, wall_path;\r\n\t    if (precise == null) {\r\n\t      precise = true;\r\n\t    }\r\n\t    curr_pos = new Vector(this);\r\n\t    curr_dist = Math.abs(wall.getDistanceFromPoint(curr_pos));\r\n\t    collided = Math.abs(curr_dist) < this.radius;\r\n\t    if (precise) {\r\n\t      next_pos = this.$add(this.velocity);\r\n\t      next_dist = Math.abs(wall.getDistanceFromPoint(next_pos));\r\n\t      crossed = wall.intersectLine(new Line(curr_pos).to(next_pos));\r\n\t      if (crossed) {\r\n\t        next_pos = crossed.$add(this.velocity.$normalize().$multiply(-this.radius / 2));\r\n\t        next_dist = Math.abs(wall.getDistanceFromPoint(next_pos));\r\n\t        collided = true;\r\n\t      }\r\n\t    }\r\n\t    if (collided) {\r\n\t      pt_on_wall = wall.getPerpendicularFromPoint(curr_pos);\r\n\t      wall_path = wall.$subtract(wall.p1);\r\n\t      collideEndPt = false;\r\n\t      if (!wall.withinBounds(pt_on_wall, Const.xy)) {\r\n\t        if (this.intersectPoint(wall)) {\r\n\t          collideEndPt = true;\r\n\t          end_path = this.$subtract(wall);\r\n\t        }\r\n\t        if (this.intersectPoint(wall.p1)) {\r\n\t          collideEndPt = true;\r\n\t          end_path = this.$subtract(wall.p1);\r\n\t        }\r\n\t        if (collideEndPt) {\r\n\t          wall_path = new Vector(-end_path.y, end_path.x);\r\n\t        } else {\r\n\t          return false;\r\n\t        }\r\n\t      }\r\n\t      dot = wall_path.dot(this.velocity);\r\n\t      proj = wall_path.$multiply(dot / wall_path.dot(wall_path));\r\n\t      tangent = proj.$subtract(this.velocity);\r\n\t      this.velocity = proj.$add(tangent);\r\n\t      this.momentum = this.velocity.$multiply(this.mass);\r\n\t      if (precise && !collideEndPt) {\r\n\t        perpend = new Line(pt_on_wall).to(curr_pos);\r\n\t        prev_pt_on_wall = wall.getPerpendicularFromPoint(next_pos);\r\n\t        path = new Line(pt_on_wall).to(prev_pt_on_wall);\r\n\t        pvec = path.direction();\r\n\t        r = (this.radius - curr_dist) / (next_dist - curr_dist);\r\n\t        pt = pvec.$multiply(r).$add(path);\r\n\t        pt2 = pt.$add(perpend.direction().$normalize().$multiply(this.radius));\r\n\t        this.set(pt2.$add(this.velocity.$normalize()));\r\n\t      }\r\n\t    }\r\n\t    return collided;\r\n\t  };\r\n\t\r\n\t  Particle.prototype.collideWithinBounds = function(bound) {\r\n\t    if (this.x - this.radius < bound.x || this.x + this.radius > bound.p1.x) {\r\n\t      if (this.x - this.radius < bound.x) {\r\n\t        this.x = bound.x + this.radius;\r\n\t      } else if (this.x + this.radius > bound.p1.x) {\r\n\t        this.x = bound.p1.x - this.radius;\r\n\t      }\r\n\t      this.velocity.x *= -1;\r\n\t      this.momentum = this.velocity.$multiply(this.mass);\r\n\t      return true;\r\n\t    } else if (this.y - this.radius < bound.y || this.y + this.radius > bound.p1.y) {\r\n\t      if (this.y - this.radius < bound.y) {\r\n\t        this.y = bound.y + this.radius;\r\n\t      } else if (this.y + this.radius > bound.p1.y) {\r\n\t        this.y = bound.p1.y - this.radius;\r\n\t      }\r\n\t      this.velocity.y *= -1;\r\n\t      this.momentum = this.velocity.$multiply(this.mass);\r\n\t      return true;\r\n\t    }\r\n\t    return false;\r\n\t  };\r\n\t\r\n\t  Particle.prototype.collideParticle2d = function(pb) {\r\n\t    if (this.hasIntersect(pb)) {\r\n\t      return Particle.collideParticle2d(this, pb, true);\r\n\t    } else {\r\n\t      return false;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Particle.collideParticle2d = function(pa, pb, update, checkOverlap) {\r\n\t    var d1, d2, dir, dot1n, dot1t, dot2n, dot2t, mag, magDiff, normal, pav, pbv, tangent, v1n, v1t, v2n, v2t;\r\n\t    if (update == null) {\r\n\t      update = true;\r\n\t    }\r\n\t    if (checkOverlap == null) {\r\n\t      checkOverlap = true;\r\n\t    }\r\n\t    normal = pa.$subtract(pb).normalize();\r\n\t    tangent = new Vector(-normal.y, normal.x);\r\n\t    dot1n = normal.dot(pa.velocity);\r\n\t    dot1t = tangent.dot(pa.velocity);\r\n\t    dot2n = normal.dot(pb.velocity);\r\n\t    dot2t = tangent.dot(pb.velocity);\r\n\t    d1 = (dot1n * (pa.mass - pb.mass) + 2 * pb.mass * dot2n) / (pa.mass + pb.mass);\r\n\t    d2 = (dot2n * (pb.mass - pa.mass) + 2 * pa.mass * dot1n) / (pa.mass + pb.mass);\r\n\t    v1n = normal.$multiply(d1);\r\n\t    v1t = tangent.$multiply(dot1t);\r\n\t    v2n = normal.$multiply(d2);\r\n\t    v2t = tangent.$multiply(dot2t);\r\n\t    pav = v1n.$add(v1t);\r\n\t    pbv = v2n.$add(v2t);\r\n\t    if (checkOverlap) {\r\n\t      mag = pa.magnitude(pb);\r\n\t      if (mag < pa.radius + pb.radius) {\r\n\t        dir = pa.$subtract(pb).normalize();\r\n\t        magDiff = Math.abs(mag - pa.radius - pb.radius) / 1.98;\r\n\t        pa.add(dir.multiply(magDiff));\r\n\t        pb.add(dir.multiply(-magDiff));\r\n\t      }\r\n\t    }\r\n\t    if (update) {\r\n\t      pa.velocity = pav;\r\n\t      pb.velocity = pbv;\r\n\t      pa.momentum = pa.velocity.$multiply(pa.mass);\r\n\t      pb.momentum = pb.velocity.$multiply(pb.mass);\r\n\t    }\r\n\t    return [pav, pbv];\r\n\t  };\r\n\t\r\n\t  Particle.force_gravitation = function(state, t, pa, pb, g) {\r\n\t    var d, force, mag, meterToPixel;\r\n\t    if (g == null) {\r\n\t      g = 0.0067;\r\n\t    }\r\n\t    meterToPixel = 30;\r\n\t    d = pb.$subtract(state.position);\r\n\t    mag = d.magnitude() / meterToPixel;\r\n\t    force = mag === 0 ? 0 : t * g * pa.mass * pb.mass / (mag * mag);\r\n\t    d.normalize().multiply(force);\r\n\t    return {\r\n\t      force: d\r\n\t    };\r\n\t  };\r\n\t\r\n\t  Particle.RK4 = function(c, d, func, dt, t) {\r\n\t    var a1, a2, a3, c1, c2, c3, c4, d1, d2, d3, d4, dc, dd;\r\n\t    c1 = c;\r\n\t    d1 = d;\r\n\t    a1 = func(c1, d1, 0, t);\r\n\t    c2 = c + 0.5 * d1 * dt;\r\n\t    d2 = d + 0.5 * a1 * dt;\r\n\t    a2 = func(c2, d2, dt / 2, t);\r\n\t    c3 = c + 0.5 * d2 * dt;\r\n\t    d3 = d + 0.5 * a2 * dt;\r\n\t    a3 = func(c3, d3, dt / 2, t);\r\n\t    c4 = c + d3 * dt;\r\n\t    d4 = d + a3 * dt;\r\n\t    dc = (c1 + 2 * (c2 + c3) + c4) / 6;\r\n\t    dd = (d1 + 2 * (d2 + d3) + d4) / 6;\r\n\t    return {\r\n\t      c: c + dc * dt,\r\n\t      d: d + dd * dt\r\n\t    };\r\n\t  };\r\n\t\r\n\t  return Particle;\r\n\t\r\n\t})(Circle);\r\n\t\r\n\tthis.Particle = Particle;\r\n\t\r\n\tParticleSystem = (function() {\r\n\t  function ParticleSystem() {\r\n\t    this.count = 0;\r\n\t    this.particles = [];\r\n\t    this.time = 0;\r\n\t  }\r\n\t\r\n\t  ParticleSystem.prototype.add = function(particle) {\r\n\t    particle.id = this.count++;\r\n\t    this.particles.push(particle);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  ParticleSystem.prototype.remove = function(particle) {\r\n\t    if (particle && particle.life) {\r\n\t      particle.life.complete = true;\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  ParticleSystem.prototype.animate = function(time, frame, ctx) {\r\n\t    var _remove, aa, ab, i, index, len1, len2, p, ref, results;\r\n\t    this.time++;\r\n\t    _remove = [];\r\n\t    ref = this.particles;\r\n\t    for (i = aa = 0, len1 = ref.length; aa < len1; i = ++aa) {\r\n\t      p = ref[i];\r\n\t      if (p.life.complete) {\r\n\t        _remove.push(i);\r\n\t      } else if (p.life.active) {\r\n\t        p.animate(time, frame, ctx);\r\n\t      }\r\n\t    }\r\n\t    if (_remove.length > 0) {\r\n\t      results = [];\r\n\t      for (ab = 0, len2 = _remove.length; ab < len2; ab++) {\r\n\t        index = _remove[ab];\r\n\t        results.push(this.particles.splice(index, 1));\r\n\t      }\r\n\t      return results;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  return ParticleSystem;\r\n\t\r\n\t})();\r\n\t\r\n\tthis.ParticleSystem = ParticleSystem;\r\n\t\r\n\tPair = (function(superClass) {\r\n\t  extend(Pair, superClass);\r\n\t\r\n\t  function Pair() {\r\n\t    Pair.__super__.constructor.apply(this, arguments);\r\n\t    this.p1 = new Vector(this.x, this.y, this.z);\r\n\t    if (arguments.length === 4) {\r\n\t      this.z = 0;\r\n\t      this.p1.set(arguments[2], arguments[3]);\r\n\t    } else if (arguments.length === 6) {\r\n\t      this.p1.set(arguments[3], arguments[4], arguments[5]);\r\n\t    }\r\n\t  }\r\n\t\r\n\t  Pair.prototype.to = function() {\r\n\t    this.p1 = new Vector(Point.get(arguments));\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Pair.prototype.getAt = function(index) {\r\n\t    if (index === 1 || index === \"p1\") {\r\n\t      return this.p1;\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Pair.prototype.$getAt = function(index) {\r\n\t    return new Vector(this.getAt(index));\r\n\t  };\r\n\t\r\n\t  Pair.prototype.relative = function() {\r\n\t    this.p1.add(this);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Pair.prototype.$relative = function() {\r\n\t    return this.$add(this.p1);\r\n\t  };\r\n\t\r\n\t  Pair.prototype.bounds = function() {\r\n\t    return new Pair(this.$min(this.p1)).to(this.$max(this.p1));\r\n\t  };\r\n\t\r\n\t  Pair.prototype.withinBounds = function(pt, axis) {\r\n\t    var a, b;\r\n\t    if (axis) {\r\n\t      a = this.get2D(axis);\r\n\t      b = this.p1.get2D(axis);\r\n\t      if (a.x === b.x) {\r\n\t        return pt.y >= Math.min(a.y, b.y) && pt.y <= Math.max(a.y, b.y);\r\n\t      } else if (a.y === b.y) {\r\n\t        return pt.x >= Math.min(a.x, b.x) && pt.x <= Math.max(a.x, b.x);\r\n\t      } else {\r\n\t        return pt.x >= Math.min(a.x, b.x) && pt.y >= Math.min(a.y, b.y) && pt.x <= Math.max(a.x, b.x) && pt.y <= Math.max(a.y, b.y);\r\n\t      }\r\n\t    } else {\r\n\t      return pt.x >= Math.min(this.x, this.p1.x) && pt.y >= Math.min(this.y, this.p1.y) && pt.z >= Math.min(this.z, this.p1.z) && pt.x <= Math.max(this.x, this.p1.x) && pt.y <= Math.max(this.y, this.p1.y) && pt.z <= Math.max(this.z, this.p1.z);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Pair.prototype.interpolate = function(t, relative) {\r\n\t    var p2;\r\n\t    if (relative == null) {\r\n\t      relative = false;\r\n\t    }\r\n\t    p2 = relative ? this.$relative() : this.p1;\r\n\t    return new Vector((1 - t) * this.x + t * p2.x, (1 - t) * this.y + t * p2.y, (1 - t) * this.z + t * p2.z);\r\n\t  };\r\n\t\r\n\t  Pair.prototype.midpoint = function() {\r\n\t    return this.interpolate(0.5);\r\n\t  };\r\n\t\r\n\t  Pair.prototype.direction = function(reverse) {\r\n\t    if (reverse) {\r\n\t      return this.$subtract(this.p1);\r\n\t    } else {\r\n\t      return this.p1.$subtract(this);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Pair.prototype.size = function() {\r\n\t    if (arguments.length > 0) {\r\n\t      this.p1 = this.$add(Point.get(arguments));\r\n\t      return this;\r\n\t    } else {\r\n\t      return this.p1.$subtract(this).abs();\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Pair.prototype.length = function(sqrt) {\r\n\t    var d, dx, dy, dz;\r\n\t    if (sqrt == null) {\r\n\t      sqrt = true;\r\n\t    }\r\n\t    dz = this.z - this.p1.z;\r\n\t    dy = this.y - this.p1.y;\r\n\t    dx = this.x - this.p1.x;\r\n\t    d = dx * dx + dy * dy + dz * dz;\r\n\t    if (sqrt) {\r\n\t      return Math.sqrt(d);\r\n\t    } else {\r\n\t      return d;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Pair.prototype.collinear = function(point) {\r\n\t    return (this.p1.x - this.x) * (point.y - this.y) - (point.x - this.x) * (this.p1.y - this.y);\r\n\t  };\r\n\t\r\n\t  Pair.prototype.resetBounds = function() {\r\n\t    var temp;\r\n\t    temp = this.$min(this.p1);\r\n\t    this.p1.set(this.$max(this.p1));\r\n\t    this.set(temp);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Pair.prototype.equal = function(epsilon) {\r\n\t    if (epsilon == null) {\r\n\t      epsilon = false;\r\n\t    }\r\n\t    if (arguments[0] instanceof Pair) {\r\n\t      return Pair.__super__.equal.call(this, arguments[0]) && this.p1.equal(arguments[0].p1);\r\n\t    } else {\r\n\t      return Pair.__super__.equal.apply(this, arguments);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Pair.prototype.clone = function() {\r\n\t    var p;\r\n\t    p = new Pair(this);\r\n\t    p.to(this.p1.clone());\r\n\t    return p;\r\n\t  };\r\n\t\r\n\t  Pair.prototype.floor = function() {\r\n\t    Pair.__super__.floor.apply(this, arguments);\r\n\t    return this.p1.floor();\r\n\t  };\r\n\t\r\n\t  Pair.prototype.toString = function() {\r\n\t    return \"Pair of vectors from (\" + this.x + \", \" + this.y + \", \" + this.z + \") to (\" + this.p1.x + \", \" + this.p1.y + \", \" + this.p1.z + \")\";\r\n\t  };\r\n\t\r\n\t  Pair.prototype.toArray = function() {\r\n\t    return [this, this.p1];\r\n\t  };\r\n\t\r\n\t  return Pair;\r\n\t\r\n\t})(Vector);\r\n\t\r\n\tthis.Pair = Pair;\r\n\t\r\n\tLine = (function(superClass) {\r\n\t  extend(Line, superClass);\r\n\t\r\n\t  function Line() {\r\n\t    Line.__super__.constructor.apply(this, arguments);\r\n\t  }\r\n\t\r\n\t  Line.slope = function(a, b, axis) {\r\n\t    var p1, p2;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    p1 = a.get2D(axis);\r\n\t    p2 = b.get2D(axis);\r\n\t    if (p2.x - p1.x === 0) {\r\n\t      return false;\r\n\t    } else {\r\n\t      return (p2.y - p1.y) / (p2.x - p1.x);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Line.intercept = function(a, b, axis) {\r\n\t    var c, m, p1, p2;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    p1 = a.get2D(axis);\r\n\t    p2 = b.get2D(axis);\r\n\t    if (p2.x - p1.x === 0) {\r\n\t      return false;\r\n\t    } else {\r\n\t      m = (p2.y - p1.y) / (p2.x - p1.x);\r\n\t      c = p1.y - m * p1.x;\r\n\t      return {\r\n\t        slope: m,\r\n\t        yi: c,\r\n\t        xi: m === 0 ? false : -c / m\r\n\t      };\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Line.isPerpendicularLine = function(line1, line2, axis) {\r\n\t    var s1, s2;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    s1 = Line.slope(line1, line1.p1, axis);\r\n\t    s2 = Line.slope(line2, line2.p1, axis);\r\n\t    if (s1 === false) {\r\n\t      return s2 === 0;\r\n\t    } else if (s2 === false) {\r\n\t      return s1 === 0;\r\n\t    } else {\r\n\t      return s1 * s2 === -1;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Line.prototype.slope = function(axis) {\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    return Line.slope(this, this.p1, axis);\r\n\t  };\r\n\t\r\n\t  Line.prototype.intercept = function(axis) {\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    return Line.intercept(this, this.p1, axis);\r\n\t  };\r\n\t\r\n\t  Line.prototype.getPerpendicular = function(t, len, reverse, axis) {\r\n\t    var line, pn, pp;\r\n\t    if (len == null) {\r\n\t      len = 10;\r\n\t    }\r\n\t    if (reverse == null) {\r\n\t      reverse = false;\r\n\t    }\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    pn = this.direction().normalize().perpendicular(axis);\r\n\t    pp = reverse ? pn[1] : pn[0];\r\n\t    line = new Line(this.interpolate(t));\r\n\t    line.to(pp.multiply(len).add(line));\r\n\t    return line;\r\n\t  };\r\n\t\r\n\t  Line.prototype.getDistanceFromPoint = function(pt) {\r\n\t    var normal, path;\r\n\t    path = this.$subtract(this.p1);\r\n\t    normal = new Vector(-path.y, path.x).normalize();\r\n\t    return this.$subtract(pt).dot(normal);\r\n\t  };\r\n\t\r\n\t  Line.prototype.getPerpendicularFromPoint = function(pt, fromProjection) {\r\n\t    var proj;\r\n\t    if (fromProjection == null) {\r\n\t      fromProjection = true;\r\n\t    }\r\n\t    proj = this.p1.$subtract(this).projection(pt.$subtract(this));\r\n\t    if (!fromProjection) {\r\n\t      return proj;\r\n\t    } else {\r\n\t      return proj.add(this);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Line.prototype.intersectPath = function(line, axis) {\r\n\t    var a, b, ln, p, px, py, y1;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    a = this.intercept(axis);\r\n\t    b = line.intercept(axis);\r\n\t    p = this.get2D(axis);\r\n\t    ln = line.get2D(axis);\r\n\t    if (a === false) {\r\n\t      if (b === false) {\r\n\t        return false;\r\n\t      }\r\n\t      y1 = -b.slope * (ln.x - p.x) + ln.y;\r\n\t      if (axis === Const.xy) {\r\n\t        return new Vector(p.x, y1);\r\n\t      } else {\r\n\t        return new Vector(p.x, y1).get2D(axis, true);\r\n\t      }\r\n\t    } else {\r\n\t      if (b === false) {\r\n\t        y1 = -a.slope * (p.x - ln.x) + p.y;\r\n\t        return new Vector(ln.x, y1);\r\n\t      } else if (b.slope !== a.slope) {\r\n\t        px = (a.slope * p.x - b.slope * ln.x + ln.y - p.y) / (a.slope - b.slope);\r\n\t        py = a.slope * (px - p.x) + p.y;\r\n\t        if (axis === Const.xy) {\r\n\t          return new Vector(px, py);\r\n\t        } else {\r\n\t          return new Vector(px, py).get2D(axis, true);\r\n\t        }\r\n\t      } else {\r\n\t        if (a.yi === b.yi) {\r\n\t          return null;\r\n\t        } else {\r\n\t          return false;\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Line.prototype.intersectLine = function(line, axis) {\r\n\t    var pt;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    pt = this.intersectPath(line, axis);\r\n\t    if (pt && this.withinBounds(pt, axis) && line.withinBounds(pt, axis)) {\r\n\t      return pt;\r\n\t    } else {\r\n\t      if (pt === null) {\r\n\t        return null;\r\n\t      } else {\r\n\t        return false;\r\n\t      }\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Line.intersectLines = function(elem, lines, get_pts) {\r\n\t    var aa, i, ins, len1, ln, p, pts;\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    if (!elem.intersectLine) {\r\n\t      throw \"No intersectLine function found in \" + elem.toString();\r\n\t    }\r\n\t    pts = [];\r\n\t    for (i in lines) {\r\n\t      ln = lines[i];\r\n\t      ins = elem.intersectLine(ln, get_pts);\r\n\t      if (ins) {\r\n\t        if (!get_pts) {\r\n\t          return true;\r\n\t        }\r\n\t        if (ins.length > 0) {\r\n\t          for (aa = 0, len1 = ins.length; aa < len1; aa++) {\r\n\t            p = ins[aa];\r\n\t            pts.push(p);\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    if (get_pts) {\r\n\t      return pts;\r\n\t    } else {\r\n\t      return false;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Line.prototype.intersectGridLine = function(line, path_only, axis) {\r\n\t    var a1, a2, b1, b2;\r\n\t    if (path_only == null) {\r\n\t      path_only = false;\r\n\t    }\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    a1 = this.get2D(axis);\r\n\t    a2 = this.p1.get2D(axis);\r\n\t    b1 = line.get2D(axis);\r\n\t    b2 = line.p1.get2D(axis);\r\n\t    if (a2.x - a1.x === 0) {\r\n\t      if (b2.y - b1.y === 0 && Util.within(a1.x, b1.x, b2.x)) {\r\n\t        if (path_only || Util.within(b1.y, a1.y, a2.y)) {\r\n\t          return new Vector(a1.x, b1.y);\r\n\t        }\r\n\t      }\r\n\t    } else if (a2.y - a1.y === 0) {\r\n\t      if (b2.x - b1.x === 0 && Util.within(a1.y, b1.y, b2.y)) {\r\n\t        if (path_only || Util.within(b1.x, a1.x, a2.x)) {\r\n\t          return new Vector(b1.x, a1.y);\r\n\t        }\r\n\t      }\r\n\t    } else {\r\n\t      return false;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Line.prototype.subpoints = function(num) {\r\n\t    var aa, ref, results, t;\r\n\t    results = [];\r\n\t    for (t = aa = 0, ref = num; 0 <= ref ? aa <= ref : aa >= ref; t = 0 <= ref ? ++aa : --aa) {\r\n\t      results.push(this.interpolate(t / num));\r\n\t    }\r\n\t    return results;\r\n\t  };\r\n\t\r\n\t  Line.prototype.clone = function(deep) {\r\n\t    return new Line(this).to(this.p1);\r\n\t  };\r\n\t\r\n\t  return Line;\r\n\t\r\n\t})(Pair);\r\n\t\r\n\tthis.Line = Line;\r\n\t\r\n\tRectangle = (function(superClass) {\r\n\t  extend(Rectangle, superClass);\r\n\t\r\n\t  function Rectangle() {\r\n\t    Rectangle.__super__.constructor.apply(this, arguments);\r\n\t    this.center = new Vector();\r\n\t  }\r\n\t\r\n\t  Rectangle.contain = function(pt, ptl, pbr) {\r\n\t    return pt.x >= ptl.x && pt.x <= pbr.x && pt.y >= ptl.y && pt.y <= pbr.y && pt.z >= ptl.z && pt.z <= pbr.z;\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.toString = function() {\r\n\t    var s;\r\n\t    s = this.size();\r\n\t    return \"Rectangle x1 \" + this.x + \", y1 \" + this.y + \", z1 \" + this.z + \", x2 \" + this.p1.x + \", y2 \" + this.p1.y + \", z2 \" + this.p1.z + \", width \" + s.x + \", height \" + s.y;\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.toPointSet = function() {\r\n\t    var c;\r\n\t    c = this.corners();\r\n\t    return new PointSet(this).to([c.topRight, c.bottomRight, c.bottomLeft, c.topLeft]);\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.to = function(args) {\r\n\t    this.p1 = new Vector(Point.get(arguments));\r\n\t    this.resetBounds();\r\n\t    this.center = this.midpoint();\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.setCenter = function(args) {\r\n\t    var halfsize;\r\n\t    if (arguments.length === 0) {\r\n\t      this.center = this.midpoint();\r\n\t      return;\r\n\t    }\r\n\t    halfsize = this.size().$divide(2);\r\n\t    this.center.set(Point.get(arguments));\r\n\t    this.set(this.center.$subtract(halfsize));\r\n\t    this.p1.set(this.center.$add(halfsize));\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.resizeTo = function() {\r\n\t    this.p1 = new Vector(Point.get(arguments));\r\n\t    this.relative();\r\n\t    this.center = this.midpoint();\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.resizeCenterTo = function() {\r\n\t    var size;\r\n\t    size = new Vector(Point.get(arguments)).divide(2);\r\n\t    this.set(this.center.$subtract(size));\r\n\t    this.p1.set(this.center.$add(size));\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.enclose = function(rect) {\r\n\t    this.set(this.$min(rect));\r\n\t    this.p1.set(this.p1.$max(rect.p1));\r\n\t    this.center = this.midpoint();\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.$enclose = function(rect) {\r\n\t    return this.clone().enclose(rect);\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.isEnclosed = function(rect) {\r\n\t    var d, d2;\r\n\t    d = this.$subtract(rect).multiply(this.p1.$subtract(rect.p1));\r\n\t    d2 = this.size().subtract(rect.size());\r\n\t    return d.x <= 0 && d.y <= 0 && d.z <= 0 && (d2.x * d2.y >= 0);\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.isLarger = function(rect) {\r\n\t    var s1, s2;\r\n\t    s1 = this.size();\r\n\t    s2 = rect.size();\r\n\t    return s1.x * s1.y > s2.x * s2.y;\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.intersectPoint = function() {\r\n\t    var pt;\r\n\t    pt = Point.get(arguments);\r\n\t    return pt.x >= this.x && pt.x <= this.p1.x && pt.y >= this.y && pt.y <= this.p1.y && pt.z >= this.z && pt.z <= this.p1.z;\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.intersectPath = function(line, get_pts) {\r\n\t    var aa, len1, p, pts, s, sides;\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    sides = this.sides();\r\n\t    pts = [];\r\n\t    for (aa = 0, len1 = sides.length; aa < len1; aa++) {\r\n\t      s = sides[aa];\r\n\t      p = s.intersectPath(line);\r\n\t      if (p && this.intersectPoint(p)) {\r\n\t        if (get_pts) {\r\n\t          pts.push(p);\r\n\t        } else {\r\n\t          return true;\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    if (get_pts) {\r\n\t      return pts;\r\n\t    } else {\r\n\t      return false;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.intersectLine = function(line, get_pts) {\r\n\t    var aa, ip1, ip2, lbound, len1, p, pts, s, sides;\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    ip1 = this.intersectPoint(line);\r\n\t    ip2 = this.intersectPoint(line.p1);\r\n\t    if (ip1 && ip2) {\r\n\t      if (get_pts) {\r\n\t        return [];\r\n\t      }\r\n\t    } else {\r\n\t      true;\r\n\t    }\r\n\t    if (!(ip1 || ip2)) {\r\n\t      lbound = line.bounds();\r\n\t      if (!this.intersectRectangle(lbound, false)) {\r\n\t        if (get_pts) {\r\n\t          return [];\r\n\t        } else {\r\n\t          return false;\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    sides = this.sides();\r\n\t    pts = [];\r\n\t    for (aa = 0, len1 = sides.length; aa < len1; aa++) {\r\n\t      s = sides[aa];\r\n\t      p = line.intersectLine(s);\r\n\t      if (p) {\r\n\t        if (get_pts) {\r\n\t          pts.push(p);\r\n\t        } else {\r\n\t          return true;\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    if (get_pts) {\r\n\t      return pts;\r\n\t    } else {\r\n\t      return false;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.intersectLines = function(lines, get_pts) {\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    return Line.intersectLines(this, lines, get_pts);\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.intersectRectangle = function(rect, get_pts) {\r\n\t    var aa, ab, intersected, len1, len2, p, pts, sa, sb, sidesA, sidesB, xi, yi, zi;\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    xi = (this.p1.x >= rect.x) && (this.x <= rect.p1.x);\r\n\t    yi = (this.p1.y >= rect.y) && (this.y <= rect.p1.y);\r\n\t    zi = (this.p1.z >= rect.z) && (this.z <= rect.p1.z);\r\n\t    intersected = xi && yi && zi;\r\n\t    if (!get_pts) {\r\n\t      return intersected;\r\n\t    }\r\n\t    if (this.isEnclosed(rect)) {\r\n\t      return (get_pts ? [] : true);\r\n\t    }\r\n\t    if (!intersected) {\r\n\t      return [];\r\n\t    }\r\n\t    sidesA = this.sides();\r\n\t    sidesB = rect.sides();\r\n\t    pts = [];\r\n\t    for (aa = 0, len1 = sidesA.length; aa < len1; aa++) {\r\n\t      sa = sidesA[aa];\r\n\t      for (ab = 0, len2 = sidesB.length; ab < len2; ab++) {\r\n\t        sb = sidesB[ab];\r\n\t        p = sa.intersectGridLine(sb);\r\n\t        if (p) {\r\n\t          pts.push(p);\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return pts;\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.hasIntersect = function(item, get_pts) {\r\n\t    if (get_pts == null) {\r\n\t      get_pts = false;\r\n\t    }\r\n\t    if (item instanceof Circle) {\r\n\t      return item.intersectLines(this.sides(), get_pts);\r\n\t    } else if (item instanceof Rectangle) {\r\n\t      return this.intersectRectangle(item, get_pts);\r\n\t    } else if (item instanceof PointSet || item instanceof Triangle) {\r\n\t      return this.intersectLines(item.sides(), get_pts);\r\n\t    } else if (item instanceof Pair) {\r\n\t      return this.intersectLine(item, get_pts);\r\n\t    } else if (item instanceof Point) {\r\n\t      return Rectangle.contain(item, this, this.p1);\r\n\t    } else {\r\n\t      if (get_pts) {\r\n\t        return [];\r\n\t      } else {\r\n\t        return false;\r\n\t      }\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.corners = function() {\r\n\t    return {\r\n\t      topLeft: new Vector(Math.min(this.x, this.p1.x), Math.min(this.y, this.p1.y), Math.max(this.z, this.p1.z)),\r\n\t      topRight: new Vector(Math.max(this.x, this.p1.x), Math.min(this.y, this.p1.y), Math.min(this.z, this.p1.z)),\r\n\t      bottomLeft: new Vector(Math.min(this.x, this.p1.x), Math.max(this.y, this.p1.y), Math.max(this.z, this.p1.z)),\r\n\t      bottomRight: new Vector(Math.max(this.x, this.p1.x), Math.max(this.y, this.p1.y), Math.min(this.z, this.p1.z))\r\n\t    };\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.sides = function() {\r\n\t    var c;\r\n\t    c = this.corners();\r\n\t    return [new Line(c.topLeft).to(c.topRight), new Line(c.topRight).to(c.bottomRight), new Line(c.bottomRight).to(c.bottomLeft), new Line(c.bottomLeft).to(c.topLeft)];\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.quadrants = function() {\r\n\t    var c;\r\n\t    c = this.corners();\r\n\t    return {\r\n\t      topLeft: new this.__proto__.constructor(c.topLeft).to(this.center),\r\n\t      topRight: new this.__proto__.constructor(c.topRight).to(this.center),\r\n\t      bottomLeft: new this.__proto__.constructor(c.bottomLeft).to(this.center),\r\n\t      bottomRight: new this.__proto__.constructor(c.bottomRight).to(this.center)\r\n\t    };\r\n\t  };\r\n\t\r\n\t  Rectangle.prototype.clone = function() {\r\n\t    var p;\r\n\t    p = new Rectangle(this).to(this.p1);\r\n\t    p.to(this.p1.clone());\r\n\t    return p;\r\n\t  };\r\n\t\r\n\t  return Rectangle;\r\n\t\r\n\t})(Pair);\r\n\t\r\n\tthis.Rectangle = Rectangle;\r\n\t\r\n\tGrid = (function(superClass) {\r\n\t  extend(Grid, superClass);\r\n\t\r\n\t  function Grid() {\r\n\t    Grid.__super__.constructor.apply(this, arguments);\r\n\t    this.cell = {\r\n\t      type: 'fix-fix',\r\n\t      size: new Vector()\r\n\t    };\r\n\t    this.rows = 0;\r\n\t    this.columns = 0;\r\n\t    this.layout = [];\r\n\t    this.cellCallback = null;\r\n\t  }\r\n\t\r\n\t  Grid.prototype.toString = function() {\r\n\t    var s;\r\n\t    s = this.size();\r\n\t    return (\"Grid width \" + s.x + \", height \" + s.y + \", columns \" + this.columns + \", rows \" + this.rows + \", \") + (\"cell (\" + this.cell.size.x + \", \" + this.cell.size.y + \"), type \" + this.cell.type);\r\n\t  };\r\n\t\r\n\t  Grid.prototype.init = function(x, y, xtype, ytype) {\r\n\t    var size;\r\n\t    if (xtype == null) {\r\n\t      xtype = 'fix';\r\n\t    }\r\n\t    if (ytype == null) {\r\n\t      ytype = 'fix';\r\n\t    }\r\n\t    size = this.size();\r\n\t    this.cell.type = xtype + '-' + ytype;\r\n\t    this.rows = y;\r\n\t    this.columns = x;\r\n\t    if (xtype === 'stretch') {\r\n\t      this.cell.size.x = size.x / x;\r\n\t      this.columns = x;\r\n\t    } else if (xtype === 'flex') {\r\n\t      this.columns = Math.round(size.x / x);\r\n\t      this.cell.size.x = size.x / this.columns;\r\n\t    } else {\r\n\t      this.cell.size.x = x;\r\n\t      this.columns = Math.floor(size.x / this.cell.size.x);\r\n\t    }\r\n\t    if (ytype === 'stretch') {\r\n\t      this.cell.size.y = size.y / y;\r\n\t      this.rows = y;\r\n\t    } else if (ytype === 'flex') {\r\n\t      this.rows = Math.round(size.y / y);\r\n\t      this.cell.size.y = size.y / this.rows;\r\n\t    } else {\r\n\t      this.cell.size.y = y;\r\n\t      this.rows = Math.floor(size.y / this.cell.size.y);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Grid.prototype.generate = function(callback) {\r\n\t    if (typeof callback === \"function\") {\r\n\t      this.cellCallback = callback;\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Grid.prototype.create = function() {\r\n\t    var aa, ab, c, cell, isOccupied, pos, r, ref, ref1;\r\n\t    if (!this.cellCallback) {\r\n\t      return this;\r\n\t    }\r\n\t    for (c = aa = 0, ref = this.columns; 0 <= ref ? aa < ref : aa > ref; c = 0 <= ref ? ++aa : --aa) {\r\n\t      for (r = ab = 0, ref1 = this.rows; 0 <= ref1 ? ab < ref1 : ab > ref1; r = 0 <= ref1 ? ++ab : --ab) {\r\n\t        cell = this.cell.size.clone();\r\n\t        pos = this.$add(cell.$multiply(c, r));\r\n\t        isOccupied = this.layout.length > 0 && this.layout[0].length > 0 ? this.layout[r][c] === 1 : false;\r\n\t        this.cellCallback(cell, pos, r, c, this.cell.type, isOccupied);\r\n\t      }\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Grid.prototype.getCellSize = function() {\r\n\t    return this.cell.size.clone();\r\n\t  };\r\n\t\r\n\t  Grid.prototype.cellToRectangle = function(c, r, allowOutofBound) {\r\n\t    var rect;\r\n\t    if (allowOutofBound == null) {\r\n\t      allowOutofBound = false;\r\n\t    }\r\n\t    if (allowOutofBound || (c >= 0 && c < this.columns && r >= 0 && r < this.rows)) {\r\n\t      rect = new Rectangle(this.$add(this.cell.size.$multiply(c, r))).resizeTo(this.cell.size);\r\n\t      return rect;\r\n\t    } else {\r\n\t      return false;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Grid.prototype.positionToCell = function(args) {\r\n\t    var cellpos, pos;\r\n\t    pos = new Vector(this._getArgs(arguments));\r\n\t    cellpos = pos.$subtract(this).$divide(this.cell.size).floor();\r\n\t    cellpos.max(0, 0).min(this.columns - 1, this.rows - 1);\r\n\t    return cellpos;\r\n\t  };\r\n\t\r\n\t  Grid.prototype.resetLayout = function(callback) {\r\n\t    var aa, ab, c, r, ref, ref1;\r\n\t    this.layout = [];\r\n\t    for (r = aa = 0, ref = this.rows; 0 <= ref ? aa < ref : aa > ref; r = 0 <= ref ? ++aa : --aa) {\r\n\t      this.layout[r] = [];\r\n\t      for (c = ab = 0, ref1 = this.columns; 0 <= ref1 ? ab < ref1 : ab > ref1; c = 0 <= ref1 ? ++ab : --ab) {\r\n\t        this.layout[r][c] = 0;\r\n\t        if (callback) {\r\n\t          callback(this, r, c);\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Grid.prototype.occupy = function(x, y, w, h, occupy) {\r\n\t    var aa, ab, c, r, ref, ref1;\r\n\t    if (occupy == null) {\r\n\t      occupy = true;\r\n\t    }\r\n\t    if (this.rows <= 0 || this.columns <= 0) {\r\n\t      return this;\r\n\t    }\r\n\t    if (this.layout.length < 1) {\r\n\t      this.resetLayout();\r\n\t    }\r\n\t    for (c = aa = 0, ref = w; 0 <= ref ? aa < ref : aa > ref; c = 0 <= ref ? ++aa : --aa) {\r\n\t      for (r = ab = 0, ref1 = h; 0 <= ref1 ? ab < ref1 : ab > ref1; r = 0 <= ref1 ? ++ab : --ab) {\r\n\t        this.layout[Math.min(this.layout.length - 1, y + r)][x + c] = (occupy ? 1 : 0);\r\n\t      }\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Grid.prototype.canFit = function(x, y, w, h) {\r\n\t    var aa, ab, cell, currCol, currRow, ref, ref1, ref2, ref3;\r\n\t    for (currRow = aa = ref = y, ref1 = Math.min(this.rows, y + h); ref <= ref1 ? aa < ref1 : aa > ref1; currRow = ref <= ref1 ? ++aa : --aa) {\r\n\t      for (currCol = ab = ref2 = x, ref3 = Math.min(this.columns, x + w); ref2 <= ref3 ? ab < ref3 : ab > ref3; currCol = ref2 <= ref3 ? ++ab : --ab) {\r\n\t        cell = this.layout[currRow][currCol];\r\n\t        if ((cell != null) && cell > 0) {\r\n\t          return false;\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return true;\r\n\t  };\r\n\t\r\n\t  Grid.prototype.fit = function(cols, rows) {\r\n\t    var aa, ab, b, cell, colCount, colSize, currCol, currRow, freeCol, ref, ref1;\r\n\t    colSize = Math.min(cols, this.columns);\r\n\t    for (currRow = aa = 0, ref = this.rows; 0 <= ref ? aa < ref : aa > ref; currRow = 0 <= ref ? ++aa : --aa) {\r\n\t      colCount = colSize;\r\n\t      freeCol = 0;\r\n\t      for (currCol = ab = 0, ref1 = this.columns; 0 <= ref1 ? ab < ref1 : ab > ref1; currCol = 0 <= ref1 ? ++ab : --ab) {\r\n\t        cell = this.layout[currRow][currCol];\r\n\t        if ((cell != null) && cell > 0) {\r\n\t          freeCol++;\r\n\t          colCount = colSize;\r\n\t        } else {\r\n\t          colCount--;\r\n\t          if (colCount <= 0) {\r\n\t            this.occupy(freeCol, currRow, colSize, rows);\r\n\t            b = new Rectangle(this.$add(this.cell.size.$multiply(freeCol, currRow)));\r\n\t            b.resizeTo(this.cell.size.$multiply(colSize, rows));\r\n\t            return {\r\n\t              row: currRow,\r\n\t              column: freeCol,\r\n\t              columnSize: colSize,\r\n\t              rowSize: rows,\r\n\t              bound: b\r\n\t            };\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return false;\r\n\t  };\r\n\t\r\n\t  Grid.prototype.neighbors = function(c, r) {\r\n\t    var aa, len1, n, ns, temp;\r\n\t    temp = [[c - 1, r - 1], [c, r - 1], [c + 1, r - 1], [c + 1, r], [c + 1, r + 1], [c, r + 1], [c - 1, r + 1], [c - 1, r]];\r\n\t    ns = [];\r\n\t    for (aa = 0, len1 = temp.length; aa < len1; aa++) {\r\n\t      n = temp[aa];\r\n\t      if (n[0] >= 0 && n[0] < this.columns && n[1] >= 0 && n[1] < this.rows) {\r\n\t        ns.push(new Vector(n[0], n[1], this.layout[n[1]][n[0]]));\r\n\t      } else {\r\n\t        ns.push(false);\r\n\t      }\r\n\t    }\r\n\t    return ns;\r\n\t  };\r\n\t\r\n\t  return Grid;\r\n\t\r\n\t})(Rectangle);\r\n\t\r\n\tthis.Grid = Grid;\r\n\t\r\n\tPointSet = (function(superClass) {\r\n\t  extend(PointSet, superClass);\r\n\t\r\n\t  function PointSet() {\r\n\t    PointSet.__super__.constructor.apply(this, arguments);\r\n\t    this.points = [];\r\n\t  }\r\n\t\r\n\t  PointSet.prototype.toString = function() {\r\n\t    var aa, len1, p, ref, str;\r\n\t    str = \"PointSet [ \";\r\n\t    ref = this.points;\r\n\t    for (aa = 0, len1 = ref.length; aa < len1; aa++) {\r\n\t      p = ref[aa];\r\n\t      str += p.x + \",\" + p.y + \",\" + p.z + \", \";\r\n\t    }\r\n\t    return str + \" ]\";\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.toArray = function() {\r\n\t    return this.points.slice();\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.to = function(args) {\r\n\t    var aa, len1, p, ref;\r\n\t    if (arguments.length > 0) {\r\n\t      if (Array.isArray(arguments[0]) && arguments[0].length > 0 && typeof arguments[0][0] === 'object') {\r\n\t        ref = arguments[0];\r\n\t        for (aa = 0, len1 = ref.length; aa < len1; aa++) {\r\n\t          p = ref[aa];\r\n\t          this.points.push(new Vector(p));\r\n\t        }\r\n\t      } else {\r\n\t        this.points.push(new Vector(Point.get(arguments)));\r\n\t      }\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.getAt = function(index) {\r\n\t    return this.points[Math.min(this.points.length - 1, Math.max(0, index))];\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.$getAt = function(index) {\r\n\t    return new Vector(this.getAt(index));\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.setAt = function(index, p) {\r\n\t    this.points[index] = p;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.count = function() {\r\n\t    return this.points.length;\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.connectFromAnchor = function(args) {\r\n\t    var aa, len1, p, ref;\r\n\t    if (arguments.length > 0) {\r\n\t      if (Array.isArray(arguments[0]) && arguments[0].length > 0) {\r\n\t        ref = arguments[0];\r\n\t        for (aa = 0, len1 = ref.length; aa < len1; aa++) {\r\n\t          p = ref[aa];\r\n\t          this.points.push(this.$add(p));\r\n\t        }\r\n\t      } else {\r\n\t        this.points.push(this.$add(Point.get(arguments)));\r\n\t      }\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.disconnect = function(index) {\r\n\t    if (index == null) {\r\n\t      index = -1;\r\n\t    }\r\n\t    if (index < 0) {\r\n\t      this.points = this.points.slice(0, this.points.length + index);\r\n\t    } else {\r\n\t      this.points = this.points.slice(index + 1);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.sides = function(close_path) {\r\n\t    var aa, lastP, len1, p, ref, sides;\r\n\t    if (close_path == null) {\r\n\t      close_path = true;\r\n\t    }\r\n\t    lastP = null;\r\n\t    sides = [];\r\n\t    ref = this.points;\r\n\t    for (aa = 0, len1 = ref.length; aa < len1; aa++) {\r\n\t      p = ref[aa];\r\n\t      if (lastP) {\r\n\t        sides.push(new Line(lastP).to(p));\r\n\t      }\r\n\t      lastP = p;\r\n\t    }\r\n\t    if (this.points.length > 1 && close_path) {\r\n\t      sides.push(new Line(lastP).to(this.points[0]));\r\n\t    }\r\n\t    return sides;\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.angles = function(axis) {\r\n\t    var aa, angles, i, ref, v1, v2;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    angles = [];\r\n\t    for (i = aa = 1, ref = this.points.length - 1; aa < ref; i = aa += 1) {\r\n\t      v1 = this.points[i - 1].$subtract(this.points[i]);\r\n\t      v2 = this.points[i + 1].$subtract(this.points[i]);\r\n\t      angles.push({\r\n\t        p0: this.points[i - 1],\r\n\t        p1: this.points[i],\r\n\t        p2: this.points[i + 1],\r\n\t        angle: v1.angleBetween(v2)\r\n\t      });\r\n\t    }\r\n\t    return angles;\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.bounds = function() {\r\n\t    return Util.boundingBox(this.points);\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.centroid = function() {\r\n\t    return Util.centroid(this.points);\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.convexHull = function(sort) {\r\n\t    var dq, i, left, pt, pts;\r\n\t    if (sort == null) {\r\n\t      sort = true;\r\n\t    }\r\n\t    if (this.points.length < 3) {\r\n\t      return [];\r\n\t    }\r\n\t    if (sort) {\r\n\t      pts = this.points.slice();\r\n\t      pts.sort(function(a, b) {\r\n\t        return a.x - b.x;\r\n\t      });\r\n\t    } else {\r\n\t      pts = this.points;\r\n\t    }\r\n\t    left = function(a, b, pt) {\r\n\t      return (b.x - a.x) * (pt.y - a.y) - (pt.x - a.x) * (b.y - a.y) > 0;\r\n\t    };\r\n\t    dq = [];\r\n\t    if (left(pts[0], pts[1], pts[2])) {\r\n\t      dq.push(pts[0]);\r\n\t      dq.push(pts[1]);\r\n\t    } else {\r\n\t      dq.push(pts[1]);\r\n\t      dq.push(pts[0]);\r\n\t    }\r\n\t    dq.unshift(pts[2]);\r\n\t    dq.push(pts[2]);\r\n\t    i = 3;\r\n\t    while (i < pts.length) {\r\n\t      pt = pts[i];\r\n\t      if (left(pt, dq[0], dq[1]) && left(dq[dq.length - 2], dq[dq.length - 1], pt)) {\r\n\t        i++;\r\n\t        continue;\r\n\t      }\r\n\t      while (!left(dq[dq.length - 2], dq[dq.length - 1], pt)) {\r\n\t        dq.pop();\r\n\t      }\r\n\t      dq.push(pt);\r\n\t      while (!left(dq[0], dq[1], pt)) {\r\n\t        dq.shift();\r\n\t      }\r\n\t      dq.unshift(pt);\r\n\t      i++;\r\n\t    }\r\n\t    return dq;\r\n\t  };\r\n\t\r\n\t  PointSet.prototype.clone = function() {\r\n\t    return new PointSet(this).to(Util.clonePoints(this.points));\r\n\t  };\r\n\t\r\n\t  return PointSet;\r\n\t\r\n\t})(Vector);\r\n\t\r\n\tthis.PointSet = PointSet;\r\n\t\r\n\tCurve = (function(superClass) {\r\n\t  extend(Curve, superClass);\r\n\t\r\n\t  function Curve() {\r\n\t    Curve.__super__.constructor.apply(this, arguments);\r\n\t    this.is3D = false;\r\n\t  }\r\n\t\r\n\t  Curve.prototype._getSteps = function(steps) {\r\n\t    var aa, ref, s, t, ts;\r\n\t    ts = [];\r\n\t    for (s = aa = 0, ref = steps; aa <= ref; s = aa += 1) {\r\n\t      t = s / steps;\r\n\t      ts.push([t, t * t, t * t * t]);\r\n\t    }\r\n\t    return ts;\r\n\t  };\r\n\t\r\n\t  Curve.prototype.controlPoints = function(index, copyStart) {\r\n\t    var _index, p0, p1, p2, p3;\r\n\t    if (index == null) {\r\n\t      index = 0;\r\n\t    }\r\n\t    if (copyStart == null) {\r\n\t      copyStart = false;\r\n\t    }\r\n\t    _index = (function(_this) {\r\n\t      return function(i) {\r\n\t        var idx;\r\n\t        idx = i < _this.points.length - 1 ? i : _this.points.length - 1;\r\n\t        return idx;\r\n\t      };\r\n\t    })(this);\r\n\t    p0 = this.points[index];\r\n\t    if (p0.x == null) {\r\n\t      return false;\r\n\t    }\r\n\t    index = copyStart ? index : index + 1;\r\n\t    p1 = this.points[_index(index++)];\r\n\t    p2 = this.points[_index(index++)];\r\n\t    p3 = this.points[_index(index++)];\r\n\t    return {\r\n\t      p0: p0,\r\n\t      p1: p1,\r\n\t      p2: p2,\r\n\t      p3: p3\r\n\t    };\r\n\t  };\r\n\t\r\n\t  Curve.prototype.catmullRom = function(steps) {\r\n\t    var aa, ab, c, i, k, ps, ref, ref1, ts;\r\n\t    if (steps == null) {\r\n\t      steps = 10;\r\n\t    }\r\n\t    if (this.points.length < 2) {\r\n\t      return [];\r\n\t    }\r\n\t    ps = [];\r\n\t    ts = this._getSteps(steps);\r\n\t    c = this.controlPoints(0, true);\r\n\t    for (i = aa = 0, ref = steps; aa <= ref; i = aa += 1) {\r\n\t      ps.push(this.catmullRomPoint(ts[i], c));\r\n\t    }\r\n\t    k = 0;\r\n\t    while (k < this.points.length - 2) {\r\n\t      c = this.controlPoints(k);\r\n\t      if (c) {\r\n\t        for (i = ab = 0, ref1 = steps; ab <= ref1; i = ab += 1) {\r\n\t          ps.push(this.catmullRomPoint(ts[i], c));\r\n\t        }\r\n\t        k++;\r\n\t      }\r\n\t    }\r\n\t    return ps;\r\n\t  };\r\n\t\r\n\t  Curve.prototype.catmullRomPoint = function(step, ctrls) {\r\n\t    var h1, h2, h3, h4, t, t2, t3, x, y, z;\r\n\t    t = step[0];\r\n\t    t2 = step[1];\r\n\t    t3 = step[2];\r\n\t    h1 = -0.5 * t3 + t2 - 0.5 * t;\r\n\t    h2 = 1.5 * t3 - 2.5 * t2 + 1;\r\n\t    h3 = -1.5 * t3 + 2 * t2 + 0.5 * t;\r\n\t    h4 = 0.5 * t3 - 0.5 * t2;\r\n\t    x = h1 * ctrls.p0.x + h2 * ctrls.p1.x + h3 * ctrls.p2.x + h4 * ctrls.p3.x;\r\n\t    y = h1 * ctrls.p0.y + h2 * ctrls.p1.y + h3 * ctrls.p2.y + h4 * ctrls.p3.y;\r\n\t    z = !this.is3D ? 0 : h1 * ctrls.p0.z + h2 * ctrls.p1.z + h3 * ctrls.p2.z + h4 * ctrls.p3.z;\r\n\t    return new Point(x, y, z);\r\n\t  };\r\n\t\r\n\t  Curve.prototype.cardinal = function(steps, tension) {\r\n\t    var aa, ab, c, i, k, ps, ref, ref1, ts;\r\n\t    if (steps == null) {\r\n\t      steps = 10;\r\n\t    }\r\n\t    if (tension == null) {\r\n\t      tension = 0.5;\r\n\t    }\r\n\t    if (this.points.length < 2) {\r\n\t      return [];\r\n\t    }\r\n\t    ps = [];\r\n\t    ts = this._getSteps(steps);\r\n\t    c = this.controlPoints(0, true);\r\n\t    for (i = aa = 0, ref = steps; aa <= ref; i = aa += 1) {\r\n\t      ps.push(this.cardinalPoint(ts[i], c, tension));\r\n\t    }\r\n\t    k = 0;\r\n\t    while (k < this.points.length - 2) {\r\n\t      c = this.controlPoints(k);\r\n\t      if (c) {\r\n\t        for (i = ab = 0, ref1 = steps; ab <= ref1; i = ab += 1) {\r\n\t          ps.push(this.cardinalPoint(ts[i], c, tension));\r\n\t        }\r\n\t        k++;\r\n\t      }\r\n\t    }\r\n\t    return ps;\r\n\t  };\r\n\t\r\n\t  Curve.prototype.cardinalPoint = function(step, ctrls, tension) {\r\n\t    var h1, h2, h2a, h3, h3a, h4, t, t2, t3, x, y, z;\r\n\t    if (tension == null) {\r\n\t      tension = 0.5;\r\n\t    }\r\n\t    t = step[0];\r\n\t    t2 = step[1];\r\n\t    t3 = step[2];\r\n\t    h1 = tension * (-1 * t3 + 2 * t2 - t);\r\n\t    h2 = tension * (-1 * t3 + t2);\r\n\t    h2a = 2 * t3 - 3 * t2 + 1;\r\n\t    h3 = tension * (t3 - 2 * t2 + t);\r\n\t    h3a = -2 * t3 + 3 * t2;\r\n\t    h4 = tension * (t3 - t2);\r\n\t    x = ctrls.p0.x * h1 + ctrls.p1.x * h2 + h2a * ctrls.p1.x + ctrls.p2.x * h3 + h3a * ctrls.p2.x + ctrls.p3.x * h4;\r\n\t    y = ctrls.p0.y * h1 + ctrls.p1.y * h2 + h2a * ctrls.p1.y + ctrls.p2.y * h3 + h3a * ctrls.p2.y + ctrls.p3.y * h4;\r\n\t    z = !this.is3D ? 0 : ctrls.p0.z * h1 + ctrls.p1.z * h2 + h2a * ctrls.p1.z + ctrls.p2.z * h3 + h3a * ctrls.p2.z + ctrls.p3.z * h4;\r\n\t    return new Point(x, y, z);\r\n\t  };\r\n\t\r\n\t  Curve.prototype.bezier = function(steps) {\r\n\t    var aa, c, i, k, ps, ref, ts;\r\n\t    if (steps == null) {\r\n\t      steps = 10;\r\n\t    }\r\n\t    if (this.points.length < 4) {\r\n\t      return [];\r\n\t    }\r\n\t    ps = [];\r\n\t    ts = this._getSteps(steps);\r\n\t    k = 0;\r\n\t    while (k <= this.points.length - 3) {\r\n\t      c = this.controlPoints(k);\r\n\t      if (c) {\r\n\t        for (i = aa = 0, ref = steps; aa <= ref; i = aa += 1) {\r\n\t          ps.push(this.bezierPoint(ts[i], c));\r\n\t        }\r\n\t        k += 3;\r\n\t      }\r\n\t    }\r\n\t    return ps;\r\n\t  };\r\n\t\r\n\t  Curve.prototype.bezierPoint = function(step, ctrls) {\r\n\t    var h1, h2, h3, h4, t, t2, t3, x, y, z;\r\n\t    t = step[0];\r\n\t    t2 = step[1];\r\n\t    t3 = step[2];\r\n\t    h1 = -1 * t3 + 3 * t2 - 3 * t + 1;\r\n\t    h2 = 3 * t3 - 6 * t2 + 3 * t;\r\n\t    h3 = -3 * t3 + 3 * t2;\r\n\t    h4 = t3;\r\n\t    x = h1 * ctrls.p0.x + h2 * ctrls.p1.x + h3 * ctrls.p2.x + h4 * ctrls.p3.x;\r\n\t    y = h1 * ctrls.p0.y + h2 * ctrls.p1.y + h3 * ctrls.p2.y + h4 * ctrls.p3.y;\r\n\t    z = !this.is3D ? 0 : h1 * ctrls.p0.z + h2 * ctrls.p1.z + h3 * ctrls.p2.z + h4 * ctrls.p3.z;\r\n\t    return new Point(x, y, z);\r\n\t  };\r\n\t\r\n\t  Curve.prototype.bspline = function(steps, tension) {\r\n\t    var aa, ab, c, i, k, ps, ref, ref1, ts;\r\n\t    if (steps == null) {\r\n\t      steps = 10;\r\n\t    }\r\n\t    if (tension == null) {\r\n\t      tension = false;\r\n\t    }\r\n\t    if (this.points.length < 2) {\r\n\t      return [];\r\n\t    }\r\n\t    ps = [];\r\n\t    ts = this._getSteps(steps);\r\n\t    k = 0;\r\n\t    while (k < this.points.length - 2) {\r\n\t      c = this.controlPoints(k);\r\n\t      if (c) {\r\n\t        if (!tension) {\r\n\t          for (i = aa = 0, ref = steps; aa <= ref; i = aa += 1) {\r\n\t            ps.push(this.bsplinePoint(ts[i], c));\r\n\t          }\r\n\t        } else {\r\n\t          for (i = ab = 0, ref1 = steps; ab <= ref1; i = ab += 1) {\r\n\t            ps.push(this.bsplineTensionPoint(ts[i], c, tension));\r\n\t          }\r\n\t        }\r\n\t        k++;\r\n\t      }\r\n\t    }\r\n\t    return ps;\r\n\t  };\r\n\t\r\n\t  Curve.prototype.bsplinePoint = function(step, ctrls) {\r\n\t    var h1, h2, h3, h4, t, t2, t3, x, y, z;\r\n\t    t = step[0];\r\n\t    t2 = step[1];\r\n\t    t3 = step[2];\r\n\t    h1 = -0.16666666666 * t3 + 0.5 * t2 - 0.5 * t + 0.16666666666;\r\n\t    h2 = 0.5 * t3 - t2 + 0.66666666666;\r\n\t    h3 = -0.5 * t3 + 0.5 * t2 + 0.5 * t + 0.16666666666;\r\n\t    h4 = 0.16666666666 * t3;\r\n\t    x = h1 * ctrls.p0.x + h2 * ctrls.p1.x + h3 * ctrls.p2.x + h4 * ctrls.p3.x;\r\n\t    y = h1 * ctrls.p0.y + h2 * ctrls.p1.y + h3 * ctrls.p2.y + h4 * ctrls.p3.y;\r\n\t    z = !this.is3D ? 0 : h1 * ctrls.p0.z + h2 * ctrls.p1.z + h3 * ctrls.p2.z + h4 * ctrls.p3.z;\r\n\t    return new Point(x, y, z);\r\n\t  };\r\n\t\r\n\t  Curve.prototype.bsplineTensionPoint = function(step, ctrls, tension) {\r\n\t    var h1, h2, h2a, h3, h3a, h4, t, t2, t3, x, y, z;\r\n\t    if (tension == null) {\r\n\t      tension = 1;\r\n\t    }\r\n\t    t = step[0];\r\n\t    t2 = step[1];\r\n\t    t3 = step[2];\r\n\t    h1 = tension * (-0.16666666666 * t3 + 0.5 * t2 - 0.5 * t + 0.16666666666);\r\n\t    h2 = tension * (-1.5 * t3 + 2 * t2 - 0.33333333333);\r\n\t    h2a = 2 * t3 - 3 * t2 + 1;\r\n\t    h3 = tension * (1.5 * t3 - 2.5 * t2 + 0.5 * t + 0.16666666666);\r\n\t    h3a = -2 * t3 + 3 * t2;\r\n\t    h4 = tension * (0.16666666666 * t3);\r\n\t    x = h1 * ctrls.p0.x + h2 * ctrls.p1.x + h2a * ctrls.p1.x + h3 * ctrls.p2.x + h3a * ctrls.p2.x + h4 * ctrls.p3.x;\r\n\t    y = h1 * ctrls.p0.y + h2 * ctrls.p1.y + h2a * ctrls.p1.y + h3 * ctrls.p2.y + h3a * ctrls.p2.y + h4 * ctrls.p3.y;\r\n\t    z = !this.is3D ? 0 : h1 * ctrls.p0.z + h2 * ctrls.p1.z + h2a * ctrls.p1.y + h3 * ctrls.p2.z + h3a * ctrls.p2.z + h4 * ctrls.p3.z;\r\n\t    return new Point(x, y, z);\r\n\t  };\r\n\t\r\n\t  return Curve;\r\n\t\r\n\t})(PointSet);\r\n\t\r\n\tthis.Curve = Curve;\r\n\t\r\n\tTriangle = (function(superClass) {\r\n\t  extend(Triangle, superClass);\r\n\t\r\n\t  function Triangle() {\r\n\t    Triangle.__super__.constructor.apply(this, arguments);\r\n\t    this.p1 = new Vector(this.x - 1, this.y - 1, this.z);\r\n\t    this.p2 = new Vector(this.x + 1, this.y + 1, this.z);\r\n\t  }\r\n\t\r\n\t  Triangle.prototype.to = function(args) {\r\n\t    if (arguments.length > 0) {\r\n\t      if (typeof arguments[0] === 'object' && arguments.length === 2) {\r\n\t        this.p1.set(arguments[0]);\r\n\t        this.p2.set(arguments[1]);\r\n\t      } else {\r\n\t        if (arguments.length < 6) {\r\n\t          this.p1.set([arguments[0], arguments[1]]);\r\n\t          this.p2.set([arguments[2], arguments[3]]);\r\n\t        } else {\r\n\t          this.p1.set([arguments[0], arguments[1], arguments[2]]);\r\n\t          this.p2.set([arguments[3], arguments[4], arguments[5]]);\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.toArray = function() {\r\n\t    return [this, this.p1, this.p2];\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.toString = function() {\r\n\t    return \"Triangle (\" + this.x + \", \" + this.y + \", \" + this.z + \"), (\" + this.p1.x + \", \" + this.p1.y + \", \" + this.p1.z + \"), (\" + this.p2.x + \", \" + this.p2.y + \", \" + this.p2.z + \")\";\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.getAt = function(index) {\r\n\t    if (index === 1 || index === \"p1\") {\r\n\t      return this.p1;\r\n\t    }\r\n\t    if (index === 2 || index === \"p2\") {\r\n\t      return this.p2;\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.$getAt = function(index) {\r\n\t    return new Vector(this.getAt(index));\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.toPointSet = function() {\r\n\t    var p0;\r\n\t    p0 = new Vector(this);\r\n\t    return new PointSet(p0).to([p0, this.p1, this.p2]);\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.sides = function() {\r\n\t    return [new Line(this).to(this.p1), new Line(this.p1).to(this.p2), new Line(this.p2).to(this)];\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.angles = function(axis) {\r\n\t    var angles;\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    angles = [this.p2.$subtract(this).angleBetween(this.p1.$subtract(this), axis), this.$subtract(this.p1).angleBetween(this.p2.$subtract(this.p1), axis)];\r\n\t    angles.push(Math.PI - angles[0] - angles[1]);\r\n\t    return angles;\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.medial = function() {\r\n\t    var pts, side, sides;\r\n\t    sides = this.sides();\r\n\t    pts = (function() {\r\n\t      var aa, len1, results;\r\n\t      results = [];\r\n\t      for (aa = 0, len1 = sides.length; aa < len1; aa++) {\r\n\t        side = sides[aa];\r\n\t        results.push(side.midpoint());\r\n\t      }\r\n\t      return results;\r\n\t    })();\r\n\t    return new Triangle(pts[0]).to(pts[1], pts[2]);\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.perimeter = function() {\r\n\t    var lens, sides;\r\n\t    sides = this.sides();\r\n\t    lens = [sides[0].length(), sides[1].length(), sides[2].length()];\r\n\t    return {\r\n\t      sides: sides,\r\n\t      value: lens[0] + lens[1] + lens[2],\r\n\t      lengths: lens\r\n\t    };\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.area = function() {\r\n\t    var hp, p;\r\n\t    p = this.perimeter();\r\n\t    hp = p.value / 2;\r\n\t    return {\r\n\t      value: Math.sqrt(hp * (hp - p.lengths[0]) * (hp - p.lengths[1]) * (hp - p.lengths[2])),\r\n\t      perimeter: p\r\n\t    };\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.oppositeSide = function(id) {\r\n\t    if (id === \"p1\") {\r\n\t      return new Line(this).to(this.p2);\r\n\t    } else if (id === \"p2\") {\r\n\t      return new Line(this).to(this.p1);\r\n\t    } else {\r\n\t      return new Line(this.p1).to(this.p2);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.adjacentSides = function(id) {\r\n\t    if (id === \"p1\") {\r\n\t      return [new Line(this.p1).to(this), new Line(this.p1).to(this.p2)];\r\n\t    } else if (id === \"p2\") {\r\n\t      return [new Line(this.p2).to(this), new Line(this.p2).to(this.p1)];\r\n\t    } else {\r\n\t      return [new Line(this).to(this.p1), new Line(this).to(this.p2)];\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.bisector = function(id, asLine, size) {\r\n\t    var ad, bp, p;\r\n\t    if (asLine == null) {\r\n\t      asLine = false;\r\n\t    }\r\n\t    if (size == null) {\r\n\t      size = 100;\r\n\t    }\r\n\t    ad = this.adjacentSides(id);\r\n\t    p = new Vector(ad[0]);\r\n\t    ad[0].moveTo(0, 0);\r\n\t    ad[1].moveTo(0, 0);\r\n\t    bp = ad[0].p1.bisect(ad[1].p1);\r\n\t    if (asLine) {\r\n\t      return new Line(p).to(bp.multiply(size).add(p));\r\n\t    } else {\r\n\t      return bp;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.altitude = function(id) {\r\n\t    if (id === \"p1\" || id === \"p2\") {\r\n\t      return new Line(this[id]).to(this.oppositeSide(id).getPerpendicularFromPoint(this[id]));\r\n\t    } else {\r\n\t      return new Line(this).to(this.oppositeSide().getPerpendicularFromPoint(this));\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.centroid = function() {\r\n\t    var c0, c1, c2;\r\n\t    c0 = this.$divide(3);\r\n\t    c1 = this.p1.$divide(3);\r\n\t    c2 = this.p2.$divide(3);\r\n\t    return new Vector(c0.x + c1.x + c2.x, c0.y + c1.y + c2.y, c0.z + c1.z + c2.z);\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.orthocenter = function() {\r\n\t    var a, b;\r\n\t    a = this.altitude();\r\n\t    b = this.altitude(\"p1\");\r\n\t    return a.intersectPath(b, Const.xyz);\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.incenter = function() {\r\n\t    var a, b;\r\n\t    a = this.bisector(\"p0\", true);\r\n\t    b = this.bisector(\"p1\", true);\r\n\t    return a.intersectPath(b, Const.xyz);\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.incircle = function() {\r\n\t    var area, center, radius;\r\n\t    center = this.incenter();\r\n\t    area = this.area();\r\n\t    radius = 2 * area.value / area.perimeter.value;\r\n\t    return new Circle(center).setRadius(radius);\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.circumcenter = function() {\r\n\t    var medial, pbs;\r\n\t    medial = this.medial();\r\n\t    pbs = [new Line(medial).to(this.$subtract(medial).perpendicular()[0].$add(medial)), new Line(medial.p1).to(this.p1.$subtract(medial.p1).perpendicular()[0].$add(medial.p1)), new Line(medial.p2).to(this.p2.$subtract(medial.p2).perpendicular()[0].$add(medial.p2))];\r\n\t    return {\r\n\t      center: pbs[0].intersectPath(pbs[1], Const.xyz),\r\n\t      bisectors: pbs\r\n\t    };\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.circumcircle = function() {\r\n\t    var center, r;\r\n\t    center = this.circumcenter();\r\n\t    r = this.magnitude(center.center);\r\n\t    return new Circle(center.center).setRadius(r);\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.intersectPoint = function(p) {\r\n\t    var hp, s, sides;\r\n\t    sides = this.sides();\r\n\t    hp = (function() {\r\n\t      var aa, len1, results;\r\n\t      results = [];\r\n\t      for (aa = 0, len1 = sides.length; aa < len1; aa++) {\r\n\t        s = sides[aa];\r\n\t        results.push(s.collinear(p) > 0);\r\n\t      }\r\n\t      return results;\r\n\t    })();\r\n\t    return hp[0] === hp[1] && hp[1] === hp[2];\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.intersectPath = function(path, get_pts, axis) {\r\n\t    var aa, len1, p, pts, s, sides;\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    sides = this.sides();\r\n\t    pts = [];\r\n\t    for (aa = 0, len1 = sides.length; aa < len1; aa++) {\r\n\t      s = sides[aa];\r\n\t      p = s.intersectPath(path);\r\n\t      if (p && s.withinBounds(p, axis)) {\r\n\t        if (!get_pts) {\r\n\t          return true;\r\n\t        }\r\n\t        pts.push(p);\r\n\t      }\r\n\t    }\r\n\t    if (get_pts) {\r\n\t      return pts;\r\n\t    } else {\r\n\t      return false;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.intersectLine = function(line, get_pts, axis) {\r\n\t    var aa, ins, len1, p, pts;\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    if (axis == null) {\r\n\t      axis = Const.xy;\r\n\t    }\r\n\t    ins = this.intersectPath(line, true, axis);\r\n\t    pts = [];\r\n\t    for (aa = 0, len1 = ins.length; aa < len1; aa++) {\r\n\t      p = ins[aa];\r\n\t      if (line.withinBounds(p)) {\r\n\t        if (!get_pts) {\r\n\t          return true;\r\n\t        }\r\n\t        pts.push(p);\r\n\t      }\r\n\t    }\r\n\t    if (get_pts) {\r\n\t      return pts;\r\n\t    } else {\r\n\t      return false;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.intersectLines = function(lines, get_pts) {\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    return Line.intersectLines(this, lines, get_pts);\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.intersectPath3D = function(path, get_pts) {\r\n\t    var det, dir, e1, e2, inv_det, pvec, qvec, t, tvec, u, v;\r\n\t    e1 = this.p1.$subtract(this);\r\n\t    e2 = this.p2.$subtract(this);\r\n\t    dir = path.direction().normalize();\r\n\t    pvec = dir.cross(e2);\r\n\t    det = e1.dot(pvec);\r\n\t    if (det > -Const.epsilon && det < Const.epsilon) {\r\n\t      return false;\r\n\t    }\r\n\t    inv_det = 1 / det;\r\n\t    tvec = path.$subtract(this);\r\n\t    u = tvec.dot(pvec) * inv_det;\r\n\t    if (u < 0 || u > 1) {\r\n\t      return false;\r\n\t    }\r\n\t    qvec = tvec.cross(e1);\r\n\t    v = dir.dot(qvec) * inv_det;\r\n\t    if (v < 0 || v > 1) {\r\n\t      return false;\r\n\t    }\r\n\t    t = e2.dot(qvec) * inv_det;\r\n\t    if (t > Const.epsilon) {\r\n\t      if (get_pts) {\r\n\t        return [u, v, t];\r\n\t      } else {\r\n\t        return true;\r\n\t      }\r\n\t    } else {\r\n\t      return false;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.intersectRectangle = function(rect, get_pts) {\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    return rect.intersectLines(this.sides(), get_pts);\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.intersectCircle = function(circle, get_pts) {\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    return circle.intersectLines(this.sides(), get_pts);\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.intersectTriangle = function(tri, get_pts) {\r\n\t    if (get_pts == null) {\r\n\t      get_pts = true;\r\n\t    }\r\n\t    return tri.intersectLines(this.sides(), get_pts);\r\n\t  };\r\n\t\r\n\t  Triangle.prototype.clone = function() {\r\n\t    return new Triangle(this).to(this.p1, this.p2);\r\n\t  };\r\n\t\r\n\t  return Triangle;\r\n\t\r\n\t})(Vector);\r\n\t\r\n\tthis.Triangle = Triangle;\r\n\t\r\n\tSVGForm = (function() {\r\n\t  SVGForm._domId = 0;\r\n\t\r\n\t  function SVGForm(space) {\r\n\t    this.cc = space.ctx || {};\r\n\t    this.cc.group = this.cc.group || null;\r\n\t    this.cc.groupID = \"ptx\";\r\n\t    this.cc.groupCount = 0;\r\n\t    this.cc.currentID = \"ptx0\";\r\n\t    this.cc.style = {\r\n\t      fill: \"#999\",\r\n\t      stroke: \"#666\",\r\n\t      \"stroke-width\": 1,\r\n\t      \"stroke-linejoin\": false,\r\n\t      \"stroke-linecap\": false\r\n\t    };\r\n\t    this.cc.font = \"11px sans-serif\";\r\n\t    this.cc.fontSize = 11;\r\n\t    this.cc.fontFace = \"sans-serif\";\r\n\t  }\r\n\t\r\n\t  SVGForm.prototype.fill = function(c) {\r\n\t    this.cc.style.fill = c ? c : false;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.stroke = function(c, width, joint, cap) {\r\n\t    this.cc.style.stroke = c ? c : false;\r\n\t    if (width) {\r\n\t      this.cc.style[\"stroke-width\"] = width;\r\n\t    }\r\n\t    if (joint) {\r\n\t      this.cc.style[\"stroke-linejoin\"] = joint;\r\n\t    }\r\n\t    if (cap) {\r\n\t      this.cc.style[\"stroke-linecap\"] = joint;\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.scope = function(group_id, group) {\r\n\t    if (group == null) {\r\n\t      group = false;\r\n\t    }\r\n\t    if (group) {\r\n\t      this.cc.group = group;\r\n\t    }\r\n\t    this.cc.groupID = group_id;\r\n\t    this.cc.groupCount = 0;\r\n\t    this.nextID();\r\n\t    return this.cc;\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.getScope = function(item) {\r\n\t    if (!item || item.animateID === null) {\r\n\t      throw \"getScope()'s item must be added to a Space, and has an animateID property. Otherwise, use scope() instead.\";\r\n\t    }\r\n\t    return this.scope(SVGForm._scopeID(item));\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.nextID = function() {\r\n\t    this.cc.groupCount++;\r\n\t    this.cc.currentID = this.cc.groupID + \"-\" + this.cc.groupCount;\r\n\t    return this.cc.currentID;\r\n\t  };\r\n\t\r\n\t  SVGForm.id = function(ctx) {\r\n\t    return ctx.currentID || \"p-\" + SVGForm._domId++;\r\n\t  };\r\n\t\r\n\t  SVGForm._scopeID = function(item) {\r\n\t    return \"item\" + item.animateID;\r\n\t  };\r\n\t\r\n\t  SVGForm.style = function(elem, styles) {\r\n\t    var k, st, v;\r\n\t    st = {};\r\n\t    for (k in styles) {\r\n\t      v = styles[k];\r\n\t      if (!v) {\r\n\t        if (k === \"fill\" || k === \"stroke\") {\r\n\t          st[k] = \"none\";\r\n\t        }\r\n\t      } else {\r\n\t        st[k] = v;\r\n\t      }\r\n\t    }\r\n\t    return DOMSpace.attr(elem, st);\r\n\t  };\r\n\t\r\n\t  SVGForm.point = function(ctx, pt, halfsize, fill, stroke, circle) {\r\n\t    var elem;\r\n\t    if (halfsize == null) {\r\n\t      halfsize = 2;\r\n\t    }\r\n\t    if (fill == null) {\r\n\t      fill = true;\r\n\t    }\r\n\t    if (stroke == null) {\r\n\t      stroke = true;\r\n\t    }\r\n\t    if (circle == null) {\r\n\t      circle = false;\r\n\t    }\r\n\t    elem = SVGSpace.svgElement(ctx.group, (circle ? \"circle\" : \"rect\"), SVGForm.id(ctx));\r\n\t    if (!elem) {\r\n\t      return;\r\n\t    }\r\n\t    if (circle) {\r\n\t      DOMSpace.attr(elem, {\r\n\t        cx: pt.x,\r\n\t        cy: pt.y,\r\n\t        r: halfsize\r\n\t      });\r\n\t    } else {\r\n\t      DOMSpace.attr(elem, {\r\n\t        x: pt.x - halfsize,\r\n\t        y: pt.y - halfsize,\r\n\t        width: halfsize + halfsize,\r\n\t        height: halfsize + halfsize\r\n\t      });\r\n\t    }\r\n\t    SVGForm.style(elem, ctx.style);\r\n\t    return elem;\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.point = function(p, halfsize, isCircle) {\r\n\t    if (halfsize == null) {\r\n\t      halfsize = 2;\r\n\t    }\r\n\t    if (isCircle == null) {\r\n\t      isCircle = false;\r\n\t    }\r\n\t    this.nextID();\r\n\t    SVGForm.point(this.cc, p, halfsize, true, true, isCircle);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGForm.points = function(ctx, pts, halfsize, fill, stroke, circle) {\r\n\t    var p;\r\n\t    if (halfsize == null) {\r\n\t      halfsize = 2;\r\n\t    }\r\n\t    if (fill == null) {\r\n\t      fill = true;\r\n\t    }\r\n\t    if (stroke == null) {\r\n\t      stroke = true;\r\n\t    }\r\n\t    if (circle == null) {\r\n\t      circle = false;\r\n\t    }\r\n\t    return (function() {\r\n\t      var aa, len1, results;\r\n\t      results = [];\r\n\t      for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n\t        p = pts[aa];\r\n\t        results.push(SVGForm.point(ctx, p, halfsize, fill, stroke, circle));\r\n\t      }\r\n\t      return results;\r\n\t    })();\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.points = function(ps, halfsize, isCircle) {\r\n\t    var aa, len1, p;\r\n\t    if (halfsize == null) {\r\n\t      halfsize = 2;\r\n\t    }\r\n\t    if (isCircle == null) {\r\n\t      isCircle = false;\r\n\t    }\r\n\t    for (aa = 0, len1 = ps.length; aa < len1; aa++) {\r\n\t      p = ps[aa];\r\n\t      this.point(p, halfsize, isCircle);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGForm.line = function(ctx, pair) {\r\n\t    var elem;\r\n\t    if (!pair.p1) {\r\n\t      throw (pair.toString()) + \" is not a Pair\";\r\n\t    }\r\n\t    elem = SVGSpace.svgElement(ctx.group, \"line\", SVGForm.id(ctx));\r\n\t    DOMSpace.attr(elem, {\r\n\t      x1: pair.x,\r\n\t      y1: pair.y,\r\n\t      x2: pair.p1.x,\r\n\t      y2: pair.p1.y\r\n\t    });\r\n\t    SVGForm.style(elem, ctx.style);\r\n\t    return elem;\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.line = function(p) {\r\n\t    this.nextID();\r\n\t    SVGForm.line(this.cc, p);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGForm.lines = function(ctx, pairs) {\r\n\t    var ln;\r\n\t    return (function() {\r\n\t      var aa, len1, results;\r\n\t      results = [];\r\n\t      for (aa = 0, len1 = pairs.length; aa < len1; aa++) {\r\n\t        ln = pairs[aa];\r\n\t        results.push(SVGForm.line(ctx, ln));\r\n\t      }\r\n\t      return results;\r\n\t    })();\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.lines = function(ps) {\r\n\t    var aa, len1, p;\r\n\t    for (aa = 0, len1 = ps.length; aa < len1; aa++) {\r\n\t      p = ps[aa];\r\n\t      this.line(p);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGForm.rect = function(ctx, pair, fill, stroke) {\r\n\t    var elem, size;\r\n\t    if (fill == null) {\r\n\t      fill = true;\r\n\t    }\r\n\t    if (stroke == null) {\r\n\t      stroke = true;\r\n\t    }\r\n\t    if (!pair.p1) {\r\n\t      throw \"\" + (pair.toString() === !a(Pair));\r\n\t    }\r\n\t    elem = SVGSpace.svgElement(ctx.group, \"rect\", SVGForm.id(ctx));\r\n\t    size = pair.size();\r\n\t    DOMSpace.attr(elem, {\r\n\t      x: pair.x,\r\n\t      y: pair.y,\r\n\t      width: size.x,\r\n\t      height: size.y\r\n\t    });\r\n\t    SVGForm.style(elem, ctx.style);\r\n\t    return elem;\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.rect = function(p, checkBounds) {\r\n\t    var r;\r\n\t    if (checkBounds == null) {\r\n\t      checkBounds = true;\r\n\t    }\r\n\t    this.nextID();\r\n\t    r = checkBounds ? p.bounds() : p;\r\n\t    SVGForm.rect(this.cc, r);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGForm.circle = function(ctx, c, fill, stroke) {\r\n\t    var elem;\r\n\t    if (fill == null) {\r\n\t      fill = true;\r\n\t    }\r\n\t    if (stroke == null) {\r\n\t      stroke = false;\r\n\t    }\r\n\t    elem = SVGSpace.svgElement(ctx.group, \"circle\", SVGForm.id(ctx));\r\n\t    if (!elem) {\r\n\t      return;\r\n\t    }\r\n\t    DOMSpace.attr(elem, {\r\n\t      cx: c.x,\r\n\t      cy: c.y,\r\n\t      r: c.radius\r\n\t    });\r\n\t    SVGForm.style(elem, ctx.style);\r\n\t    return elem;\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.circle = function(c) {\r\n\t    this.nextID();\r\n\t    SVGForm.circle(this.cc, c);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGForm.polygon = function(ctx, pts, closePath, fill, stroke) {\r\n\t    var elem, i, points;\r\n\t    if (closePath == null) {\r\n\t      closePath = true;\r\n\t    }\r\n\t    if (fill == null) {\r\n\t      fill = true;\r\n\t    }\r\n\t    if (stroke == null) {\r\n\t      stroke = true;\r\n\t    }\r\n\t    elem = SVGSpace.svgElement(ctx.group, (closePath ? \"polygon\" : \"polyline\"), SVGForm.id(ctx));\r\n\t    if (!elem) {\r\n\t      return;\r\n\t    }\r\n\t    if (pts.length <= 1) {\r\n\t      return;\r\n\t    }\r\n\t    points = (function() {\r\n\t      var aa, ref, results;\r\n\t      results = [];\r\n\t      for (i = aa = 0, ref = pts.length; aa < ref; i = aa += 1) {\r\n\t        results.push(pts[i].x + \",\" + pts[i].y);\r\n\t      }\r\n\t      return results;\r\n\t    })();\r\n\t    DOMSpace.attr(elem, {\r\n\t      points: points.join(\" \")\r\n\t    });\r\n\t    SVGForm.style(elem, ctx.style);\r\n\t    return elem;\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.polygon = function(ps, closePath) {\r\n\t    this.nextID();\r\n\t    SVGForm.polygon(this.cc, ps, closePath);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGForm.triangle = function(ctx, tri, fill, stroke) {\r\n\t    if (fill == null) {\r\n\t      fill = true;\r\n\t    }\r\n\t    if (stroke == null) {\r\n\t      stroke = false;\r\n\t    }\r\n\t    return SVGForm.polygon(ctx, tri.toArray());\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.triangle = function(tri) {\r\n\t    this.nextID();\r\n\t    SVGForm.triangle(this.cc, tri);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGForm.curve = function(ctx, pts, closePath) {\r\n\t    if (closePath == null) {\r\n\t      closePath = false;\r\n\t    }\r\n\t    return SVGForm.polygon(ctx, pts, closePath);\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.curve = function(ps, closePath) {\r\n\t    if (closePath == null) {\r\n\t      closePath = false;\r\n\t    }\r\n\t    this.nextID();\r\n\t    SVGForm.curve(this.cc, ps, closePath);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGForm.text = function(ctx, pt, txt, maxWidth, dx, dy) {\r\n\t    var elem;\r\n\t    if (maxWidth == null) {\r\n\t      maxWidth = 0;\r\n\t    }\r\n\t    if (dx == null) {\r\n\t      dx = 0;\r\n\t    }\r\n\t    if (dy == null) {\r\n\t      dy = 0;\r\n\t    }\r\n\t    elem = SVGSpace.svgElement(ctx.group, \"text\", SVGForm.id(ctx));\r\n\t    if (!elem) {\r\n\t      return;\r\n\t    }\r\n\t    DOMSpace.attr(elem, {\r\n\t      \"pointer-events\": \"none\",\r\n\t      x: pt.x,\r\n\t      y: pt.y,\r\n\t      dx: 0,\r\n\t      dy: 0\r\n\t    });\r\n\t    elem.textContent = txt;\r\n\t    SVGForm.style(elem, {\r\n\t      fill: ctx.style.fill,\r\n\t      stroke: ctx.style.stroke,\r\n\t      \"font-family\": ctx.fontFace || false,\r\n\t      \"font-size\": ctx.fontSize || false\r\n\t    });\r\n\t    return elem;\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.text = function(p, txt, maxWidth, xoff, yoff) {\r\n\t    if (maxWidth == null) {\r\n\t      maxWidth = 1000;\r\n\t    }\r\n\t    this.nextID();\r\n\t    SVGForm.text(this.cc, p, txt, maxWidth, xoff, yoff);\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.font = function(size, face) {\r\n\t    if (face == null) {\r\n\t      face = false;\r\n\t    }\r\n\t    this.cc.fontFace = face;\r\n\t    this.cc.fontSize = size;\r\n\t    this.cc.font = size + \"px \" + face;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.draw = function(shape) {\r\n\t    return this.sketch(shape);\r\n\t  };\r\n\t\r\n\t  SVGForm.prototype.sketch = function(shape) {\r\n\t    shape.floor();\r\n\t    if (shape instanceof Circle) {\r\n\t      SVGForm.circle(this.cc, shape, this.filled, this.stroked);\r\n\t    } else if (shape instanceof Rectangle) {\r\n\t      SVGForm.rect(this.cc, shape, this.filled, this.stroked);\r\n\t    } else if (shape instanceof Triangle) {\r\n\t      SVGForm.triangle(this.cc, shape, this.filled, this.stroked);\r\n\t    } else if (shape instanceof Line || shape instanceof Pair) {\r\n\t      SVGForm.line(this.cc, shape);\r\n\t    } else if (shape instanceof PointSet) {\r\n\t      SVGForm.polygon(this.cc, shape.points);\r\n\t    } else if (shape instanceof Vector || shape instanceof Point) {\r\n\t      SVGForm.point(this.cc, shape);\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  return SVGForm;\r\n\t\r\n\t})();\r\n\t\r\n\tthis.SVGForm = SVGForm;\r\n\t\r\n\tSVGSpace = (function(superClass) {\r\n\t  extend(SVGSpace, superClass);\r\n\t\r\n\t  function SVGSpace(id, bgcolor, context) {\r\n\t    if (id == null) {\r\n\t      id = 'pt_space';\r\n\t    }\r\n\t    if (bgcolor == null) {\r\n\t      bgcolor = false;\r\n\t    }\r\n\t    if (context == null) {\r\n\t      context = 'svg';\r\n\t    }\r\n\t    SVGSpace.__super__.constructor.apply(this, arguments);\r\n\t    this.bg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\r\n\t    this.bg.setAttribute(\"id\", id + \"_bg\");\r\n\t    this.bg.setAttribute(\"fill\", bgcolor);\r\n\t    this.space.appendChild(this.bg);\r\n\t  }\r\n\t\r\n\t  SVGSpace.prototype._createSpaceElement = function() {\r\n\t    this.space = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n\t    this.space.setAttribute(\"id\", this.id);\r\n\t    return this.appended = false;\r\n\t  };\r\n\t\r\n\t  SVGSpace.svgElement = function(parent, name, id) {\r\n\t    var elem;\r\n\t    if (!parent || !parent.appendChild) {\r\n\t      throw \"parent parameter needs to be a DOM node\";\r\n\t    }\r\n\t    elem = document.querySelector(\"#\" + id);\r\n\t    if (!elem) {\r\n\t      elem = document.createElementNS(\"http://www.w3.org/2000/svg\", name);\r\n\t      elem.setAttribute(\"id\", id);\r\n\t      elem.setAttribute(\"class\", id.substring(0, id.indexOf(\"-\")));\r\n\t      parent.appendChild(elem);\r\n\t    }\r\n\t    return elem;\r\n\t  };\r\n\t\r\n\t  SVGSpace.prototype.resize = function(w, h, evt) {\r\n\t    var k, p, ref;\r\n\t    this.size.set(w, h);\r\n\t    this.center = new Vector(w / 2, h / 2);\r\n\t    this.space.setAttribute(\"width\", w);\r\n\t    this.space.setAttribute(\"height\", h);\r\n\t    this.bg.setAttribute(\"width\", w);\r\n\t    this.bg.setAttribute(\"height\", h);\r\n\t    ref = this.items;\r\n\t    for (k in ref) {\r\n\t      p = ref[k];\r\n\t      if (p.onSpaceResize != null) {\r\n\t        p.onSpaceResize(w, h, evt);\r\n\t      }\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGSpace.prototype.remove = function(item) {\r\n\t    var aa, len1, t, temp;\r\n\t    temp = this.space.querySelectorAll(\".\" + SVGForm._scopeID(item));\r\n\t    for (aa = 0, len1 = temp.length; aa < len1; aa++) {\r\n\t      t = temp[aa];\r\n\t      t.parentNode.removeChild(t);\r\n\t    }\r\n\t    delete this.items[item.animateID];\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SVGSpace.prototype.removeAll = function() {\r\n\t    while (this.space.firstChild) {\r\n\t      this.space.removeChild(this.space.firstChild);\r\n\t      return this;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  return SVGSpace;\r\n\t\r\n\t})(DOMSpace);\r\n\t\r\n\tthis.SVGSpace = SVGSpace;\r\n\t\r\n\tEasing = (function() {\r\n\t  function Easing() {}\r\n\t\r\n\t  Easing.linear = function(t, b, c, d) {\r\n\t    return c * (t /= d) + b;\r\n\t  };\r\n\t\r\n\t  Easing._linear = function(t) {\r\n\t    return Easing.linear(t, 0, 1, 1);\r\n\t  };\r\n\t\r\n\t  Easing.quadIn = function(t, b, c, d) {\r\n\t    return c * (t /= d) * t + b;\r\n\t  };\r\n\t\r\n\t  Easing._quadIn = function(t) {\r\n\t    return Easing.quadIn(t, 0, 1, 1);\r\n\t  };\r\n\t\r\n\t  Easing.quadOut = function(t, b, c, d) {\r\n\t    return -c * (t /= d) * (t - 2) + b;\r\n\t  };\r\n\t\r\n\t  Easing._quadOut = function(t) {\r\n\t    return Easing.quadOut(t, 0, 1, 1);\r\n\t  };\r\n\t\r\n\t  Easing.cubicIn = function(t, b, c, d) {\r\n\t    t = t / d;\r\n\t    return c * t * t * t + b;\r\n\t  };\r\n\t\r\n\t  Easing._cubicIn = function(t) {\r\n\t    return Easing.cubicIn(t, 0, 1, 1);\r\n\t  };\r\n\t\r\n\t  Easing.cubicOut = function(t, b, c, d) {\r\n\t    t = t / d;\r\n\t    return c * ((t - 1) * t * t + 1) + b;\r\n\t  };\r\n\t\r\n\t  Easing._cubicOut = function(t) {\r\n\t    return Easing.cubicOut(t, 0, 1, 1);\r\n\t  };\r\n\t\r\n\t  Easing.elastic = function(t, b, c, d, el) {\r\n\t    var a, p, s;\r\n\t    if (el == null) {\r\n\t      el = 0.3;\r\n\t    }\r\n\t    s = 1.70158;\r\n\t    p = d * el;\r\n\t    a = c;\r\n\t    if (t === 0) {\r\n\t      return b;\r\n\t    }\r\n\t    t = t / d;\r\n\t    if (t === 1) {\r\n\t      return b + c;\r\n\t    }\r\n\t    if (a < Math.abs(c)) {\r\n\t      a = c;\r\n\t      s = p / 4;\r\n\t    } else if (a !== 0) {\r\n\t      s = p / Const.two_pi * Math.asin(c / a);\r\n\t    } else {\r\n\t      s = 0;\r\n\t    }\r\n\t    return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * Const.two_pi / p) + c + b;\r\n\t  };\r\n\t\r\n\t  Easing._elastic = function(t) {\r\n\t    return Easing.elastic(t, 0, 1, 1);\r\n\t  };\r\n\t\r\n\t  Easing.bounce = function(t, b, c, d) {\r\n\t    if ((t /= d) < (1 / 2.75)) {\r\n\t      return c * (7.5625 * t * t) + b;\r\n\t    } else if (t < (2 / 2.75)) {\r\n\t      return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\r\n\t    } else if (t < (2.5 / 2.75)) {\r\n\t      return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\r\n\t    } else {\r\n\t      return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  Easing._bounce = function(t) {\r\n\t    return Easing.bounce(t, 0, 1, 1);\r\n\t  };\r\n\t\r\n\t  return Easing;\r\n\t\r\n\t})();\r\n\t\r\n\tthis.Easing = Easing;\r\n\t\r\n\tGridCascade = (function(superClass) {\r\n\t  extend(GridCascade, superClass);\r\n\t\r\n\t  function GridCascade() {\r\n\t    GridCascade.__super__.constructor.apply(this, arguments);\r\n\t    this.startRow = 0;\r\n\t  }\r\n\t\r\n\t  GridCascade.prototype.resetLayout = function() {\r\n\t    this.layout = [];\r\n\t    return this.startRow = 0;\r\n\t  };\r\n\t\r\n\t  GridCascade.prototype.occupy = function(x, y, w, h) {\r\n\t    var aa, ab, c, r, ref, ref1, ref2, ref3;\r\n\t    for (c = aa = ref = x, ref1 = w + x; ref <= ref1 ? aa < ref1 : aa > ref1; c = ref <= ref1 ? ++aa : --aa) {\r\n\t      for (r = ab = ref2 = y, ref3 = h + y; ref2 <= ref3 ? ab < ref3 : ab > ref3; r = ref2 <= ref3 ? ++ab : --ab) {\r\n\t        if (this.layout[r] == null) {\r\n\t          this.layout[r] = [];\r\n\t        }\r\n\t        this.layout[r][c] = 1;\r\n\t      }\r\n\t    }\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  GridCascade.prototype.findStartRow = function() {\r\n\t    var aa, ab, c, index, r, ref, ref1, ref2;\r\n\t    index = this.startRow;\r\n\t    for (r = aa = ref = this.startRow, ref1 = this.rows; ref <= ref1 ? aa < ref1 : aa > ref1; r = ref <= ref1 ? ++aa : --aa) {\r\n\t      index = r;\r\n\t      for (c = ab = 0, ref2 = this.columns; 0 <= ref2 ? ab < ref2 : ab > ref2; c = 0 <= ref2 ? ++ab : --ab) {\r\n\t        if (this.layout[r] != null) {\r\n\t          if ((this.layout[r][c] == null) || this.layout[r][c] <= 0) {\r\n\t            return index;\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return index;\r\n\t  };\r\n\t\r\n\t  GridCascade.prototype.fit = function(cols, rows) {\r\n\t    var aa, ab, ac, allRowsFree, b, cell, colCount, colSize, currCol, currRow, freeCol, rc, ref, ref1, ref2, ref3, ref4;\r\n\t    colSize = Math.min(cols, this.columns);\r\n\t    for (currRow = aa = ref = this.startRow, ref1 = this.rows; ref <= ref1 ? aa < ref1 : aa > ref1; currRow = ref <= ref1 ? ++aa : --aa) {\r\n\t      colCount = colSize;\r\n\t      freeCol = 0;\r\n\t      if (currRow + rows >= this.rows) {\r\n\t        this.rows += rows;\r\n\t      }\r\n\t      if (this.layout[currRow] == null) {\r\n\t        this.layout[currRow] = [];\r\n\t      }\r\n\t      for (currCol = ab = 0, ref2 = this.columns; 0 <= ref2 ? ab < ref2 : ab > ref2; currCol = 0 <= ref2 ? ++ab : --ab) {\r\n\t        cell = this.layout[currRow][currCol];\r\n\t        if ((cell != null) && cell > 0) {\r\n\t          freeCol = currCol + 1;\r\n\t          colCount = colSize;\r\n\t        } else {\r\n\t          colCount--;\r\n\t          if (colCount === 0) {\r\n\t            allRowsFree = true;\r\n\t            if (rows > 1) {\r\n\t              for (rc = ac = ref3 = currRow, ref4 = currRow + rows; ref3 <= ref4 ? ac < ref4 : ac > ref4; rc = ref3 <= ref4 ? ++ac : --ac) {\r\n\t                if (rc <= this.rows && (this.layout[rc] != null) && this.layout[rc][freeCol] > 0) {\r\n\t                  allRowsFree = false;\r\n\t                  break;\r\n\t                }\r\n\t              }\r\n\t            }\r\n\t            if (allRowsFree) {\r\n\t              this.occupy(freeCol, currRow, colSize, rows);\r\n\t              if (currRow > this.startRow) {\r\n\t                this.startRow = this.findStartRow();\r\n\t              }\r\n\t              b = new Rectangle(this.$add(this.cell.size.$multiply(freeCol, currRow)));\r\n\t              b.resizeTo(this.cell.size.$multiply(colSize, rows));\r\n\t              return {\r\n\t                row: currRow,\r\n\t                column: freeCol,\r\n\t                columnSize: colSize,\r\n\t                rowSize: rows,\r\n\t                bound: b\r\n\t              };\r\n\t            }\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    console.error(\"cannot fit \" + currRow + \" \" + freeCol + \" \" + cols + \" \" + rows);\r\n\t    return false;\r\n\t  };\r\n\t\r\n\t  return GridCascade;\r\n\t\r\n\t})(Grid);\r\n\t\r\n\tthis.GridCascade = GridCascade;\r\n\t\r\n\tParticleEmitter = (function(superClass) {\r\n\t  extend(ParticleEmitter, superClass);\r\n\t\r\n\t  function ParticleEmitter() {\r\n\t    ParticleEmitter.__super__.constructor.apply(this, arguments);\r\n\t    this.system = null;\r\n\t    this.lastTime = 0;\r\n\t    this.period = 0;\r\n\t    this.animateID = -1;\r\n\t  }\r\n\t\r\n\t  ParticleEmitter.prototype.init = function(system) {\r\n\t    return this.system = system;\r\n\t  };\r\n\t\r\n\t  ParticleEmitter.prototype.frequency = function(f) {\r\n\t    this.period = 1000 / f;\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  ParticleEmitter.prototype.emit = function() {};\r\n\t\r\n\t  ParticleEmitter.prototype.animate = function(time, frame, ctx) {\r\n\t    if (time - this.lastTime > this.period) {\r\n\t      this.emit();\r\n\t      return this.lastTime = time;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  return ParticleEmitter;\r\n\t\r\n\t})(Vector);\r\n\t\r\n\tthis.ParticleEmitter = ParticleEmitter;\r\n\t\r\n\tParticleField = (function(superClass) {\r\n\t  extend(ParticleField, superClass);\r\n\t\r\n\t  function ParticleField() {\r\n\t    ParticleField.__super__.constructor.apply(this, arguments);\r\n\t    this.system = void 0;\r\n\t  }\r\n\t\r\n\t  ParticleField.prototype.check = function(particles, removal) {\r\n\t    var aa, len1, p, temp;\r\n\t    if (removal == null) {\r\n\t      removal = false;\r\n\t    }\r\n\t    temp = [];\r\n\t    for (aa = 0, len1 = particles.length; aa < len1; aa++) {\r\n\t      p = particles[aa];\r\n\t      if (this.hasIntersect(p)) {\r\n\t        this.work(p);\r\n\t      } else {\r\n\t        temp.push(p);\r\n\t      }\r\n\t    }\r\n\t    return (removal ? temp : particles);\r\n\t  };\r\n\t\r\n\t  ParticleField.prototype.work = function(p) {};\r\n\t\r\n\t  return ParticleField;\r\n\t\r\n\t})(Rectangle);\r\n\t\r\n\tthis.ParticleField = ParticleField;\r\n\t\r\n\tQuadTree = (function(superClass) {\r\n\t  extend(QuadTree, superClass);\r\n\t\r\n\t  function QuadTree() {\r\n\t    QuadTree.__super__.constructor.apply(this, arguments);\r\n\t    this.quads = false;\r\n\t    this.items = [];\r\n\t    this.depth = 0;\r\n\t    this.max_depth = 6;\r\n\t    this.max_items = 2;\r\n\t  }\r\n\t\r\n\t  QuadTree.prototype.getQuads = function(p, list) {\r\n\t    var k, q, ref;\r\n\t    if (list == null) {\r\n\t      list = [];\r\n\t    }\r\n\t    if (this.intersectPoint(p)) {\r\n\t      list.push(this);\r\n\t      if (this.quads) {\r\n\t        ref = this.quads;\r\n\t        for (k in ref) {\r\n\t          q = ref[k];\r\n\t          if (q.intersectPoint(p)) {\r\n\t            q.getQuads(p, list);\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return list;\r\n\t  };\r\n\t\r\n\t  QuadTree.prototype.getItems = function(p) {\r\n\t    var k, q, ref;\r\n\t    if (this.intersectPoint(p)) {\r\n\t      if (!this.quads) {\r\n\t        return this.items;\r\n\t      }\r\n\t      if (this.quads) {\r\n\t        ref = this.quads;\r\n\t        for (k in ref) {\r\n\t          q = ref[k];\r\n\t          if (q.intersectPoint(p)) {\r\n\t            return q.getItems(p);\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return [];\r\n\t  };\r\n\t\r\n\t  QuadTree.prototype.addToQuad = function(item) {\r\n\t    var _depth, k, q, ref;\r\n\t    if (!item) {\r\n\t      return -1;\r\n\t    }\r\n\t    if (this.quads) {\r\n\t      ref = this.quads;\r\n\t      for (k in ref) {\r\n\t        q = ref[k];\r\n\t        _depth = q.addToQuad(item);\r\n\t        if (_depth > 0) {\r\n\t          return _depth;\r\n\t        }\r\n\t      }\r\n\t      return -1;\r\n\t    }\r\n\t    if (!this.quads && this.intersectPoint(item)) {\r\n\t      if (this.items.length >= this.max_items) {\r\n\t        if (this.depth < this.max_depth) {\r\n\t          this.splitQuad();\r\n\t          return this.addToQuad(item);\r\n\t        } else {\r\n\t          return -1;\r\n\t        }\r\n\t      } else {\r\n\t        this.items.push(item);\r\n\t        return this.depth;\r\n\t      }\r\n\t    }\r\n\t    return -1;\r\n\t  };\r\n\t\r\n\t  QuadTree.prototype.splitQuad = function() {\r\n\t    var _depth, aa, ab, i, item, k, len1, len2, q, ref, ref1, ref2, results, t;\r\n\t    this.quads = this.quadrants();\r\n\t    ref = this.quads;\r\n\t    for (k in ref) {\r\n\t      q = ref[k];\r\n\t      q.depth = this.depth + 1;\r\n\t    }\r\n\t    ref1 = this.items;\r\n\t    for (i = aa = 0, len1 = ref1.length; aa < len1; i = ++aa) {\r\n\t      item = ref1[i];\r\n\t      _depth = this.addToQuad(item);\r\n\t      if (_depth > this.depth) {\r\n\t        this.items[i] = null;\r\n\t      }\r\n\t    }\r\n\t    ref2 = this.items;\r\n\t    results = [];\r\n\t    for (ab = 0, len2 = ref2.length; ab < len2; ab++) {\r\n\t      t = ref2[ab];\r\n\t      if (!t) {\r\n\t        results.push(this.items.splice(t, 1));\r\n\t      } else {\r\n\t        results.push(void 0);\r\n\t      }\r\n\t    }\r\n\t    return results;\r\n\t  };\r\n\t\r\n\t  QuadTree.prototype.resetQuad = function() {\r\n\t    var k, q, ref;\r\n\t    this.items = [];\r\n\t    if (this.quads) {\r\n\t      ref = this.quads;\r\n\t      for (k in ref) {\r\n\t        q = ref[k];\r\n\t        q.resetQuad();\r\n\t      }\r\n\t      return this.quads = false;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  return QuadTree;\r\n\t\r\n\t})(Rectangle);\r\n\t\r\n\tthis.QuadTree = QuadTree;\r\n\t\r\n\tSamplePoints = (function(superClass) {\r\n\t  extend(SamplePoints, superClass);\r\n\t\r\n\t  function SamplePoints() {\r\n\t    SamplePoints.__super__.constructor.apply(this, arguments);\r\n\t    this.bestcandidate = null;\r\n\t    this.poisson = null;\r\n\t    this.bound = null;\r\n\t    this.boundsize = null;\r\n\t  }\r\n\t\r\n\t  SamplePoints.prototype.setBounds = function(b, anchor) {\r\n\t    if (anchor == null) {\r\n\t      anchor = false;\r\n\t    }\r\n\t    if (anchor) {\r\n\t      this.set(b);\r\n\t    }\r\n\t    this.bound = new Rectangle(this).size(b.size());\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SamplePoints.prototype.bestCandidateSampler = function() {\r\n\t    this.points = [];\r\n\t    if (!this.bound) {\r\n\t      this.bound = new Rectangle().size(500, 500);\r\n\t    }\r\n\t    this.boundsize = this.bound.size();\r\n\t    this.bestcandidate = {\r\n\t      halfsize: this.boundsize.$divide(2),\r\n\t      quartersize: this.boundsize.$divide(4),\r\n\t      maxDist: this.boundsize.x * this.boundsize.x + this.boundsize.y * this.boundsize.y\r\n\t    };\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SamplePoints.prototype.poissonSampler = function(radius) {\r\n\t    var cellsize;\r\n\t    this.points = [];\r\n\t    if (!this.bound) {\r\n\t      this.bound = new Rectangle().size(500, 500);\r\n\t    }\r\n\t    this.boundsize = this.bound.size();\r\n\t    cellsize = radius * Math.SQRT1_2;\r\n\t    this.poisson = {\r\n\t      grid: [],\r\n\t      gridWidth: Math.ceil(this.boundsize.x / cellsize),\r\n\t      gridHeight: Math.ceil(this.boundsize.y / cellsize),\r\n\t      cellSize: cellsize,\r\n\t      radius: radius,\r\n\t      radius2: radius * radius,\r\n\t      R: 3 * radius * radius,\r\n\t      queue: [],\r\n\t      queueSize: 0,\r\n\t      sampleSize: 0,\r\n\t      sincos: Util.sinCosTable()\r\n\t    };\r\n\t    return this;\r\n\t  };\r\n\t\r\n\t  SamplePoints.prototype.sample = function(numSamples, type) {\r\n\t    var a, aa, ab, best, bestDist, i, j, nearest, p, r, ref, ref1, s, x, y;\r\n\t    if (numSamples == null) {\r\n\t      numSamples = 10;\r\n\t    }\r\n\t    if (type == null) {\r\n\t      type = false;\r\n\t    }\r\n\t    if (this.poisson && type === 'poisson') {\r\n\t      if (this.poisson.sampleSize > 0 && this.poisson.queueSize === 0) {\r\n\t        return false;\r\n\t      }\r\n\t      if (!this.poisson.sampleSize) {\r\n\t        return this._poissonSample(this.bound.x + this.boundsize.x / 2, this.bound.y + this.boundsize.y / 2);\r\n\t      }\r\n\t      while (this.poisson.queueSize) {\r\n\t        i = Math.floor(Math.random() * this.poisson.queueSize);\r\n\t        s = this.poisson.queue[i];\r\n\t        for (j = aa = 0, ref = numSamples; aa < ref; j = aa += 1) {\r\n\t          a = Math.floor(360 * Math.random());\r\n\t          r = Math.sqrt(Math.random() * this.poisson.R + this.poisson.radius2);\r\n\t          x = s.x + r * this.poisson.sincos.cos[a];\r\n\t          y = s.y + r * this.poisson.sincos.sin[a];\r\n\t          if (x >= this.bound.x && x < this.boundsize.x && y >= this.bound.y && y < this.boundsize.y && this._poissonCheck(x, y)) {\r\n\t            return this._poissonSample(x, y);\r\n\t          }\r\n\t        }\r\n\t        this.poisson.queue[i] = this.poisson.queue[--this.poisson.queueSize];\r\n\t        this.poisson.queue.length = this.poisson.queueSize;\r\n\t      }\r\n\t      return true;\r\n\t    } else if (this.bestcandidate) {\r\n\t      best = null;\r\n\t      bestDist = -1;\r\n\t      for (i = ab = 0, ref1 = numSamples; ab < ref1; i = ab += 1) {\r\n\t        p = new Vector(this.bound.x + this.boundsize.x * Math.random(), this.bound.y + this.boundsize.y * Math.random());\r\n\t        if (this.points.length === 0) {\r\n\t          best = p;\r\n\t          break;\r\n\t        } else {\r\n\t          nearest = this._bestCandidateCheck(p);\r\n\t          if (nearest > bestDist) {\r\n\t            best = p;\r\n\t            bestDist = nearest;\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t      if (best) {\r\n\t        this.points.push(best);\r\n\t      }\r\n\t      return best;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  SamplePoints.prototype._bestCandidateCheck = function(p) {\r\n\t    var _dist, aa, dist, dx, dy, halfbound, it, len1, matches, w;\r\n\t    _dist = this.bestcandidate.maxDist;\r\n\t    halfbound = new Rectangle(p.x - this.bestcandidate.quartersize.x, p.y - this.bestcandidate.quartersize.y).size(this.bestcandidate.halfsize.x, this.bestcandidate.halfsize.y);\r\n\t    matches = (function() {\r\n\t      var aa, len1, ref, results;\r\n\t      ref = this.points;\r\n\t      results = [];\r\n\t      for (aa = 0, len1 = ref.length; aa < len1; aa++) {\r\n\t        it = ref[aa];\r\n\t        if (halfbound.intersectPoint(it)) {\r\n\t          results.push(it);\r\n\t        }\r\n\t      }\r\n\t      return results;\r\n\t    }).call(this);\r\n\t    for (aa = 0, len1 = matches.length; aa < len1; aa++) {\r\n\t      w = matches[aa];\r\n\t      dx = w.x - p.x;\r\n\t      dy = w.y - p.y;\r\n\t      dist = dx * dx + dy * dy;\r\n\t      if (dist < _dist) {\r\n\t        _dist = dist;\r\n\t      }\r\n\t    }\r\n\t    return _dist;\r\n\t  };\r\n\t\r\n\t  SamplePoints.prototype._poissonSample = function(x, y) {\r\n\t    var s;\r\n\t    s = new Point(x, y);\r\n\t    this.poisson.queue.push(s);\r\n\t    this.poisson.grid[this.poisson.gridWidth * (y / this.poisson.cellSize | 0) + (x / this.poisson.cellSize | 0)] = s;\r\n\t    this.poisson.sampleSize++;\r\n\t    this.poisson.queueSize++;\r\n\t    return s;\r\n\t  };\r\n\t\r\n\t  SamplePoints.prototype._poissonCheck = function(x, y) {\r\n\t    var aa, ab, dx, dy, i, i0, i1, j, j0, j1, o, ref, ref1, ref2, ref3, s;\r\n\t    i = Math.floor(x / this.poisson.cellSize);\r\n\t    j = Math.floor(y / this.poisson.cellSize);\r\n\t    i0 = Math.max(i - 2, 0);\r\n\t    j0 = Math.max(j - 2, 0);\r\n\t    i1 = Math.min(i + 3, this.poisson.gridWidth);\r\n\t    j1 = Math.min(j + 3, this.poisson.gridHeight);\r\n\t    for (j = aa = ref = j0, ref1 = j1; aa < ref1; j = aa += 1) {\r\n\t      o = j * this.poisson.gridWidth;\r\n\t      for (i = ab = ref2 = i0, ref3 = i1; ab < ref3; i = ab += 1) {\r\n\t        s = this.poisson.grid[o + i];\r\n\t        if (s) {\r\n\t          dx = s.x - x;\r\n\t          dy = s.y - y;\r\n\t          if (dx * dx + dy * dy < this.poisson.radius2) {\r\n\t            return false;\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return true;\r\n\t  };\r\n\t\r\n\t  SamplePoints.bestCandidate = function(bound, items, samples) {\r\n\t    var _nearest, aa, best, bestDist, halfsize, i, maxDist, nearest, p, quartersize, ref, size;\r\n\t    if (samples == null) {\r\n\t      samples = 10;\r\n\t    }\r\n\t    size = bound.size();\r\n\t    halfsize = size.$divide(2);\r\n\t    quartersize = size.$divide(4);\r\n\t    maxDist = size.x * size.x + size.y * size.y;\r\n\t    _nearest = function(p) {\r\n\t      var _dist, aa, dist, dx, dy, halfbound, it, len1, matches, w;\r\n\t      _dist = maxDist;\r\n\t      halfbound = new Rectangle(p.x - quartersize.x, p.y - quartersize.y).size(halfsize.x, halfsize.y);\r\n\t      matches = (function() {\r\n\t        var aa, len1, results;\r\n\t        results = [];\r\n\t        for (aa = 0, len1 = items.length; aa < len1; aa++) {\r\n\t          it = items[aa];\r\n\t          if (halfbound.intersetPoint(it)) {\r\n\t            results.push(it);\r\n\t          }\r\n\t        }\r\n\t        return results;\r\n\t      })();\r\n\t      for (aa = 0, len1 = matches.length; aa < len1; aa++) {\r\n\t        w = matches[aa];\r\n\t        dx = w.x - p.x;\r\n\t        dy = w.y - p.y;\r\n\t        dist = dx * dx + dy * dy;\r\n\t        if (dist < _dist) {\r\n\t          _dist = dist;\r\n\t        }\r\n\t      }\r\n\t      return _dist;\r\n\t    };\r\n\t    best = null;\r\n\t    bestDist = -1;\r\n\t    for (i = aa = 0, ref = samples; 0 <= ref ? aa < ref : aa > ref; i = 0 <= ref ? ++aa : --aa) {\r\n\t      p = new Vector(bound.x + size.x * Math.random(), bound.y + size.y * Math.random());\r\n\t      if (items.length === 0) {\r\n\t        return p;\r\n\t      } else {\r\n\t        nearest = _nearest(p);\r\n\t        if (nearest > bestDist) {\r\n\t          best = p;\r\n\t          bestDist = nearest;\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return best;\r\n\t  };\r\n\t\r\n\t  return SamplePoints;\r\n\t\r\n\t})(PointSet);\r\n\t\r\n\tthis.SamplePoints = SamplePoints;\r\n\t\r\n\tStripeBound = (function(superClass) {\r\n\t  extend(StripeBound, superClass);\r\n\t\r\n\t  function StripeBound() {\r\n\t    StripeBound.__super__.constructor.apply(this, arguments);\r\n\t    this.frequency = new Point();\r\n\t    this.stripes = new Point();\r\n\t    this.method = 'frequency';\r\n\t    this.mask = null;\r\n\t  }\r\n\t\r\n\t  StripeBound.prototype.setFrequency = function(x, y) {\r\n\t    this.frequency = new Vector(x, y);\r\n\t    return this.method = 'frequency';\r\n\t  };\r\n\t\r\n\t  StripeBound.prototype.setStripes = function(x, y) {\r\n\t    this.stripes = new Point(x, y);\r\n\t    return this.method = 'stripes';\r\n\t  };\r\n\t\r\n\t  StripeBound.prototype.getStripes = function() {\r\n\t    var aa, ab, d, diff, dx, dy, freq, p, ref, ref1, result, size;\r\n\t    size = this.size();\r\n\t    result = {\r\n\t      columns: [],\r\n\t      rows: []\r\n\t    };\r\n\t    freq = this.method === 'frequency' ? this.frequency.clone() : size.$divide(this.stripes).floor();\r\n\t    diff = size.$divide(freq);\r\n\t    for (d = aa = 0, ref = freq.y - 1; 0 <= ref ? aa <= ref : aa >= ref; d = 0 <= ref ? ++aa : --aa) {\r\n\t      dy = diff.y * d;\r\n\t      p = new Pair(0, dy).to(size.x, dy + diff.y).add(this);\r\n\t      p.p1.add(this);\r\n\t      result.rows.push(p);\r\n\t    }\r\n\t    for (d = ab = 0, ref1 = freq.x - 1; 0 <= ref1 ? ab <= ref1 : ab >= ref1; d = 0 <= ref1 ? ++ab : --ab) {\r\n\t      dx = diff.x * d;\r\n\t      p = new Pair(dx, 0).to(dx + diff.x + 0.5, size.y).add(this);\r\n\t      p.p1.add(this);\r\n\t      result.columns.push(p);\r\n\t    }\r\n\t    return result;\r\n\t  };\r\n\t\r\n\t  StripeBound.prototype.getStripeLines = function() {\r\n\t    var aa, ab, d, diff, dx, dy, freq, p, ref, ref1, result, size;\r\n\t    size = this.size();\r\n\t    result = {\r\n\t      columns: [],\r\n\t      rows: []\r\n\t    };\r\n\t    freq = this.method === 'frequency' ? this.frequency.clone() : size.$divide(this.stripes).floor();\r\n\t    diff = size.$divide(freq);\r\n\t    for (d = aa = 0, ref = freq.y; 0 <= ref ? aa <= ref : aa >= ref; d = 0 <= ref ? ++aa : --aa) {\r\n\t      dy = diff.y * d;\r\n\t      p = new Pair(0, dy).to(size.x, dy).add(this);\r\n\t      p.p1.add(this);\r\n\t      result.rows.push(p);\r\n\t    }\r\n\t    for (d = ab = 0, ref1 = freq.x; 0 <= ref1 ? ab <= ref1 : ab >= ref1; d = 0 <= ref1 ? ++ab : --ab) {\r\n\t      dx = diff.x * d;\r\n\t      p = new Pair(dx, 0).to(dx, size.y).add(this);\r\n\t      p.p1.add(this);\r\n\t      result.columns.push(p);\r\n\t    }\r\n\t    return result;\r\n\t  };\r\n\t\r\n\t  StripeBound.prototype.setMask = function(w, h, anchor) {\r\n\t    var diff, sz;\r\n\t    if (anchor == null) {\r\n\t      anchor = false;\r\n\t    }\r\n\t    this.mask = new Rectangle(this.x, this.y);\r\n\t    sz = this.size();\r\n\t    if (!anchor) {\r\n\t      diff = sz.$subtract(w, h).divide(2);\r\n\t      anchor = new Point(this.x + diff.x, this.y + diff.y);\r\n\t    } else {\r\n\t      anchor = this.$add(anchor);\r\n\t    }\r\n\t    return this.mask.set(anchor.x, anchor.y).size(w, h);\r\n\t  };\r\n\t\r\n\t  StripeBound.prototype.anchorMask = function() {\r\n\t    var d;\r\n\t    d = this.$subtract(this.mask);\r\n\t    this.moveBy(d);\r\n\t    return this.mask.moveBy(d);\r\n\t  };\r\n\t\r\n\t  return StripeBound;\r\n\t\r\n\t})(Rectangle);\r\n\t\r\n\tthis.StripeBound = StripeBound;\r\n\t\r\n\tUI = (function(superClass) {\r\n\t  extend(UI, superClass);\r\n\t\r\n\t  UI.dragTarget = null;\r\n\t\r\n\t  function UI() {\r\n\t    UI.__super__.constructor.apply(this, arguments);\r\n\t    this.dragging = false;\r\n\t  }\r\n\t\r\n\t  UI.prototype.animate = function(time, frame, ctx) {\r\n\t    ctx.fillStyle = '#f00';\r\n\t    return Form.rect(ctx, this);\r\n\t  };\r\n\t\r\n\t  UI.prototype.onMouseAction = function(type, x, y, evt) {\r\n\t    if (this.intersectPoint(x, y)) {\r\n\t      if (type === 'drag' && !UI.dragTarget) {\r\n\t        this.dragging = true;\r\n\t        UI.dragTarget = this;\r\n\t      }\r\n\t    }\r\n\t    if (this.dragging && type === 'move') {\r\n\t      this.moveTo(x, y).moveBy(this.size().multiply(-0.5));\r\n\t    }\r\n\t    if (type === 'drop') {\r\n\t      this.dragging = false;\r\n\t      return UI.dragTarget = null;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  return UI;\r\n\t\r\n\t})(Rectangle);\r\n\t\r\n\tthis.UI = UI;\r\n\t\r\n\tNoise = (function(superClass) {\r\n\t  extend(Noise, superClass);\r\n\t\r\n\t  Noise.prototype.grad3 = [[1, 1, 0], [-1, 1, 0], [1, -1, 0], [-1, -1, 0], [1, 0, 1], [-1, 0, 1], [1, 0, -1], [-1, 0, -1], [0, 1, 1], [0, -1, 1], [0, 1, -1], [0, -1, -1]];\r\n\t\r\n\t  Noise.prototype.simplex = [[0, 1, 2, 3], [0, 1, 3, 2], [0, 0, 0, 0], [0, 2, 3, 1], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [1, 2, 3, 0], [0, 2, 1, 3], [0, 0, 0, 0], [0, 3, 1, 2], [0, 3, 2, 1], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [1, 3, 2, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [1, 2, 0, 3], [0, 0, 0, 0], [1, 3, 0, 2], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [2, 3, 0, 1], [2, 3, 1, 0], [1, 0, 2, 3], [1, 0, 3, 2], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [2, 0, 3, 1], [0, 0, 0, 0], [2, 1, 3, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [2, 0, 1, 3], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [3, 0, 1, 2], [3, 0, 2, 1], [0, 0, 0, 0], [3, 1, 2, 0], [2, 1, 0, 3], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [3, 1, 0, 2], [0, 0, 0, 0], [3, 2, 0, 1], [3, 2, 1, 0]];\r\n\t\r\n\t  function Noise() {\r\n\t    var i;\r\n\t    Noise.__super__.constructor.apply(this, arguments);\r\n\t    this.p = [151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9, 129, 22, 39, 253, 9, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180];\r\n\t    this.perm = (function() {\r\n\t      var aa, results;\r\n\t      results = [];\r\n\t      for (i = aa = 0; aa < 512; i = ++aa) {\r\n\t        results.push(this.p[i & 255]);\r\n\t      }\r\n\t      return results;\r\n\t    }).call(this);\r\n\t  }\r\n\t\r\n\t  Noise.prototype.seed = function(seed) {\r\n\t    var aa, i, results, v;\r\n\t    if (seed > 0 && seed < 1) {\r\n\t      seed *= 65536;\r\n\t    }\r\n\t    seed = Math.floor(seed);\r\n\t    if (seed < 256) {\r\n\t      seed |= seed << 8;\r\n\t    }\r\n\t    results = [];\r\n\t    for (i = aa = 0; aa <= 255; i = ++aa) {\r\n\t      v = i & 1 ? this.p[i] ^ (seed & 255) : this.p[i] ^ ((seed >> 8) & 255);\r\n\t      results.push(this.perm[i] = this.perm[i + 256] = v);\r\n\t    }\r\n\t    return results;\r\n\t  };\r\n\t\r\n\t  Noise.prototype._dot = function(g, x, y) {\r\n\t    return g[0] * x + g[1] * y;\r\n\t  };\r\n\t\r\n\t  Noise.prototype.perlin2d = function(xin, yin) {\r\n\t    var _fade, i, j, n00, n01, n10, n11, tx, x, y;\r\n\t    if (xin == null) {\r\n\t      xin = this.x;\r\n\t    }\r\n\t    if (yin == null) {\r\n\t      yin = this.y;\r\n\t    }\r\n\t    _fade = function(f) {\r\n\t      return f * f * f * (f * (f * 6 - 15) + 10);\r\n\t    };\r\n\t    i = Math.floor(xin) % 255;\r\n\t    j = Math.floor(yin) % 255;\r\n\t    x = xin - i;\r\n\t    y = yin - j;\r\n\t    n00 = this._dot(this.grad3[(i + this.perm[j]) % 12], x, y);\r\n\t    n01 = this._dot(this.grad3[(i + this.perm[j + 1]) % 12], x, y - 1);\r\n\t    n10 = this._dot(this.grad3[(i + 1 + this.perm[j]) % 12], x - 1, y);\r\n\t    n11 = this._dot(this.grad3[(i + 1 + this.perm[j + 1]) % 12], x - 1, y - 1);\r\n\t    tx = _fade(x);\r\n\t    return Util.lerp(Util.lerp(n00, n10, tx), Util.lerp(n01, n11, tx), _fade(y));\r\n\t  };\r\n\t\r\n\t  Noise.prototype.simplex2d = function(xin, yin) {\r\n\t    var F2, G2, X0, Y0, gi0, gi1, gi2, i, i1, ii, j, j1, jj, n0, n1, n2, s, t, t0, t1, t2, x0, x1, x2, y0, y1, y2;\r\n\t    if (xin == null) {\r\n\t      xin = this.x;\r\n\t    }\r\n\t    if (yin == null) {\r\n\t      yin = this.y;\r\n\t    }\r\n\t    F2 = 0.5 * (Math.sqrt(3.0) - 1.0);\r\n\t    s = (xin + yin) * F2;\r\n\t    i = Math.floor(xin + s);\r\n\t    j = Math.floor(yin + s);\r\n\t    G2 = (3.0 - Math.sqrt(3.0)) / 6.0;\r\n\t    t = (i + j) * G2;\r\n\t    X0 = i - t;\r\n\t    Y0 = j - t;\r\n\t    x0 = xin - X0;\r\n\t    y0 = yin - Y0;\r\n\t    if (x0 > y0) {\r\n\t      i1 = 1;\r\n\t      j1 = 0;\r\n\t    } else {\r\n\t      i1 = 0;\r\n\t      j1 = 1;\r\n\t    }\r\n\t    x1 = x0 - i1 + G2;\r\n\t    y1 = y0 - j1 + G2;\r\n\t    x2 = x0 - 1.0 + 2.0 * G2;\r\n\t    y2 = y0 - 1.0 + 2.0 * G2;\r\n\t    ii = i & 255;\r\n\t    jj = j & 255;\r\n\t    gi0 = this.perm[ii + this.perm[jj]] % 12;\r\n\t    gi1 = this.perm[ii + i1 + this.perm[jj + j1]] % 12;\r\n\t    gi2 = this.perm[ii + 1 + this.perm[jj + 1]] % 12;\r\n\t    t0 = 0.5 - x0 * x0 - y0 * y0;\r\n\t    if (t0 < 0) {\r\n\t      n0 = 0.0;\r\n\t    } else {\r\n\t      t0 *= t0;\r\n\t      n0 = t0 * t0 * this._dot(this.grad3[gi0], x0, y0);\r\n\t    }\r\n\t    t1 = 0.5 - x1 * x1 - y1 * y1;\r\n\t    if (t1 < 0) {\r\n\t      n1 = 0.0;\r\n\t    } else {\r\n\t      t1 *= t1;\r\n\t      n1 = t1 * t1 * this._dot(this.grad3[gi1], x1, y1);\r\n\t    }\r\n\t    t2 = 0.5 - x2 * x2 - y2 * y2;\r\n\t    if (t2 < 0) {\r\n\t      n2 = 0.0;\r\n\t    } else {\r\n\t      t2 *= t2;\r\n\t      n2 = t2 * t2 * this._dot(this.grad3[gi2], x2, y2);\r\n\t    }\r\n\t    return 70.0 * (n0 + n1 + n2);\r\n\t  };\r\n\t\r\n\t  return Noise;\r\n\t\r\n\t})(Vector);\r\n\t\r\n\t//# sourceMappingURL=pt.js.map\r\n\t}).call(Pt); module.exports = Pt;\n\n/***/ },\n/* 67 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(64);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(65);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _ColorfulTriangle = __webpack_require__(68);\n\t\n\tvar _ColorfulTriangle2 = _interopRequireDefault(_ColorfulTriangle);\n\t\n\tvar _Force = __webpack_require__(69);\n\t\n\tvar _Force2 = _interopRequireDefault(_Force);\n\t\n\tvar _ColorfulPoint = __webpack_require__(70);\n\t\n\tvar _ColorfulPoint2 = _interopRequireDefault(_ColorfulPoint);\n\t\n\tvar _ptjs = __webpack_require__(66);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar PointsMatrix = function () {\n\t    function PointsMatrix(width, height, step, baseColor, colorInterpolationMode, forceField, offsetX) {\n\t        (0, _classCallCheck3.default)(this, PointsMatrix);\n\t\n\t        this._matrix = this.generateMatrix(width, height, step, colorInterpolationMode, forceField, offsetX);\n\t        this._colorInterpolationMode = colorInterpolationMode;\n\t        this._baseColor = baseColor;\n\t    }\n\t\n\t    (0, _createClass3.default)(PointsMatrix, [{\n\t        key: 'generateMatrix',\n\t        value: function generateMatrix(width, height, step, colorInterpolationMode, forceField, offsetX) {\n\t            var forces = forceField.getForces();\n\t            this._forces = forces;\n\t            var matrix = [];\n\t            for (var x = 0; x <= Math.ceil((width + 4 * step) / step); x++) {\n\t                var column = [];\n\t                for (var y = 0; y <= Math.ceil(height / step); y++) {\n\t                    var xCoord = x * step + (offsetX % step * 2 - step * 2);\n\t                    var yCoord = y * step + x % 2 * step / 2;\n\t\n\t                    var _applyForcesToPoint2 = this._applyForcesToPoint(xCoord, yCoord, forces, colorInterpolationMode);\n\t\n\t                    var newX = _applyForcesToPoint2.newX;\n\t                    var newY = _applyForcesToPoint2.newY;\n\t                    var colorSum = _applyForcesToPoint2.colorSum;\n\t\n\t                    column.push(new _ColorfulPoint2.default(newX, newY, colorSum));\n\t                }\n\t                matrix.push(column);\n\t            }\n\t            return matrix;\n\t        }\n\t    }, {\n\t        key: '_applyForcesToPoint',\n\t        value: function _applyForcesToPoint(x, y, forces, colorInterpolationMode) {\n\t            var vectorsXSum = 0;\n\t            var vectorsYSum = 0;\n\t            var colorSum = [0, 0, 0, 0];\n\t            for (var i in forces) {\n\t                var _forces$i$getForceAtP = forces[i].getForceAtPoint(x, y);\n\t\n\t                var forceX = _forces$i$getForceAtP.forceX;\n\t                var forceY = _forces$i$getForceAtP.forceY;\n\t                var color = _forces$i$getForceAtP.color;\n\t\n\t                if (forces[i].influencePosition) {\n\t                    vectorsXSum += forces[i].axis == \"y\" ? 0 : forceX;\n\t                    vectorsYSum += forces[i].axis == \"x\" ? 0 : forceY;\n\t                }\n\t\n\t                if (forces[i].influenceColor) {\n\t                    var colorInterpolationFunction;\n\t                    switch (colorInterpolationMode) {\n\t                        case \"subtraction\":\n\t                            colorInterpolationFunction = function colorInterpolationFunction(currentCoord, i) {\n\t                                return currentCoord - color[i];\n\t                            };\n\t                            break;\n\t                        default:\n\t                            colorInterpolationFunction = function colorInterpolationFunction(currentCoord, i) {\n\t                                return currentCoord + color[i];\n\t                            };\n\t                            break;\n\t                    }\n\t                    colorSum = colorSum.map(colorInterpolationFunction);\n\t                }\n\t            }\n\t\n\t            var newX = x + vectorsXSum;\n\t            var newY = y + vectorsYSum;\n\t            return { newX: newX, newY: newY, colorSum: colorSum };\n\t        }\n\t    }, {\n\t        key: 'getMatrix',\n\t        value: function getMatrix() {\n\t            return this._matrix;\n\t        }\n\t    }, {\n\t        key: 'getFlattenedMatrix',\n\t        value: function getFlattenedMatrix() {\n\t            var result = [];\n\t            for (var i in this._matrix) {\n\t                result = result.concat(this._matrix[i]);\n\t            }\n\t            return result;\n\t        }\n\t    }, {\n\t        key: 'getTriangle',\n\t        value: function getTriangle(anchor, pointA, pointB) {\n\t            var anchorPoint = this._matrix[anchor[0]] ? this._matrix[anchor[0]][anchor[1]] : undefined;\n\t            var nextColPoint = this._matrix[pointA[0]] ? this._matrix[pointA[0]][pointA[1]] : undefined;\n\t            var nextRowPoint = this._matrix[pointB[0]] ? this._matrix[pointB[0]][pointB[1]] : undefined;\n\t\n\t            if (!anchorPoint || !nextColPoint || !nextRowPoint) return;else return new _ColorfulTriangle2.default(anchorPoint, nextColPoint, nextRowPoint, this._colorInterpolationMode, this._baseColor);\n\t        }\n\t    }, {\n\t        key: 'getTiles',\n\t        value: function getTiles(pattern, padding) {\n\t            var tiles = [];\n\t            for (var col = padding[3]; col < this._matrix.length - 1 - padding[1]; col++) {\n\t                var even = !(col % 2);\n\t                for (var row = padding[0]; row < this._matrix[col].length - 1 - padding[2]; row++) {\n\t                    if (!even) {\n\t                        for (var t in pattern) {\n\t                            var points = pattern[t];\n\t                            if (points.length == 3) {\n\t                                var result = this.getTriangle([col + points[0][0], row + points[0][1]], [col + points[1][0], row + points[1][1]], [col + points[2][0], row + points[2][1]]);\n\t                                if (result) tiles.push(result);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            return tiles;\n\t        }\n\t    }]);\n\t    return PointsMatrix;\n\t}();\n\t\n\texports.default = PointsMatrix;\n\n/***/ },\n/* 68 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(64);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(65);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _ptjs = __webpack_require__(66);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar ColorfulTriangle = function () {\n\t    function ColorfulTriangle(anchorPoint, nextColPoint, nextRowPoint, colorInterpolationMode, baseColor) {\n\t        (0, _classCallCheck3.default)(this, ColorfulTriangle);\n\t\n\t        this.concept = new _ptjs.Triangle(anchorPoint.concept).to(nextColPoint.concept, nextRowPoint.concept);\n\t        this.color = this.getColor([anchorPoint, nextColPoint, nextRowPoint], colorInterpolationMode, baseColor);\n\t    }\n\t\n\t    (0, _createClass3.default)(ColorfulTriangle, [{\n\t        key: 'getColor',\n\t        value: function getColor(points, colorInterpolationMode, baseColor) {\n\t            return points.reduce(function (result, point) {\n\t                var color = point.color ? point.color.map(function (c) {\n\t                    return c / points.length;\n\t                }) : baseColor;\n\t                return result.map(function (c, i) {\n\t                    return c + color[i];\n\t                });\n\t            }, baseColor);\n\t        }\n\t    }]);\n\t    return ColorfulTriangle;\n\t}();\n\t\n\texports.default = ColorfulTriangle;\n\n/***/ },\n/* 69 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(64);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(65);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _ptjs = __webpack_require__(66);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Force = function () {\n\t    function Force(x, y, direction, intensity, color, width, height, decay, invert, influenceColor, influencePosition, axis) {\n\t        (0, _classCallCheck3.default)(this, Force);\n\t\n\t        this._x = x;\n\t        this._y = y;\n\t        this._vector = new _ptjs.Vector(this._x, this._y);\n\t        this._direction = direction;\n\t        this._intensity = intensity;\n\t        this._color = color;\n\t        this._decay = decay;\n\t        this._invert = invert;\n\t\n\t        this._width = width;\n\t        this._height = height;\n\t\n\t        this.axis = axis;\n\t        this.influenceColor = influenceColor;\n\t        this.influencePosition = influencePosition;\n\t    }\n\t\n\t    (0, _createClass3.default)(Force, [{\n\t        key: \"getForceRadius\",\n\t        value: function getForceRadius() {\n\t            var smallestDimension = Math.min(this._width, this._height);\n\t            return smallestDimension / 200 * this._intensity;\n\t        }\n\t    }, {\n\t        key: \"getForceAtPoint\",\n\t        value: function getForceAtPoint(x, y) {\n\t            var pointVector = new _ptjs.Vector(x, y);\n\t            var forceToPointVector = pointVector.$subtract(this._vector);\n\t            var distance = forceToPointVector.magnitude();\n\t\n\t            var forceRadius = this.getForceRadius();\n\t\n\t            var forceDecay;\n\t            if (distance > forceRadius) {\n\t                if (this._invert) forceDecay = 1;else forceDecay = 0;\n\t            } else {\n\t                var x = (forceRadius - Math.min(forceRadius, Math.abs(distance))) / (forceRadius || 1);\n\t                if (this._invert) x = 1 - x;\n\t                switch (this._decay) {\n\t                    case \"cosine\":\n\t                        forceDecay = Math.pow(Math.cos(Math.PI * (1 - x) / 2), 10);\n\t                        break;\n\t                    case \"clipping_power\":\n\t                        forceDecay = Math.pow(Math.max(0, Math.abs(x) * 2 - 1), 3);\n\t                        break;\n\t                    case \"sine\":\n\t                        forceDecay = Math.pow(Math.abs(Math.sin(Math.PI * x / 2)), 0.5);\n\t                        break;\n\t                    default:\n\t                        forceDecay = x;\n\t                        break;\n\t                }\n\t            }\n\t\n\t            var normalizedVector = forceToPointVector.$normalize();\n\t\n\t            var vectorX = new _ptjs.Vector(1, 0);\n\t            var vectorY = new _ptjs.Vector(0, 1);\n\t            var forceX = forceRadius * forceDecay * vectorX.projection(normalizedVector).x;\n\t            var forceY = forceRadius * forceDecay * vectorY.projection(normalizedVector).y;\n\t\n\t            var color = this._color.map(function (colorCoord) {\n\t                return colorCoord * forceDecay;\n\t            });\n\t            return { forceX: forceX, forceY: forceY, color: color };\n\t        }\n\t    }]);\n\t    return Force;\n\t}();\n\t\n\texports.default = Force;\n\n/***/ },\n/* 70 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(64);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _ptjs = __webpack_require__(66);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar ColorfulPoint = function ColorfulPoint(x, y, color) {\n\t    (0, _classCallCheck3.default)(this, ColorfulPoint);\n\t\n\t    this._x = x;\n\t    this._y = y;\n\t    this.color = color;\n\t    this.concept = new _ptjs.Point(x, y);\n\t};\n\t\n\texports.default = ColorfulPoint;\n\n/***/ },\n/* 71 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar brokenGlass = [[[0, 0], [1, 0], [1, 1]], [[0, 0], [-1, 0], [-1, 1]], [[2, 1], [-1, 0], [1, 2]], [[1, 1], [-1, 2], [1, 0]]];\n\texports.brokenGlass = brokenGlass;\n\t\n\tvar cloth = [[[0, 0], [1, 0], [1, 1]],\n\t\n\t//Triangle on the left\n\t[[0, 0], [-1, 0], [-1, 1]],\n\t\n\t//Triangle on top\n\t[[0, 0], [-1, 0], [1, 0]],\n\t\n\t//Triangle on bottom\n\t[[0, 0], [-1, 1], [1, 1]]];\n\texports.cloth = cloth;\n\n/***/ },\n/* 72 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _classCallCheck2 = __webpack_require__(64);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(65);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _Force = __webpack_require__(69);\n\t\n\tvar _Force2 = _interopRequireDefault(_Force);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar ForceField = function () {\n\t    function ForceField(forces, width, height) {\n\t        (0, _classCallCheck3.default)(this, ForceField);\n\t\n\t        this._forces = forces.map(function (force) {\n\t            return new _Force2.default(width / 100 * force.x, height / 100 * force.y, force.direction, force.intensity, force.color, width, height, force.decay, force.invert, force.influenceColor, force.influencePosition, force.axis);\n\t        });\n\t    }\n\t\n\t    (0, _createClass3.default)(ForceField, [{\n\t        key: 'getForces',\n\t        value: function getForces() {\n\t            return this._forces;\n\t        }\n\t    }]);\n\t    return ForceField;\n\t}();\n\t\n\texports.default = ForceField;\n\n/***/ }\n/******/ ])\n});\n;\n//# sourceMappingURL=bundle.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/tilesflow/dist/bundle.js\n ** module id = 60\n ** module chunks = 0\n **/","var Pt = {}; (function() {var CanvasSpace, Circle, Color, Const, Curve, DOMSpace, Easing, Form, Grid, GridCascade, Line, Matrix, Noise, Pair, Particle, ParticleEmitter, ParticleField, ParticleSystem, Point, PointSet, QuadTree, Rectangle, SVGForm, SVGSpace, SamplePoints, Space, StripeBound, Timer, Triangle, UI, Util, Vector,\r\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n  hasProp = {}.hasOwnProperty,\r\n  slice = [].slice;\r\n\r\nConst = (function() {\r\n  function Const() {}\r\n\r\n  Const.xy = 'xy';\r\n\r\n  Const.yz = 'yz';\r\n\r\n  Const.xz = 'xz';\r\n\r\n  Const.xyz = 'xyz';\r\n\r\n  Const.identical = -1;\r\n\r\n  Const.right = 3;\r\n\r\n  Const.bottom_right = 4;\r\n\r\n  Const.bottom = 5;\r\n\r\n  Const.bottom_left = 6;\r\n\r\n  Const.left = 7;\r\n\r\n  Const.top_left = 0;\r\n\r\n  Const.top = 1;\r\n\r\n  Const.top_right = 2;\r\n\r\n  Const.sideLabels = [\"identical\", \"right\", \"bottom right\", \"bottom\", \"bottom left\", \"left\", \"top left\", \"top\", \"top right\"];\r\n\r\n  Const.epsilon = 0.0001;\r\n\r\n  Const.pi = Math.PI;\r\n\r\n  Const.two_pi = 6.283185307179586;\r\n\r\n  Const.half_pi = 1.5707963267948966;\r\n\r\n  Const.quarter_pi = 0.7853981633974483;\r\n\r\n  Const.one_degree = 0.017453292519943295;\r\n\r\n  Const.rad_to_deg = 57.29577951308232;\r\n\r\n  Const.deg_to_rad = 0.017453292519943295;\r\n\r\n  Const.gravity = 9.81;\r\n\r\n  Const.newton = 0.10197;\r\n\r\n  Const.gaussian = 0.3989422804014327;\r\n\r\n  return Const;\r\n\r\n})();\r\n\r\nthis.Const = Const;\r\n\r\nMatrix = (function() {\r\n  function Matrix() {}\r\n\r\n  Matrix.rotateAnchor2D = function(radian, anchor, axis) {\r\n    var a, cosA, sinA;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    a = anchor.get2D(axis);\r\n    cosA = Math.cos(radian);\r\n    sinA = Math.sin(radian);\r\n    return [cosA, sinA, 0, -sinA, cosA, 0, a.x * (1 - cosA) + a.y * sinA, a.y * (1 - cosA) - a.x * sinA, 1];\r\n  };\r\n\r\n  Matrix.reflectAnchor2D = function(line, axis) {\r\n    var ang2, cosA, inc, sinA;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    inc = line.intercept(axis);\r\n    ang2 = Math.atan(inc.slope) * 2;\r\n    cosA = Math.cos(ang2);\r\n    sinA = Math.sin(ang2);\r\n    return [cosA, sinA, 0, sinA, -cosA, 0, -inc.yi * sinA, inc.yi + inc.yi * cosA, 1];\r\n  };\r\n\r\n  Matrix.shearAnchor2D = function(sx, sy, anchor, axis) {\r\n    var a, tx, ty;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    a = anchor.get2D(axis);\r\n    tx = Math.tan(sx);\r\n    ty = Math.tan(sy);\r\n    return [1, tx, 0, ty, 1, 0, -a.y * ty, -a.x * tx, 1];\r\n  };\r\n\r\n  Matrix.scaleAnchor2D = function(sx, sy, anchor, axis) {\r\n    var a;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    a = anchor.get2D(axis);\r\n    return [sx, 0, 0, 0, sy, 0, -a.x * sx + a.x, -a.y * sy + a.y, 1];\r\n  };\r\n\r\n  Matrix.scale2D = function(x, y) {\r\n    return [x, 0, 0, 0, y, 0, 0, 0, 1];\r\n  };\r\n\r\n  Matrix.shear2D = function(x, y) {\r\n    return [1, Math.tan(x), 0, Math.tan(y), 1, 0, 0, 0, 1];\r\n  };\r\n\r\n  Matrix.rotate2D = function(cosA, sinA) {\r\n    return [cosA, sinA, 0, -sinA, cosA, 0, 0, 0, 1];\r\n  };\r\n\r\n  Matrix.translate2D = function(x, y) {\r\n    return [1, 0, 0, 0, 1, 0, x, y, 1];\r\n  };\r\n\r\n  Matrix.transform2D = function(pt, m, axis, byValue) {\r\n    var v, x, y;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    if (byValue == null) {\r\n      byValue = false;\r\n    }\r\n    v = pt.get2D(axis);\r\n    x = v.x * m[0] + v.y * m[3] + m[6];\r\n    y = v.x * m[1] + v.y * m[4] + m[7];\r\n    v.x = x;\r\n    v.y = y;\r\n    v = v.get2D(axis, true);\r\n    if (!byValue) {\r\n      pt.set(v);\r\n      return pt;\r\n    }\r\n    return v;\r\n  };\r\n\r\n  return Matrix;\r\n\r\n})();\r\n\r\nthis.Matrix = Matrix;\r\n\r\nUtil = (function() {\r\n  function Util() {}\r\n\r\n  Util.toRadian = function(angle) {\r\n    return angle * Const.deg_to_rad;\r\n  };\r\n\r\n  Util.toDegree = function(radian) {\r\n    return radian * Const.rad_to_deg;\r\n  };\r\n\r\n  Util.toHexColor = function(number) {\r\n    var h;\r\n    h = Math.floor(number).toString(16);\r\n    if (h.length === 1) {\r\n      return \"0\" + h;\r\n    } else {\r\n      return h;\r\n    }\r\n  };\r\n\r\n  Util.toRGBColor = function(hexString, asRGBA, opacity) {\r\n    var b, g, r;\r\n    if (asRGBA == null) {\r\n      asRGBA = false;\r\n    }\r\n    if (opacity == null) {\r\n      opacity = 1;\r\n    }\r\n    if (hexString[0] === \"#\") {\r\n      hexString = hexString.substr(1);\r\n    }\r\n    if (hexString.length === 3) {\r\n      r = parseInt(hexString[0] + hexString[0], 16);\r\n      g = parseInt(hexString[1] + hexString[1], 16);\r\n      b = parseInt(hexString[2] + hexString[2], 16);\r\n    } else if (hexString.length >= 6) {\r\n      r = parseInt(hexString[0] + hexString[1], 16);\r\n      g = parseInt(hexString[2] + hexString[3], 16);\r\n      b = parseInt(hexString[4] + hexString[5], 16);\r\n    } else {\r\n      r = 0;\r\n      g = 0;\r\n      b = 0;\r\n    }\r\n    if (asRGBA) {\r\n      return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + opacity + \")\";\r\n    } else {\r\n      return [r, g, b, opacity];\r\n    }\r\n  };\r\n\r\n  Util.bound = function(val, max, positive) {\r\n    var a, half;\r\n    if (positive == null) {\r\n      positive = false;\r\n    }\r\n    a = val % max;\r\n    half = max / 2;\r\n    if (a > half) {\r\n      a -= max;\r\n    } else if (a < -half) {\r\n      a += max;\r\n    }\r\n    if (positive) {\r\n      if (a < 0) {\r\n        return a + max;\r\n      } else {\r\n        return a;\r\n      }\r\n    } else {\r\n      return a;\r\n    }\r\n  };\r\n\r\n  Util.boundAngle = function(ang, positive) {\r\n    return Util.bound(ang, 360, positive);\r\n  };\r\n\r\n  Util.boundRadian = function(radian, positive) {\r\n    return Util.bound(radian, Const.two_pi, positive);\r\n  };\r\n\r\n  Util.boundingBox = function(points, is3D) {\r\n    var aa, len1, maxPt, minPt, p;\r\n    if (is3D == null) {\r\n      is3D = false;\r\n    }\r\n    minPt = new Point(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);\r\n    maxPt = new Point(Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY);\r\n    for (aa = 0, len1 = points.length; aa < len1; aa++) {\r\n      p = points[aa];\r\n      if (p.x < minPt.x) {\r\n        minPt.x = p.x;\r\n      }\r\n      if (p.y < minPt.y) {\r\n        minPt.y = p.y;\r\n      }\r\n      if (p.x > maxPt.x) {\r\n        maxPt.x = p.x;\r\n      }\r\n      if (p.y > maxPt.y) {\r\n        maxPt.y = p.y;\r\n      }\r\n      if (is3D) {\r\n        if (p.z < minPt.z) {\r\n          minPt.z = p.z;\r\n        }\r\n        if (p.z > maxPt.z) {\r\n          maxPt.z = p.z;\r\n        }\r\n      }\r\n    }\r\n    return new Rectangle(minPt).to(maxPt);\r\n  };\r\n\r\n  Util.lerp = function(a, b, t) {\r\n    return (1 - t) * a + t * b;\r\n  };\r\n\r\n  Util.centroid = function(points) {\r\n    var aa, c, len1, p;\r\n    c = new Vector();\r\n    for (aa = 0, len1 = points.length; aa < len1; aa++) {\r\n      p = points[aa];\r\n      c.add(p);\r\n    }\r\n    return c.divide(points.length);\r\n  };\r\n\r\n  Util.same = function(a, b, threshold) {\r\n    if (threshold == null) {\r\n      threshold = Const.epsilon;\r\n    }\r\n    return Math.abs(a - b) < threshold;\r\n  };\r\n\r\n  Util.within = function(p, a, b) {\r\n    return p >= Math.min(a, b) && p <= Math.max(a, b);\r\n  };\r\n\r\n  Util.randomRange = function(a, b) {\r\n    var r;\r\n    if (b == null) {\r\n      b = 0;\r\n    }\r\n    r = a > b ? a - b : b - a;\r\n    return a + Math.random() * r;\r\n  };\r\n\r\n  Util.mixin = function(klass, mix) {\r\n    var k, v;\r\n    for (k in mix) {\r\n      v = mix[k];\r\n      if (mix.hasOwnProperty(k)) {\r\n        klass.prototype[k] = mix[k];\r\n      }\r\n    }\r\n    return klass;\r\n  };\r\n\r\n  Util.extend = function(klass, parent) {\r\n    klass.prototype = Object.create(parent.prototype);\r\n    klass.prototype.constructor = klass;\r\n    return klass;\r\n  };\r\n\r\n  Util.clonePoints = function(array) {\r\n    var aa, len1, p, results;\r\n    results = [];\r\n    for (aa = 0, len1 = array.length; aa < len1; aa++) {\r\n      p = array[aa];\r\n      results.push(p.clone());\r\n    }\r\n    return results;\r\n  };\r\n\r\n  Util.contextRotateOrigin = function(ctx, bound, radian, origin, mask) {\r\n    var msz, size;\r\n    if (origin == null) {\r\n      origin = false;\r\n    }\r\n    size = bound.size();\r\n    if (!origin) {\r\n      origin = size.$multiply(0.5);\r\n      origin.add(bound);\r\n    }\r\n    if (mask) {\r\n      msz = mask.size();\r\n      Form.rect(ctx, mask);\r\n      ctx.clip();\r\n    }\r\n    ctx.translate(origin.x, origin.y);\r\n    ctx.rotate(radian);\r\n    return ctx.translate(-origin.x, -origin.y);\r\n  };\r\n\r\n  Util.sinCosTable = function() {\r\n    var aa, cos, i, sin;\r\n    cos = [];\r\n    sin = [];\r\n    for (i = aa = 0; aa <= 360; i = aa += 1) {\r\n      cos[i] = Math.cos(i * Math.PI / 180);\r\n      sin[i] = Math.sin(i * Math.PI / 180);\r\n    }\r\n    return {\r\n      sin: sin,\r\n      cos: cos\r\n    };\r\n  };\r\n\r\n  Util.chance = function(p) {\r\n    return Math.random() < p;\r\n  };\r\n\r\n  Util.gaussian = function(x, mean, sigma) {\r\n    if (mean == null) {\r\n      mean = 0;\r\n    }\r\n    if (sigma == null) {\r\n      sigma = 1;\r\n    }\r\n    x = (x - mean) / sigma;\r\n    return Const.gaussian * Math.exp(-0.5 * x * x) / sigma;\r\n  };\r\n\r\n  return Util;\r\n\r\n})();\r\n\r\nthis.Util = Util;\r\n\r\nTimer = (function() {\r\n  function Timer(d) {\r\n    if (d == null) {\r\n      d = 1000;\r\n    }\r\n    this.duration = d;\r\n    this._time = 0;\r\n    this._ease = function(t, b, c, d) {\r\n      return t / d;\r\n    };\r\n    this._intervalID = -1;\r\n  }\r\n\r\n  Timer.prototype.start = function(reset) {\r\n    var diff;\r\n    diff = Math.min(Date.now() - this._time, this.duration);\r\n    if (reset || diff >= this.duration) {\r\n      return this._time = Date.now();\r\n    }\r\n  };\r\n\r\n  Timer.prototype.setEasing = function(ease) {\r\n    return this._ease = ease;\r\n  };\r\n\r\n  Timer.prototype.check = function() {\r\n    var diff;\r\n    diff = Math.min(Date.now() - this._time, this.duration);\r\n    return this._ease(diff, 0, 1, this.duration);\r\n  };\r\n\r\n  Timer.prototype.track = function(callback) {\r\n    var me;\r\n    clearInterval(this._intervalID);\r\n    this.start(true);\r\n    me = this;\r\n    this._intervalID = setInterval((function() {\r\n      var t;\r\n      t = me.check();\r\n      callback(t);\r\n      if (t >= 1) {\r\n        return clearInterval(me._intervalID);\r\n      }\r\n    }), 25);\r\n    return this._intervalID;\r\n  };\r\n\r\n  return Timer;\r\n\r\n})();\r\n\r\nthis.Timer = Timer;\r\n\r\nSpace = (function() {\r\n  function Space(id) {\r\n    if (id == null) {\r\n      id = 'space';\r\n    }\r\n    this.id = id;\r\n    this.size = new Vector();\r\n    this.center = new Vector();\r\n    this._timePrev = 0;\r\n    this._timeDiff = 0;\r\n    this._timeEnd = -1;\r\n    this.items = {};\r\n    this._animID = -1;\r\n    this._animCount = 0;\r\n    this._animPause = false;\r\n    this._refresh = true;\r\n  }\r\n\r\n  Space.prototype.refresh = function(b) {\r\n    this._refresh = b;\r\n    return this;\r\n  };\r\n\r\n  Space.prototype.render = function(context) {\r\n    return this;\r\n  };\r\n\r\n  Space.prototype.resize = function(w, h) {};\r\n\r\n  Space.prototype.clear = function() {};\r\n\r\n  Space.prototype.add = function(item) {\r\n    var k;\r\n    if ((item.animate != null) && typeof item.animate === 'function') {\r\n      k = this._animCount++;\r\n      this.items[k] = item;\r\n      item.animateID = k;\r\n      if (item.onSpaceResize != null) {\r\n        item.onSpaceResize(this.size.x, this.size.y);\r\n      }\r\n    } else {\r\n      throw \"a player object for Space.add must define animate()\";\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Space.prototype.remove = function(item) {\r\n    delete this.items[item.animateID];\r\n    return this;\r\n  };\r\n\r\n  Space.prototype.removeAll = function() {\r\n    this.items = {};\r\n    return this;\r\n  };\r\n\r\n  Space.prototype.play = function(time) {\r\n    var err;\r\n    if (time == null) {\r\n      time = 0;\r\n    }\r\n    this._animID = requestAnimationFrame((function(_this) {\r\n      return function(t) {\r\n        return _this.play(t);\r\n      };\r\n    })(this));\r\n    if (this._animPause) {\r\n      return;\r\n    }\r\n    this._timeDiff = time - this._timePrev;\r\n    try {\r\n      this._playItems(time);\r\n    } catch (_error) {\r\n      err = _error;\r\n      cancelAnimationFrame(this._animID);\r\n      console.error(err.stack);\r\n      throw err;\r\n    }\r\n    this._timePrev = time;\r\n    return this;\r\n  };\r\n\r\n  Space.prototype._playItems = function(time) {\r\n    var k, ref, v;\r\n    if (this._refresh) {\r\n      this.clear();\r\n    }\r\n    ref = this.items;\r\n    for (k in ref) {\r\n      v = ref[k];\r\n      v.animate(time, this._timeDiff, this.ctx);\r\n    }\r\n    if (this._timeEnd >= 0 && time > this._timeEnd) {\r\n      cancelAnimationFrame(this._animID);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Space.prototype.pause = function(toggle) {\r\n    if (toggle == null) {\r\n      toggle = false;\r\n    }\r\n    this._animPause = toggle ? !this._animPause : true;\r\n    return this;\r\n  };\r\n\r\n  Space.prototype.resume = function() {\r\n    this._animPause = false;\r\n    return this;\r\n  };\r\n\r\n  Space.prototype.stop = function(t) {\r\n    if (t == null) {\r\n      t = 0;\r\n    }\r\n    this._timeEnd = t;\r\n    return this;\r\n  };\r\n\r\n  Space.prototype.playTime = function(duration) {\r\n    if (duration == null) {\r\n      duration = 5000;\r\n    }\r\n    this.play();\r\n    return this.stop(duration);\r\n  };\r\n\r\n  return Space;\r\n\r\n})();\r\n\r\nthis.Space = Space;\r\n\r\nCanvasSpace = (function(superClass) {\r\n  extend(CanvasSpace, superClass);\r\n\r\n  function CanvasSpace(id, bgcolor, context) {\r\n    if (id == null) {\r\n      id = 'pt_space';\r\n    }\r\n    if (bgcolor == null) {\r\n      bgcolor = false;\r\n    }\r\n    if (context == null) {\r\n      context = '2d';\r\n    }\r\n    CanvasSpace.__super__.constructor.apply(this, arguments);\r\n    this.space = document.querySelector(\"#\" + this.id);\r\n    this.appended = true;\r\n    if (!this.space) {\r\n      this.space = document.createElement(\"canvas\");\r\n      this.space.setAttribute(\"id\", this.id);\r\n      this.appended = false;\r\n    }\r\n    this._mdown = false;\r\n    this._mdrag = false;\r\n    this.bgcolor = bgcolor;\r\n    this.ctx = this.space.getContext(context);\r\n  }\r\n\r\n  CanvasSpace.prototype.display = function(parent_id, readyCallback) {\r\n    var frame, frame_rect;\r\n    if (parent_id == null) {\r\n      parent_id = \"#pt\";\r\n    }\r\n    if (!this.appended) {\r\n      frame = document.querySelector(parent_id);\r\n      frame_rect = frame.getBoundingClientRect();\r\n      if (frame) {\r\n        this.resize(frame_rect.width, frame_rect.height);\r\n        window.addEventListener('resize', (function(evt) {\r\n          frame_rect = frame.getBoundingClientRect();\r\n          return this.resize(frame_rect.width, frame_rect.height, evt);\r\n        }).bind(this));\r\n        if (this.space.parentNode !== frame) {\r\n          frame.appendChild(this.space);\r\n        }\r\n        this.appended = true;\r\n        setTimeout((function() {\r\n          this.space.dispatchEvent(new Event('ready'));\r\n          if (readyCallback) {\r\n            return readyCallback(frame_rect.width, frame_rect.height, this.space);\r\n          }\r\n        }).bind(this));\r\n      } else {\r\n        throw 'Cannot add canvas to element ' + parent_id;\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  CanvasSpace.prototype.resize = function(w, h, evt) {\r\n    var k, p, ref;\r\n    this.size.set(w, h);\r\n    this.center = new Vector(w / 2, h / 2);\r\n    this.space.setAttribute('width', Math.floor(w));\r\n    this.space.setAttribute('height', Math.floor(h));\r\n    ref = this.items;\r\n    for (k in ref) {\r\n      p = ref[k];\r\n      if (p.onSpaceResize != null) {\r\n        p.onSpaceResize(w, h, evt);\r\n      }\r\n    }\r\n    this.render(this.ctx);\r\n    return this;\r\n  };\r\n\r\n  CanvasSpace.prototype.clear = function(bg) {\r\n    var lastColor;\r\n    if (bg) {\r\n      this.bgcolor = bg;\r\n    }\r\n    lastColor = this.ctx.fillStyle;\r\n    if (this.bgcolor) {\r\n      this.ctx.fillStyle = this.bgcolor;\r\n      this.ctx.fillRect(0, 0, this.size.x, this.size.y);\r\n    } else {\r\n      this.ctx.clearRect(0, 0, this.size.x, this.size.y);\r\n    }\r\n    this.ctx.fillStyle = lastColor;\r\n    return this;\r\n  };\r\n\r\n  CanvasSpace.prototype.animate = function(time) {\r\n    var k, ref, v;\r\n    this.ctx.save();\r\n    if (this._refresh) {\r\n      this.clear();\r\n    }\r\n    ref = this.items;\r\n    for (k in ref) {\r\n      v = ref[k];\r\n      v.animate(time, this._timeDiff, this.ctx);\r\n    }\r\n    if (this._timeEnd >= 0 && time > this._timeEnd) {\r\n      cancelAnimationFrame(this._animID);\r\n    }\r\n    this.ctx.restore();\r\n    return this;\r\n  };\r\n\r\n  CanvasSpace.prototype.bindCanvas = function(evt, callback) {\r\n    return this.space.addEventListener(evt, callback);\r\n  };\r\n\r\n  CanvasSpace.prototype.bindMouse = function(_bind) {\r\n    if (_bind == null) {\r\n      _bind = true;\r\n    }\r\n    if (_bind) {\r\n      this.space.addEventListener(\"mousedown\", this._mouseDown.bind(this));\r\n      this.space.addEventListener(\"mouseup\", this._mouseUp.bind(this));\r\n      this.space.addEventListener(\"mouseover\", this._mouseOver.bind(this));\r\n      this.space.addEventListener(\"mouseout\", this._mouseOut.bind(this));\r\n      return this.space.addEventListener(\"mousemove\", this._mouseMove.bind(this));\r\n    } else {\r\n      this.space.removeEventListener(\"mousedown\", this._mouseDown.bind(this));\r\n      this.space.removeEventListener(\"mouseup\", this._mouseUp.bind(this));\r\n      this.space.removeEventListener(\"mouseover\", this._mouseOver.bind(this));\r\n      this.space.removeEventListener(\"mouseout\", this._mouseOut.bind(this));\r\n      return this.space.removeEventListener(\"mousemove\", this._mouseMove.bind(this));\r\n    }\r\n  };\r\n\r\n  CanvasSpace.prototype._mouseAction = function(type, evt) {\r\n    var k, px, py, ref, results, v;\r\n    ref = this.items;\r\n    results = [];\r\n    for (k in ref) {\r\n      v = ref[k];\r\n      px = evt.offsetX || evt.layerX;\r\n      py = evt.offsetY || evt.layerY;\r\n      if (v.onMouseAction != null) {\r\n        results.push(v.onMouseAction(type, px, py, evt));\r\n      } else {\r\n        results.push(void 0);\r\n      }\r\n    }\r\n    return results;\r\n  };\r\n\r\n  CanvasSpace.prototype._mouseDown = function(evt) {\r\n    this._mouseAction(\"down\", evt);\r\n    return this._mdown = true;\r\n  };\r\n\r\n  CanvasSpace.prototype._mouseUp = function(evt) {\r\n    this._mouseAction(\"up\", evt);\r\n    if (this._mdrag) {\r\n      this._mouseAction(\"drop\", evt);\r\n    }\r\n    this._mdown = false;\r\n    return this._mdrag = false;\r\n  };\r\n\r\n  CanvasSpace.prototype._mouseMove = function(evt) {\r\n    this._mouseAction(\"move\", evt);\r\n    if (this._mdown) {\r\n      this._mdrag = true;\r\n      return this._mouseAction(\"drag\", evt);\r\n    }\r\n  };\r\n\r\n  CanvasSpace.prototype._mouseOver = function(evt) {\r\n    return this._mouseAction(\"over\", evt);\r\n  };\r\n\r\n  CanvasSpace.prototype._mouseOut = function(evt) {\r\n    this._mouseAction(\"out\", evt);\r\n    if (this._mdrag) {\r\n      this._mouseAction(\"drop\", evt);\r\n    }\r\n    return this._mdrag = false;\r\n  };\r\n\r\n  return CanvasSpace;\r\n\r\n})(Space);\r\n\r\nthis.CanvasSpace = CanvasSpace;\r\n\r\nDOMSpace = (function(superClass) {\r\n  extend(DOMSpace, superClass);\r\n\r\n  function DOMSpace(id, bgcolor, context) {\r\n    if (id == null) {\r\n      id = 'pt_space';\r\n    }\r\n    if (bgcolor == null) {\r\n      bgcolor = false;\r\n    }\r\n    if (context == null) {\r\n      context = 'html';\r\n    }\r\n    DOMSpace.__super__.constructor.apply(this, arguments);\r\n    this.space = document.querySelector(\"#\" + this.id);\r\n    this.css = {\r\n      width: \"100%\",\r\n      height: \"100%\"\r\n    };\r\n    this.appended = true;\r\n    if (!this.space) {\r\n      this._createSpaceElement();\r\n    }\r\n    this._mdown = false;\r\n    this._mdrag = false;\r\n    this.bgcolor = bgcolor;\r\n    this.ctx = {};\r\n  }\r\n\r\n  DOMSpace.prototype._createSpaceElement = function() {\r\n    this.space = document.createElement(\"div\");\r\n    this.space.setAttribute(\"id\", this.id);\r\n    return this.appended = false;\r\n  };\r\n\r\n  DOMSpace.prototype.setCSS = function(key, val, isPx) {\r\n    if (isPx == null) {\r\n      isPx = false;\r\n    }\r\n    this.css[key] = (isPx ? val + \"px\" : val);\r\n    return this;\r\n  };\r\n\r\n  DOMSpace.prototype.updateCSS = function() {\r\n    var k, ref, results, v;\r\n    ref = this.css;\r\n    results = [];\r\n    for (k in ref) {\r\n      v = ref[k];\r\n      results.push(this.space.style[k] = v);\r\n    }\r\n    return results;\r\n  };\r\n\r\n  DOMSpace.prototype.display = function(parent_id, readyCallback) {\r\n    var frame, frame_rect;\r\n    if (parent_id == null) {\r\n      parent_id = \"#pt\";\r\n    }\r\n    if (!this.appended) {\r\n      frame = document.querySelector(parent_id);\r\n      frame_rect = frame.getBoundingClientRect();\r\n      if (frame) {\r\n        this.resize(frame_rect.width, frame_rect.height);\r\n        window.addEventListener('resize', (function(evt) {\r\n          frame_rect = frame.getBoundingClientRect();\r\n          return this.resize(frame_rect.width, frame_rect.height, evt);\r\n        }).bind(this));\r\n        if (this.space.parentNode !== frame) {\r\n          frame.appendChild(this.space);\r\n        }\r\n        this.appended = true;\r\n        setTimeout((function() {\r\n          this.space.dispatchEvent(new Event('ready'));\r\n          if (readyCallback) {\r\n            return readyCallback(frame_rect.width, frame_rect.height, this.space);\r\n          }\r\n        }).bind(this));\r\n      } else {\r\n        throw 'Cannot add canvas to element ' + parent_id;\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  DOMSpace.prototype.resize = function(w, h, evt) {\r\n    var k, p, ref;\r\n    this.size.set(w, h);\r\n    this.center = new Vector(w / 2, h / 2);\r\n    ref = this.items;\r\n    for (k in ref) {\r\n      p = ref[k];\r\n      if (p.onSpaceResize != null) {\r\n        p.onSpaceResize(w, h, evt);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  DOMSpace.prototype.clear = function() {\r\n    return this.space.innerHML = \"\";\r\n  };\r\n\r\n  DOMSpace.prototype.animate = function(time) {\r\n    var k, ref, v;\r\n    ref = this.items;\r\n    for (k in ref) {\r\n      v = ref[k];\r\n      v.animate(time, this._timeDiff, this.ctx);\r\n    }\r\n    if (this._timeEnd >= 0 && time > this._timeEnd) {\r\n      cancelAnimationFrame(this._animID);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  DOMSpace.prototype.bindCanvas = function(evt, callback) {\r\n    return this.space.addEventListener(evt, callback);\r\n  };\r\n\r\n  DOMSpace.prototype.bindMouse = function(_bind) {\r\n    if (_bind == null) {\r\n      _bind = true;\r\n    }\r\n    if (_bind) {\r\n      this.space.addEventListener(\"mousedown\", this._mouseDown.bind(this));\r\n      this.space.addEventListener(\"mouseup\", this._mouseUp.bind(this));\r\n      this.space.addEventListener(\"mouseover\", this._mouseOver.bind(this));\r\n      this.space.addEventListener(\"mouseout\", this._mouseOut.bind(this));\r\n      return this.space.addEventListener(\"mousemove\", this._mouseMove.bind(this));\r\n    } else {\r\n      this.space.removeEventListener(\"mousedown\", this._mouseDown.bind(this));\r\n      this.space.removeEventListener(\"mouseup\", this._mouseUp.bind(this));\r\n      this.space.removeEventListener(\"mouseover\", this._mouseOver.bind(this));\r\n      this.space.removeEventListener(\"mouseout\", this._mouseOut.bind(this));\r\n      return this.space.removeEventListener(\"mousemove\", this._mouseMove.bind(this));\r\n    }\r\n  };\r\n\r\n  DOMSpace.prototype._mouseAction = function(type, evt) {\r\n    var k, px, py, ref, results, v;\r\n    ref = this.items;\r\n    results = [];\r\n    for (k in ref) {\r\n      v = ref[k];\r\n      px = evt.offsetX || evt.layerX;\r\n      py = evt.offsetY || evt.layerY;\r\n      if (v.onMouseAction != null) {\r\n        results.push(v.onMouseAction(type, px, py, evt));\r\n      } else {\r\n        results.push(void 0);\r\n      }\r\n    }\r\n    return results;\r\n  };\r\n\r\n  DOMSpace.prototype._mouseDown = function(evt) {\r\n    this._mouseAction(\"down\", evt);\r\n    return this._mdown = true;\r\n  };\r\n\r\n  DOMSpace.prototype._mouseUp = function(evt) {\r\n    this._mouseAction(\"up\", evt);\r\n    if (this._mdrag) {\r\n      this._mouseAction(\"drop\", evt);\r\n    }\r\n    this._mdown = false;\r\n    return this._mdrag = false;\r\n  };\r\n\r\n  DOMSpace.prototype._mouseMove = function(evt) {\r\n    this._mouseAction(\"move\", evt);\r\n    if (this._mdown) {\r\n      this._mdrag = true;\r\n      return this._mouseAction(\"drag\", evt);\r\n    }\r\n  };\r\n\r\n  DOMSpace.prototype._mouseOver = function(evt) {\r\n    return this._mouseAction(\"over\", evt);\r\n  };\r\n\r\n  DOMSpace.prototype._mouseOut = function(evt) {\r\n    this._mouseAction(\"out\", evt);\r\n    if (this._mdrag) {\r\n      this._mouseAction(\"drop\", evt);\r\n    }\r\n    return this._mdrag = false;\r\n  };\r\n\r\n  DOMSpace.attr = function(elem, data) {\r\n    var k, results, v;\r\n    results = [];\r\n    for (k in data) {\r\n      v = data[k];\r\n      results.push(elem.setAttribute(k, v));\r\n    }\r\n    return results;\r\n  };\r\n\r\n  DOMSpace.css = function(data) {\r\n    var k, str, v;\r\n    str = \"\";\r\n    for (k in data) {\r\n      v = data[k];\r\n      if (v) {\r\n        str += k + \": \" + v + \"; \";\r\n      }\r\n    }\r\n    return str;\r\n  };\r\n\r\n  return DOMSpace;\r\n\r\n})(Space);\r\n\r\nthis.DOMSpace = DOMSpace;\r\n\r\nForm = (function() {\r\n  function Form(space) {\r\n    this.cc = space.ctx;\r\n    this.cc.fillStyle = '#999';\r\n    this.cc.strokeStyle = '#666';\r\n    this.cc.lineWidth = 1;\r\n    this.cc.font = \"11px sans-serif\";\r\n    this.filled = true;\r\n    this.stroked = true;\r\n    this.fontSize = 11;\r\n    this.fontFace = \"sans-serif\";\r\n  }\r\n\r\n  Form.context = function(canvas_id) {\r\n    var cc, elem;\r\n    elem = document.getElementById(canvas_id);\r\n    cc = elem && elem.getContext ? elem.getContext('2d') : false;\r\n    if (!cc) {\r\n      throw \"Cannot initiate canvas 2d context\";\r\n    }\r\n    return cc;\r\n  };\r\n\r\n  Form.line = function(ctx, pair) {\r\n    if (!pair.p1) {\r\n      throw (pair.toString()) + \" is not a Pair\";\r\n    }\r\n    ctx.beginPath();\r\n    ctx.moveTo(pair.x, pair.y);\r\n    ctx.lineTo(pair.p1.x, pair.p1.y);\r\n    return ctx.stroke();\r\n  };\r\n\r\n  Form.lines = function(ctx, pairs) {\r\n    var aa, len1, ln, results;\r\n    results = [];\r\n    for (aa = 0, len1 = pairs.length; aa < len1; aa++) {\r\n      ln = pairs[aa];\r\n      results.push(Form.line(ctx, ln));\r\n    }\r\n    return results;\r\n  };\r\n\r\n  Form.rect = function(ctx, pair, fill, stroke) {\r\n    if (fill == null) {\r\n      fill = true;\r\n    }\r\n    if (stroke == null) {\r\n      stroke = false;\r\n    }\r\n    if (!pair.p1) {\r\n      throw \"\" + (pair.toString() === !a(Pair));\r\n    }\r\n    ctx.beginPath();\r\n    ctx.moveTo(pair.x, pair.y);\r\n    ctx.lineTo(pair.x, pair.p1.y);\r\n    ctx.lineTo(pair.p1.x, pair.p1.y);\r\n    ctx.lineTo(pair.p1.x, pair.y);\r\n    ctx.closePath();\r\n    if (stroke) {\r\n      ctx.stroke();\r\n    }\r\n    if (fill) {\r\n      return ctx.fill();\r\n    }\r\n  };\r\n\r\n  Form.circle = function(ctx, c, fill, stroke) {\r\n    if (fill == null) {\r\n      fill = true;\r\n    }\r\n    if (stroke == null) {\r\n      stroke = false;\r\n    }\r\n    ctx.beginPath();\r\n    ctx.arc(c.x, c.y, c.radius, 0, Const.two_pi, false);\r\n    if (fill) {\r\n      ctx.fill();\r\n    }\r\n    if (stroke) {\r\n      ctx.stroke();\r\n    }\r\n  };\r\n\r\n  Form.triangle = function(ctx, tri, fill, stroke) {\r\n    if (fill == null) {\r\n      fill = true;\r\n    }\r\n    if (stroke == null) {\r\n      stroke = false;\r\n    }\r\n    ctx.beginPath();\r\n    ctx.moveTo(tri.x, tri.y);\r\n    ctx.lineTo(tri.p1.x, tri.p1.y);\r\n    ctx.lineTo(tri.p2.x, tri.p2.y);\r\n    ctx.closePath();\r\n    if (fill) {\r\n      ctx.fill();\r\n    }\r\n    if (stroke) {\r\n      ctx.stroke();\r\n    }\r\n  };\r\n\r\n  Form.point = function(ctx, pt, halfsize, fill, stroke, circle) {\r\n    var x1, x2, y1, y2;\r\n    if (halfsize == null) {\r\n      halfsize = 2;\r\n    }\r\n    if (fill == null) {\r\n      fill = true;\r\n    }\r\n    if (stroke == null) {\r\n      stroke = false;\r\n    }\r\n    if (circle == null) {\r\n      circle = false;\r\n    }\r\n    if (circle) {\r\n      ctx.beginPath();\r\n      ctx.arc(pt.x, pt.y, halfsize, 0, Const.two_pi, false);\r\n    } else {\r\n      x1 = pt.x - halfsize;\r\n      y1 = pt.y - halfsize;\r\n      x2 = pt.x + halfsize;\r\n      y2 = pt.y + halfsize;\r\n      ctx.beginPath();\r\n      ctx.moveTo(x1, y1);\r\n      ctx.lineTo(x1, y2);\r\n      ctx.lineTo(x2, y2);\r\n      ctx.lineTo(x2, y1);\r\n      ctx.closePath();\r\n    }\r\n    if (fill) {\r\n      ctx.fill();\r\n    }\r\n    if (stroke) {\r\n      ctx.stroke();\r\n    }\r\n    return pt;\r\n  };\r\n\r\n  Form.points = function(ctx, pts, halfsize, fill, stroke, circle) {\r\n    var aa, len1, p, results;\r\n    if (halfsize == null) {\r\n      halfsize = 2;\r\n    }\r\n    if (fill == null) {\r\n      fill = true;\r\n    }\r\n    if (stroke == null) {\r\n      stroke = false;\r\n    }\r\n    if (circle == null) {\r\n      circle = false;\r\n    }\r\n    results = [];\r\n    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n      p = pts[aa];\r\n      results.push(Form.point(ctx, p, halfsize, fill, stroke, circle));\r\n    }\r\n    return results;\r\n  };\r\n\r\n  Form.polygon = function(ctx, pts, closePath, fill, stroke) {\r\n    var aa, i, ref;\r\n    if (closePath == null) {\r\n      closePath = true;\r\n    }\r\n    if (fill == null) {\r\n      fill = true;\r\n    }\r\n    if (stroke == null) {\r\n      stroke = true;\r\n    }\r\n    if (pts.length <= 1) {\r\n      return;\r\n    }\r\n    ctx.beginPath();\r\n    ctx.moveTo(pts[0].x, pts[0].y);\r\n    for (i = aa = 1, ref = pts.length; aa < ref; i = aa += 1) {\r\n      ctx.lineTo(pts[i].x, pts[i].y);\r\n    }\r\n    if (closePath) {\r\n      ctx.closePath();\r\n    }\r\n    if (fill) {\r\n      ctx.fill();\r\n    }\r\n    if (stroke) {\r\n      ctx.stroke();\r\n    }\r\n  };\r\n\r\n  Form.curve = function(ctx, pts) {\r\n    return Form.polygon(ctx, pts, false, false, true);\r\n  };\r\n\r\n  Form.text = function(ctx, pt, txt, maxWidth) {\r\n    return ctx.fillText(txt, pt.x, pt.y, maxWidth);\r\n  };\r\n\r\n  Form.prototype.fill = function(c) {\r\n    this.cc.fillStyle = c ? c : \"transparent\";\r\n    this.filled = !!c;\r\n    return this;\r\n  };\r\n\r\n  Form.prototype.stroke = function(c, width, joint) {\r\n    this.cc.strokeStyle = c ? c : \"transparent\";\r\n    this.stroked = !!c;\r\n    if (width) {\r\n      this.cc.lineWidth = width;\r\n    }\r\n    if (joint) {\r\n      this.cc.lineJoin = joint;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Form.prototype.font = function(size, face) {\r\n    if (face == null) {\r\n      face = this.fontFace;\r\n    }\r\n    this.fontSize = size;\r\n    this.cc.font = size + \"px \" + face;\r\n    return this;\r\n  };\r\n\r\n  Form.prototype.draw = function(shape) {\r\n    return this.sketch(shape);\r\n  };\r\n\r\n  Form.prototype.sketch = function(shape) {\r\n    shape.floor();\r\n    if (shape instanceof Circle) {\r\n      Form.circle(this.cc, shape, this.filled, this.stroked);\r\n    } else if (shape instanceof Rectangle) {\r\n      Form.rect(this.cc, shape, this.filled, this.stroked);\r\n    } else if (shape instanceof Triangle) {\r\n      Form.triangle(this.cc, shape, this.filled, this.stroked);\r\n    } else if (shape instanceof Line || shape instanceof Pair) {\r\n      Form.line(this.cc, shape);\r\n    } else if (shape instanceof PointSet) {\r\n      Form.polygon(this.cc, shape.points);\r\n    } else if (shape instanceof Vector || shape instanceof Point) {\r\n      Form.point(this.cc, shape);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Form.prototype.point = function(p, halfsize, isCircle) {\r\n    if (halfsize == null) {\r\n      halfsize = 2;\r\n    }\r\n    if (isCircle == null) {\r\n      isCircle = false;\r\n    }\r\n    Form.point(this.cc, p, halfsize, this.filled, this.stroked, isCircle);\r\n    return this;\r\n  };\r\n\r\n  Form.prototype.points = function(ps, halfsize, isCircle) {\r\n    if (halfsize == null) {\r\n      halfsize = 2;\r\n    }\r\n    if (isCircle == null) {\r\n      isCircle = false;\r\n    }\r\n    Form.points(this.cc, ps, halfsize, this.filled, this.stroked, isCircle);\r\n    return this;\r\n  };\r\n\r\n  Form.prototype.line = function(p) {\r\n    Form.line(this.cc, p);\r\n    return this;\r\n  };\r\n\r\n  Form.prototype.lines = function(ps) {\r\n    Form.lines(this.cc, ps);\r\n    return this;\r\n  };\r\n\r\n  Form.prototype.rect = function(p) {\r\n    Form.rect(this.cc, p, this.filled, this.stroked);\r\n    return this;\r\n  };\r\n\r\n  Form.prototype.circle = function(p) {\r\n    Form.circle(this.cc, p, this.filled, this.stroked);\r\n    return this;\r\n  };\r\n\r\n  Form.prototype.triangle = function(p) {\r\n    Form.triangle(this.cc, p, this.filled, this.stroked);\r\n    return this;\r\n  };\r\n\r\n  Form.prototype.polygon = function(ps, closePath) {\r\n    Form.polygon(this.cc, ps, closePath, this.filled, this.stroked);\r\n    return this;\r\n  };\r\n\r\n  Form.prototype.curve = function(ps) {\r\n    Form.curve(this.cc, ps);\r\n    return this;\r\n  };\r\n\r\n  Form.prototype.text = function(p, txt, maxWidth, xoff, yoff) {\r\n    var pos;\r\n    if (maxWidth == null) {\r\n      maxWidth = 1000;\r\n    }\r\n    pos = new Vector(p);\r\n    if (xoff) {\r\n      pos.add(xoff, 0);\r\n    }\r\n    if (yoff) {\r\n      pos.add(0, yoff);\r\n    }\r\n    this.cc.fillText(txt, pos.x, pos.y, maxWidth);\r\n    return this;\r\n  };\r\n\r\n  return Form;\r\n\r\n})();\r\n\r\nthis.Form = Form;\r\n\r\nPoint = (function() {\r\n  function Point(args) {\r\n    this.copy(Point.get(arguments));\r\n  }\r\n\r\n  Point.get = function(args) {\r\n    if (args.length > 0) {\r\n      if (typeof args[0] === 'object') {\r\n        if (args[0] instanceof Array || args[0].length > 0) {\r\n          return {\r\n            x: args[0][0] || 0,\r\n            y: args[0][1] || 0,\r\n            z: args[0][2] || 0\r\n          };\r\n        } else {\r\n          return {\r\n            x: args[0].x || 0,\r\n            y: args[0].y || 0,\r\n            z: args[0].z || 0\r\n          };\r\n        }\r\n      } else {\r\n        return {\r\n          x: args[0] || 0,\r\n          y: args[1] || 0,\r\n          z: args[2] || 0\r\n        };\r\n      }\r\n    } else {\r\n      return {\r\n        x: 0,\r\n        y: 0,\r\n        z: 0\r\n      };\r\n    }\r\n  };\r\n\r\n  Point.prototype.quadrant = function(pt, epsilon) {\r\n    if (epsilon == null) {\r\n      epsilon = Const.epsilon;\r\n    }\r\n    if (pt.near(this)) {\r\n      return Const.identical;\r\n    }\r\n    if (Math.abs(pt.x - this.x) < epsilon) {\r\n      if (pt.y < this.y) {\r\n        return Const.top;\r\n      } else {\r\n        return Const.bottom;\r\n      }\r\n    }\r\n    if (Math.abs(pt.y - this.y) < epsilon) {\r\n      if (pt.x < this.x) {\r\n        return Const.left;\r\n      } else {\r\n        return Const.right;\r\n      }\r\n    }\r\n    if (pt.y < this.y && pt.x > this.x) {\r\n      return Const.top_right;\r\n    } else if (pt.y < this.y && pt.x < this.x) {\r\n      return Const.top_left;\r\n    } else if (pt.y > this.y && pt.x < this.x) {\r\n      return Const.bottom_left;\r\n    } else {\r\n      return Const.bottom_right;\r\n    }\r\n  };\r\n\r\n  Point.prototype.set = function(args) {\r\n    var p;\r\n    p = Point.get(arguments);\r\n    this.x = p.x;\r\n    this.y = p.y;\r\n    this.z = p.z;\r\n    return this;\r\n  };\r\n\r\n  Point.prototype.copy = function(p) {\r\n    this.x = p.x;\r\n    this.y = p.y;\r\n    this.z = p.z;\r\n    return this;\r\n  };\r\n\r\n  Point.prototype.clone = function() {\r\n    return new Point(this);\r\n  };\r\n\r\n  Point.prototype.toString = function() {\r\n    return \"Point \" + this.x + \", \" + this.y + \", \" + this.z;\r\n  };\r\n\r\n  Point.prototype.toArray = function() {\r\n    return [this];\r\n  };\r\n\r\n  Point.prototype.get2D = function(axis, reverse) {\r\n    if (reverse == null) {\r\n      reverse = false;\r\n    }\r\n    if (axis === Const.xy) {\r\n      return new this.__proto__.constructor(this);\r\n    }\r\n    if (axis === Const.xz) {\r\n      return new this.__proto__.constructor(this.x, this.z, this.y);\r\n    }\r\n    if (axis === Const.yz) {\r\n      if (reverse) {\r\n        return new this.__proto__.constructor(this.z, this.x, this.y);\r\n      } else {\r\n        return new this.__proto__.constructor(this.y, this.z, this.x);\r\n      }\r\n    }\r\n    return new this.__proto__.constructor(this);\r\n  };\r\n\r\n  Point.prototype.min = function(args) {\r\n    var _p;\r\n    _p = Point.get(arguments);\r\n    this.x = Math.min(this.x, _p.x);\r\n    this.y = Math.min(this.y, _p.y);\r\n    this.z = Math.min(this.z, _p.z);\r\n    return this;\r\n  };\r\n\r\n  Point.prototype.$min = function(args) {\r\n    var _p;\r\n    _p = Point.get(arguments);\r\n    return new this.__proto__.constructor(Math.min(this.x, _p.x), Math.min(this.y, _p.y), Math.min(this.z, _p.z));\r\n  };\r\n\r\n  Point.prototype.max = function(args) {\r\n    var _p;\r\n    _p = Point.get(arguments);\r\n    this.x = Math.max(this.x, _p.x);\r\n    this.y = Math.max(this.y, _p.y);\r\n    this.z = Math.max(this.z, _p.z);\r\n    return this;\r\n  };\r\n\r\n  Point.prototype.$max = function(args) {\r\n    var _p;\r\n    _p = Point.get(arguments);\r\n    return new this.__proto__.constructor(Math.max(this.x, _p.x), Math.max(this.y, _p.y), Math.max(this.z, _p.z));\r\n  };\r\n\r\n  Point.prototype.equal = function(args) {\r\n    var _p;\r\n    _p = Point.get(arguments);\r\n    return (_p.x === this.x) && (_p.y === this.y) && (_p.z === this.z);\r\n  };\r\n\r\n  Point.prototype.near = function(pt, epsilon) {\r\n    var _p;\r\n    if (epsilon == null) {\r\n      epsilon = Const.epsilon;\r\n    }\r\n    _p = Point.get(arguments);\r\n    return (Math.abs(_p.x - this.x) < epsilon) && (Math.abs(_p.y - this.y) < epsilon) && (Math.abs(_p.z - this.z) < epsilon);\r\n  };\r\n\r\n  Point.prototype.floor = function() {\r\n    this.x = Math.floor(this.x);\r\n    this.y = Math.floor(this.y);\r\n    this.z = Math.floor(this.z);\r\n    return this;\r\n  };\r\n\r\n  Point.prototype.ceil = function() {\r\n    this.x = Math.ceil(this.x);\r\n    this.y = Math.ceil(this.y);\r\n    this.z = Math.ceil(this.z);\r\n    return this;\r\n  };\r\n\r\n  return Point;\r\n\r\n})();\r\n\r\nthis.Point = Point;\r\n\r\nVector = (function(superClass) {\r\n  extend(Vector, superClass);\r\n\r\n  function Vector() {\r\n    Vector.__super__.constructor.apply(this, arguments);\r\n  }\r\n\r\n  Vector.prototype._getArgs = function(args) {\r\n    if (typeof args[0] === 'number' && args.length > 1) {\r\n      return args;\r\n    } else {\r\n      return args[0];\r\n    }\r\n  };\r\n\r\n  Vector.prototype.add = function(args) {\r\n    var _p;\r\n    if (typeof arguments[0] === 'number' && arguments.length === 1) {\r\n      this.x += arguments[0];\r\n      this.y += arguments[0];\r\n      this.z += arguments[0];\r\n    } else {\r\n      _p = Point.get(arguments);\r\n      this.x += _p.x;\r\n      this.y += _p.y;\r\n      this.z += _p.z;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Vector.prototype.$add = function(args) {\r\n    var a;\r\n    a = this._getArgs(arguments);\r\n    return new Vector(this).add(a);\r\n  };\r\n\r\n  Vector.prototype.subtract = function(args) {\r\n    var _p;\r\n    if (typeof arguments[0] === 'number' && arguments.length === 1) {\r\n      this.x -= arguments[0];\r\n      this.y -= arguments[0];\r\n      this.z -= arguments[0];\r\n    } else {\r\n      _p = Point.get(arguments);\r\n      this.x -= _p.x;\r\n      this.y -= _p.y;\r\n      this.z -= _p.z;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Vector.prototype.$subtract = function(args) {\r\n    var a;\r\n    a = this._getArgs(arguments);\r\n    return new Vector(this).subtract(a);\r\n  };\r\n\r\n  Vector.prototype.multiply = function(args) {\r\n    var _p;\r\n    if (arguments.length === 1 && (typeof arguments[0] === 'number' || (typeof arguments[0] === 'object' && arguments[0].length === 1))) {\r\n      this.x *= arguments[0];\r\n      this.y *= arguments[0];\r\n      this.z *= arguments[0];\r\n    } else {\r\n      _p = Point.get(arguments);\r\n      this.x *= _p.x;\r\n      this.y *= _p.y;\r\n      this.z *= _p.z;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Vector.prototype.$multiply = function(args) {\r\n    var a;\r\n    a = this._getArgs(arguments);\r\n    return new Vector(this).multiply(a);\r\n  };\r\n\r\n  Vector.prototype.divide = function(args) {\r\n    var _p;\r\n    if (arguments.length === 1 && (typeof arguments[0] === 'number' || (typeof arguments[0] === 'object' && arguments[0].length === 1))) {\r\n      this.x /= arguments[0];\r\n      this.y /= arguments[0];\r\n      this.z /= arguments[0];\r\n    } else {\r\n      _p = Point.get(arguments);\r\n      this.x /= _p.x;\r\n      this.y /= _p.y;\r\n      this.z /= _p.z;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Vector.prototype.$divide = function(args) {\r\n    var a;\r\n    a = this._getArgs(arguments);\r\n    return new Vector(this).divide(a);\r\n  };\r\n\r\n  Vector.prototype.op = function() {\r\n    var aa, args, len1, name, p, pts;\r\n    name = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\r\n    pts = this.toArray();\r\n    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n      p = pts[aa];\r\n      p[name].apply(p, args);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Vector.prototype.$op = function() {\r\n    var aa, args, instance, len1, name, p, pts;\r\n    name = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\r\n    instance = this.clone();\r\n    pts = instance.toArray();\r\n    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n      p = pts[aa];\r\n      p[name].apply(p, args);\r\n    }\r\n    return instance;\r\n  };\r\n\r\n  Vector.prototype.angle = function(args) {\r\n    var axis, p;\r\n    if (arguments.length === 0) {\r\n      return Math.atan2(this.y, this.x);\r\n    }\r\n    if (typeof arguments[0] === 'string') {\r\n      axis = arguments[0];\r\n      p = arguments.length > 1 ? this.$subtract(arguments[1]).multiply(-1) : void 0;\r\n    } else {\r\n      p = this.$subtract(arguments[0]).multiply(-1);\r\n      axis = false;\r\n    }\r\n    if (p && !axis) {\r\n      return Math.atan2(p.y, p.x);\r\n    } else if (axis === Const.xy) {\r\n      if (p) {\r\n        return Math.atan2(p.y, p.x);\r\n      } else {\r\n        return Math.atan2(this.y, this.x);\r\n      }\r\n    } else if (axis === Const.yz) {\r\n      if (p) {\r\n        return Math.atan2(p.z, p.y);\r\n      } else {\r\n        return Math.atan2(this.z, this.y);\r\n      }\r\n    } else if (axis === Const.xz) {\r\n      if (p) {\r\n        return Math.atan2(p.z, p.x);\r\n      } else {\r\n        return Math.atan2(this.z, this.x);\r\n      }\r\n    }\r\n  };\r\n\r\n  Vector.prototype.angleBetween = function(vec, axis) {\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    return Util.boundRadian(this.angle(axis), true) - Util.boundRadian(vec.angle(axis), true);\r\n  };\r\n\r\n  Vector.prototype.magnitude = function(args) {\r\n    var _sq, axis, m, mag, p, useSq;\r\n    m = {\r\n      x: this.x * this.x,\r\n      y: this.y * this.y,\r\n      z: this.z * this.z\r\n    };\r\n    useSq = arguments.length >= 1 && !arguments[arguments.length - 1];\r\n    _sq = useSq ? (function(x) {\r\n      return x;\r\n    }) : Math.sqrt;\r\n    if (arguments.length === 0) {\r\n      return _sq(m.x + m.y + m.z);\r\n    }\r\n    if (typeof arguments[0] === 'string') {\r\n      axis = arguments[0];\r\n      if (arguments.length > 1 && arguments[1]) {\r\n        p = this.$subtract(arguments[1]);\r\n      } else {\r\n        p = void 0;\r\n      }\r\n    } else {\r\n      p = this.$subtract(arguments[0]);\r\n      axis = false;\r\n    }\r\n    mag = p ? {\r\n      x: p.x * p.x,\r\n      y: p.y * p.y,\r\n      z: p.z * p.z\r\n    } : m;\r\n    if (p && !axis) {\r\n      return _sq(mag.x + mag.y + mag.z);\r\n    } else if (axis === Const.xy) {\r\n      return _sq(mag.x + mag.y);\r\n    } else if (axis === Const.yz) {\r\n      return _sq(mag.y + mag.z);\r\n    } else if (axis === Const.xz) {\r\n      return _sq(mag.x + mag.z);\r\n    }\r\n  };\r\n\r\n  Vector.prototype.distance = function(pt, axis) {\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    return this.magnitude(axis, pt);\r\n  };\r\n\r\n  Vector.prototype.normalize = function() {\r\n    this.set(this.$normalize());\r\n    return this;\r\n  };\r\n\r\n  Vector.prototype.$normalize = function() {\r\n    var m;\r\n    m = this.magnitude();\r\n    if (m === 0) {\r\n      return new Vector();\r\n    } else {\r\n      return new Vector(this.x / m, this.y / m, this.z / m);\r\n    }\r\n  };\r\n\r\n  Vector.prototype.abs = function() {\r\n    this.x = Math.abs(this.x);\r\n    this.y = Math.abs(this.y);\r\n    this.z = Math.abs(this.z);\r\n    return this;\r\n  };\r\n\r\n  Vector.prototype.dot = function(p, axis) {\r\n    if (axis == null) {\r\n      axis = Const.xyz;\r\n    }\r\n    if (axis === Const.xyz) {\r\n      return this.x * p.x + this.y * p.y + this.z * p.z;\r\n    } else if (axis === Const.xy) {\r\n      return this.x * p.x + this.y * p.y;\r\n    } else if (axis === Const.yz) {\r\n      return this.y * p.y + this.z * p.z;\r\n    } else if (axis === Const.xz) {\r\n      return this.x * p.x + this.z * p.z;\r\n    } else {\r\n      return this.x * p.x + this.y * p.y + this.z * p.z;\r\n    }\r\n  };\r\n\r\n  Vector.prototype.projection = function(vec, axis) {\r\n    var a, b, dot, m;\r\n    if (axis == null) {\r\n      axis = Const.xyz;\r\n    }\r\n    m = vec.magnitude();\r\n    a = this.$normalize();\r\n    b = new Vector(vec.x / m, vec.y / m, vec.z / m);\r\n    dot = a.dot(b, axis);\r\n    return a.$multiply(m * dot);\r\n  };\r\n\r\n  Vector.prototype.cross = function(p) {\r\n    return new Vector(this.y * p.z - this.z * p.y, this.z * p.x - this.x * p.z, this.x * p.y - this.y * p.x);\r\n  };\r\n\r\n  Vector.prototype.bisect = function(vec, isNormalized) {\r\n    if (isNormalized == null) {\r\n      isNormalized = false;\r\n    }\r\n    if (isNormalized) {\r\n      return this.$add(vec).divide(2);\r\n    } else {\r\n      return this.$normalize().add(vec.$normalize()).divide(2);\r\n    }\r\n  };\r\n\r\n  Vector.prototype.perpendicular = function(axis) {\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    switch (axis) {\r\n      case Const.xy:\r\n        return [new Vector(-this.y, this.x, this.z), new Vector(this.y, -this.x, this.z)];\r\n      case Const.yz:\r\n        return [new Vector(this.x, -this.z, this.y), new Vector(this.x, this.z, -this.y)];\r\n      case Const.xz:\r\n        return [new Vector(-this.z, this.y, this.x), new Vector(this.z, -this.y, this.x)];\r\n      default:\r\n        return [new Vector(-this.y, this.x, this.z), new Vector(this.y, -this.x, this.z)];\r\n    }\r\n  };\r\n\r\n  Vector.prototype.isPerpendicular = function(p, axis) {\r\n    if (axis == null) {\r\n      axis = Const.xyz;\r\n    }\r\n    return this.dot(p, axis) === 0;\r\n  };\r\n\r\n  Vector.prototype.surfaceNormal = function(p) {\r\n    return this.cross(p).normalize(true);\r\n  };\r\n\r\n  Vector.prototype.moveTo = function(args) {\r\n    var aa, d, len1, p, pts, target;\r\n    target = Point.get(arguments);\r\n    d = this.$subtract(target);\r\n    pts = this.toArray();\r\n    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n      p = pts[aa];\r\n      p.subtract(d);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Vector.prototype.moveBy = function(args) {\r\n    var aa, inc, len1, p, pts;\r\n    inc = Point.get(arguments);\r\n    pts = this.toArray();\r\n    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n      p = pts[aa];\r\n      p.add(inc);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Vector.prototype.rotate2D = function(radian, anchor, axis) {\r\n    var aa, len1, mx, p, pts;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    if (!anchor) {\r\n      anchor = new Point(0, 0, 0);\r\n    }\r\n    mx = Matrix.rotateAnchor2D(radian, anchor, axis);\r\n    pts = this.toArray();\r\n    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n      p = pts[aa];\r\n      Matrix.transform2D(p, mx, axis);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Vector.prototype.reflect2D = function(line, axis) {\r\n    var aa, len1, mx, p, pts;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    mx = Matrix.reflectAnchor2D(line, axis);\r\n    pts = this.toArray();\r\n    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n      p = pts[aa];\r\n      Matrix.transform2D(p, mx, axis);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Vector.prototype.scale2D = function(sx, sy, anchor, axis) {\r\n    var aa, len1, mx, p, pts;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    if (!anchor) {\r\n      anchor = new Point(0, 0, 0);\r\n    }\r\n    mx = Matrix.scaleAnchor2D(sx, sy, anchor, axis);\r\n    pts = this.toArray();\r\n    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n      p = pts[aa];\r\n      Matrix.transform2D(p, mx, axis);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Vector.prototype.shear2D = function(sx, sy, anchor, axis) {\r\n    var aa, len1, mx, p, pts;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    if (!anchor) {\r\n      anchor = new Point(0, 0, 0);\r\n    }\r\n    mx = Matrix.shearAnchor2D(sx, sy, anchor, axis);\r\n    pts = this.toArray();\r\n    for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n      p = pts[aa];\r\n      Matrix.transform2D(p, mx, axis);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Vector.prototype.clone = function() {\r\n    return new Vector(this);\r\n  };\r\n\r\n  Vector.prototype.toString = function() {\r\n    return \"Vector \" + this.x + \", \" + this.y + \", \" + this.z;\r\n  };\r\n\r\n  return Vector;\r\n\r\n})(Point);\r\n\r\nthis.Vector = Vector;\r\n\r\nColor = (function(superClass) {\r\n  extend(Color, superClass);\r\n\r\n  function Color(args) {\r\n    Color.__super__.constructor.apply(this, arguments);\r\n    this.alpha = arguments.length >= 4 ? Math.min(1, Math.max(arguments[3], 0)) : 1;\r\n    this.mode = arguments.length >= 5 ? arguments[4] : 'rgb';\r\n  }\r\n\r\n  Color.XYZ = {\r\n    D65: {\r\n      x: 95.047,\r\n      y: 100,\r\n      z: 108.883\r\n    }\r\n  };\r\n\r\n  Color.parseHex = function(hex, asColor) {\r\n    var hexValue, rgb;\r\n    if (asColor == null) {\r\n      asColor = false;\r\n    }\r\n    if (hex.indexOf('#') === 0) {\r\n      hex = hex.substr(1);\r\n    }\r\n    if (hex.length === 3) {\r\n      hex = \"\" + hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\r\n    }\r\n    if (hex.length === 8) {\r\n      this.alpha = hex.substr(6) & 0xFF / 255;\r\n      hex = hex.substring(0, 6);\r\n    }\r\n    hexValue = parseInt(hex, 16);\r\n    rgb = [hexValue >> 16, hexValue >> 8 & 0xFF, hexValue & 0xFF];\r\n    if (asColor) {\r\n      return new Color(rgb[0], rgb[1], rgb[2]);\r\n    } else {\r\n      return rgb;\r\n    }\r\n  };\r\n\r\n  Color.prototype.setMode = function(m) {\r\n    m = m.toLowerCase();\r\n    if (m !== this.mode) {\r\n      switch (this.mode) {\r\n        case 'hsl':\r\n          this.copy(Point.get(Color.HSLtoRGB(this.x, this.y, this.z)));\r\n          break;\r\n        case 'hsb':\r\n          this.copy(Point.get(Color.HSBtoRGB(this.x, this.y, this.z)));\r\n          break;\r\n        case 'lab':\r\n          this.copy(Point.get(Color.LABtoRGB(this.x, this.y, this.z)));\r\n          break;\r\n        case 'lch':\r\n          this.copy(Point.get(Color.LCHtoRGB(this.x, this.y, this.z)));\r\n          break;\r\n        case 'xyz':\r\n          this.copy(Point.get(Color.XYZtoRGB(this.x, this.y, this.z)));\r\n      }\r\n      switch (m) {\r\n        case 'hsl':\r\n          this.copy(Point.get(Color.RGBtoHSL(this.x, this.y, this.z)));\r\n          break;\r\n        case 'hsb':\r\n          this.copy(Point.get(Color.RGBtoHSB(this.x, this.y, this.z)));\r\n          break;\r\n        case 'lab':\r\n          this.copy(Point.get(Color.RGBtoLAB(this.x, this.y, this.z)));\r\n          break;\r\n        case 'lch':\r\n          this.copy(Point.get(Color.RGBtoLCH(this.x, this.y, this.z)));\r\n          break;\r\n        case 'xyz':\r\n          this.copy(Point.get(Color.RGBtoXYZ(this.x, this.y, this.z)));\r\n      }\r\n    }\r\n    this.mode = m;\r\n    return this;\r\n  };\r\n\r\n  Color.prototype.hex = function() {\r\n    var _hexstring, cs, ct, n;\r\n    if (this.mode === 'rgb') {\r\n      this.floor();\r\n    }\r\n    cs = this.values(this.mode !== 'rgb');\r\n    _hexstring = function(n) {\r\n      n = n.toString(16);\r\n      if (n.length < 2) {\r\n        return '0' + n;\r\n      } else {\r\n        return n;\r\n      }\r\n    };\r\n    ct = (function() {\r\n      var aa, len1, results;\r\n      results = [];\r\n      for (aa = 0, len1 = cs.length; aa < len1; aa++) {\r\n        n = cs[aa];\r\n        results.push(_hexstring(n));\r\n      }\r\n      return results;\r\n    })();\r\n    return '#' + ct[0] + ct[1] + ct[2];\r\n  };\r\n\r\n  Color.prototype.rgb = function() {\r\n    var cs;\r\n    if (this.mode === 'rgb') {\r\n      this.floor();\r\n    }\r\n    cs = this.values(this.mode !== 'rgb');\r\n    return \"rgb(\" + cs[0] + \", \" + cs[1] + \", \" + cs[2] + \")\";\r\n  };\r\n\r\n  Color.prototype.rgba = function() {\r\n    var cs;\r\n    if (this.mode === 'rgb') {\r\n      this.floor();\r\n    }\r\n    cs = this.values(this.mode !== 'rgb');\r\n    return \"rgba(\" + cs[0] + \", \" + cs[1] + \", \" + cs[2] + \", \" + this.alpha + \")\";\r\n  };\r\n\r\n  Color.prototype.values = function(toRGB) {\r\n    var cs, v;\r\n    if (toRGB == null) {\r\n      toRGB = false;\r\n    }\r\n    cs = [this.x, this.y, this.z];\r\n    if (toRGB && this.mode !== 'rgb') {\r\n      switch (this.mode) {\r\n        case 'hsl':\r\n          cs = Color.HSLtoRGB(this.x, this.y, this.z);\r\n          break;\r\n        case 'hsb':\r\n          cs = Color.HSBtoRGB(this.x, this.y, this.z);\r\n          break;\r\n        case 'lab':\r\n          cs = Color.LABtoRGB(this.x, this.y, this.z);\r\n          break;\r\n        case 'lch':\r\n          cs = Color.LCHtoRGB(this.x, this.y, this.z);\r\n          break;\r\n        case 'xyz':\r\n          cs = Color.XYZtoRGB(this.x, this.y, this.z);\r\n      }\r\n    }\r\n    return (function() {\r\n      var aa, len1, results;\r\n      results = [];\r\n      for (aa = 0, len1 = cs.length; aa < len1; aa++) {\r\n        v = cs[aa];\r\n        results.push(Math.floor(v));\r\n      }\r\n      return results;\r\n    })();\r\n  };\r\n\r\n  Color.RGBtoHSL = function(r, g, b, normalizedInput, normalizedOutput) {\r\n    var d, h, l, max, min, s;\r\n    if (!normalizedInput) {\r\n      r /= 255;\r\n      g /= 255;\r\n      b /= 255;\r\n    }\r\n    max = Math.max(r, g, b);\r\n    min = Math.min(r, g, b);\r\n    h = (max + min) / 2;\r\n    s = h;\r\n    l = h;\r\n    if (max === min) {\r\n      h = 0;\r\n      s = 0;\r\n    } else {\r\n      d = max - min;\r\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n      switch (max) {\r\n        case r:\r\n          h = (g - b) / d + (g < b ? 6 : 0);\r\n          break;\r\n        case g:\r\n          h = (b - r) / d + 2;\r\n          break;\r\n        case b:\r\n          h = (r - g) / d + 4;\r\n          break;\r\n        default:\r\n          h = 0;\r\n      }\r\n    }\r\n    if (normalizedOutput) {\r\n      return [h / 60, s, l];\r\n    } else {\r\n      return [h * 60, s, l];\r\n    }\r\n  };\r\n\r\n  Color.HSLtoRGB = function(h, s, l, normalizedInput, normalizedOutput) {\r\n    var b, g, hue2rgb, p, q, r;\r\n    if (s === 0) {\r\n      if (normalizedOutput) {\r\n        return [1, 1, 1];\r\n      } else {\r\n        return [255, 255, 255];\r\n      }\r\n    } else {\r\n      if (!normalizedInput) {\r\n        h /= 360;\r\n      }\r\n      q = l <= 0.5 ? l * (1 + s) : l + s - (l * s);\r\n      p = 2 * l - q;\r\n      hue2rgb = function(p, q, t) {\r\n        if (t < 0) {\r\n          t += 1;\r\n        } else if (t > 1) {\r\n          t -= 1;\r\n        }\r\n        if (t * 6 < 1) {\r\n          return p + (q - p) * t * 6;\r\n        } else if (t * 2 < 1) {\r\n          return q;\r\n        } else if (t * 3 < 2) {\r\n          return p + (q - p) * ((2 / 3) - t) * 6;\r\n        } else {\r\n          return p;\r\n        }\r\n      };\r\n      r = hue2rgb(p, q, h + 1 / 3);\r\n      g = hue2rgb(p, q, h);\r\n      b = hue2rgb(p, q, h - 1 / 3);\r\n      if (normalizedOutput) {\r\n        return [r, g, b];\r\n      } else {\r\n        return [r * 255, g * 255, b * 255];\r\n      }\r\n    }\r\n  };\r\n\r\n  Color.RGBtoHSB = function(r, g, b, normalizedInput, normalizedOutput) {\r\n    var d, h, max, min, s, v;\r\n    if (!normalizedInput) {\r\n      r /= 255;\r\n      g /= 255;\r\n      b /= 255;\r\n    }\r\n    max = Math.max(r, g, b);\r\n    min = Math.min(r, g, b);\r\n    d = max - min;\r\n    s = max === 0 ? 0 : d / max;\r\n    v = max;\r\n    if (max === min) {\r\n      h = 0;\r\n    } else {\r\n      switch (max) {\r\n        case r:\r\n          h = (g - b) / d + (g < b ? 6 : 0);\r\n          break;\r\n        case g:\r\n          h = (b - r) / d + 2;\r\n          break;\r\n        case b:\r\n          h = (r - g) / d + 4;\r\n          break;\r\n        default:\r\n          h = 0;\r\n      }\r\n    }\r\n    if (normalizedOutput) {\r\n      return [h / 60, s, v];\r\n    } else {\r\n      return [h * 60, s, v];\r\n    }\r\n  };\r\n\r\n  Color.HSBtoRGB = function(h, s, v, normalizedInput, normalizedOutput) {\r\n    var f, i, p, q, rgb, t;\r\n    if (!normalizedInput) {\r\n      h /= 360;\r\n    }\r\n    i = Math.floor(h * 6);\r\n    f = h * 6 - i;\r\n    p = v * (1 - s);\r\n    q = v * (1 - f * s);\r\n    t = v * (1 - (1 - f) * s);\r\n    switch (i % 6) {\r\n      case 0:\r\n        rgb = [v, t, p];\r\n        break;\r\n      case 1:\r\n        rgb = [q, v, p];\r\n        break;\r\n      case 2:\r\n        rgb = [p, v, t];\r\n        break;\r\n      case 3:\r\n        rgb = [p, q, v];\r\n        break;\r\n      case 4:\r\n        rgb = [t, p, v];\r\n        break;\r\n      case 5:\r\n        rgb = [v, p, q];\r\n        break;\r\n      default:\r\n        rgb = [0, 0, 0];\r\n    }\r\n    if (normalizedOutput) {\r\n      return rgb;\r\n    } else {\r\n      return [rgb[0] * 255, rgb[1] * 255, rgb[2] * 255];\r\n    }\r\n  };\r\n\r\n  Color.RGBtoLAB = function(r, g, b, normalizedInput, normalizedOutput) {\r\n    var xyz;\r\n    if (normalizedInput) {\r\n      r *= 255;\r\n      g *= 255;\r\n      b *= 255;\r\n    }\r\n    xyz = Color.RGBtoXYZ(r, g, b);\r\n    return Color.XYZtoLAB(xyz[0], xyz[1], xyz[2]);\r\n  };\r\n\r\n  Color.LABtoRGB = function(L, a, b, normalizedInput, normalizedOutput) {\r\n    var rgb, xyz;\r\n    if (normalizedInput) {\r\n      L *= 100;\r\n      a = (a - 0.5) * 127;\r\n      b = (b - 0.5) * 127;\r\n    }\r\n    xyz = Color.LABtoXYZ(L, a, b);\r\n    rgb = Color.XYZtoRGB(xyz[0], xyz[1], xyz[2]);\r\n    if (normalizedOutput) {\r\n      return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255];\r\n    } else {\r\n      return rgb;\r\n    }\r\n  };\r\n\r\n  Color.RGBtoLCH = function(r, g, b, normalizedInput, normalizedOutput) {\r\n    var lab, lch;\r\n    if (normalizedInput) {\r\n      r *= 255;\r\n      g *= 255;\r\n      b *= 255;\r\n    }\r\n    lab = Color.RGBtoLAB(r, g, b);\r\n    lch = Color.LABtoLCH(lab[0], lab[1], lab[2]);\r\n    if (normalizedOutput) {\r\n      return [lch[0] / 100, lch[1] / 100, lch[2] / 360];\r\n    } else {\r\n      return lch;\r\n    }\r\n  };\r\n\r\n  Color.LCHtoRGB = function(L, c, h, normalizedInput, normalizedOutput) {\r\n    var lab, rgb, xyz;\r\n    if (normalizedInput) {\r\n      L *= 100;\r\n      c *= 100;\r\n      h *= 360;\r\n    }\r\n    lab = Color.LCHtoLAB(L, c, h);\r\n    xyz = Color.LABtoXYZ(lab[0], lab[1], lab[2]);\r\n    rgb = Color.XYZtoRGB(xyz[0], xyz[1], xyz[2]);\r\n    if (normalizedOutput) {\r\n      return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255];\r\n    } else {\r\n      return rgb;\r\n    }\r\n  };\r\n\r\n  Color.XYZtoRGB = function(x, y, z, normalizedInput, normalizedOutput) {\r\n    var aa, c, i, len1, rgb;\r\n    if (!normalizedInput) {\r\n      x = x / 100;\r\n      y = y / 100;\r\n      z = z / 100;\r\n    }\r\n    rgb = [x * 3.2404542 + y * -1.5371385 + z * -0.4985314, x * -0.9692660 + y * 1.8760108 + z * 0.0415560, x * 0.0556434 + y * -0.2040259 + z * 1.0572252];\r\n    for (i = aa = 0, len1 = rgb.length; aa < len1; i = ++aa) {\r\n      c = rgb[i];\r\n      if (c < 0) {\r\n        rgb[i] = 0;\r\n      } else {\r\n        rgb[i] = Math.min(1, c > 0.0031308 ? 1.055 * (Math.pow(c, 1 / 2.4)) - 0.055 : 12.92 * c);\r\n      }\r\n    }\r\n    if (normalizedOutput) {\r\n      return rgb;\r\n    } else {\r\n      return [Math.round(rgb[0] * 255), Math.round(rgb[1] * 255), Math.round(rgb[2] * 255)];\r\n    }\r\n  };\r\n\r\n  Color.RGBtoXYZ = function(r, g, b, normalizedInput, normalizedOutput) {\r\n    if (!normalizedInput) {\r\n      r = r / 255;\r\n      g = g / 255;\r\n      b = b / 255;\r\n    }\r\n    r = r > 0.04045 ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92;\r\n    g = g > 0.04045 ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92;\r\n    b = b > 0.04045 ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;\r\n    if (!normalizedOutput) {\r\n      r = r * 100;\r\n      g = g * 100;\r\n      b = b * 100;\r\n    }\r\n    return [r * 0.4124564 + g * 0.3575761 + b * 0.1804375, r * 0.2126729 + g * 0.7151522 + b * 0.0721750, r * 0.0193339 + g * 0.1191920 + b * 0.9503041];\r\n  };\r\n\r\n  Color.XYZtoLAB = function(x, y, z) {\r\n    var calc, cy;\r\n    x = x / Color.XYZ.D65.x;\r\n    y = y / Color.XYZ.D65.y;\r\n    z = z / Color.XYZ.D65.z;\r\n    calc = function(n) {\r\n      if (n > 0.008856) {\r\n        return Math.pow(n, 1 / 3);\r\n      } else {\r\n        return (7.787 * n) + 16 / 116;\r\n      }\r\n    };\r\n    cy = calc(y);\r\n    return [(116 * cy) - 16, 500 * (calc(x) - cy), 200 * (cy - calc(z))];\r\n  };\r\n\r\n  Color.LABtoXYZ = function(L, a, b) {\r\n    var calc, x, xyz, y, z;\r\n    y = (L + 16) / 116;\r\n    x = a / 500 + y;\r\n    z = y - b / 200;\r\n    calc = function(n) {\r\n      var nnn;\r\n      nnn = Math.pow(n, 3);\r\n      if (nnn > 0.008856) {\r\n        return nnn;\r\n      } else {\r\n        return (n - 16 / 116) / 7.787;\r\n      }\r\n    };\r\n    xyz = [Math.min(Color.XYZ.D65.x, Color.XYZ.D65.x * calc(x)), Math.min(Color.XYZ.D65.y, Color.XYZ.D65.y * calc(y)), Math.min(Color.XYZ.D65.y, Color.XYZ.D65.z * calc(z))];\r\n    return xyz;\r\n  };\r\n\r\n  Color.XYZtoLUV = function(x, y, z) {\r\n    var L, refU, refV, u, v;\r\n    u = (4 * x) / (x + (15 * y) + (3 * z));\r\n    v = (9 * y) / (x + (15 * y) + (3 * z));\r\n    y = y / 100;\r\n    y = y > 0.008856 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116;\r\n    refU = (4 * Color.XYZ.D65.x) / (Color.XYZ.D65.x + (15 * Color.XYZ.D65.y) + (3 * Color.XYZ.D65.z));\r\n    refV = (9 * Color.XYZ.D65.y) / (Color.XYZ.D65.x + (15 * Color.XYZ.D65.y) + (3 * Color.XYZ.D65.z));\r\n    L = (116 * y) - 16;\r\n    return [L, 13 * L * (u - refU), 13 * L * (v - refV)];\r\n  };\r\n\r\n  Color.LUVtoXYZ = function(L, u, v) {\r\n    var cubeY, refU, refV, x, y;\r\n    y = (L + 16) / 116;\r\n    cubeY = y * y * y;\r\n    y = cubeY > 0.008856 ? cubeY : (y - 16 / 116) / 7.787;\r\n    refU = (4 * Color.XYZ.D65.x) / (Color.XYZ.D65.x + (15 * Color.XYZ.D65.y) + (3 * Color.XYZ.D65.z));\r\n    refV = (9 * Color.XYZ.D65.y) / (Color.XYZ.D65.x + (15 * Color.XYZ.D65.y) + (3 * Color.XYZ.D65.z));\r\n    u = u / (13 * L) + refU;\r\n    v = v / (13 * L) + refV;\r\n    y = y * 100;\r\n    x = -1 * (9 * y * u) / ((u - 4) * v - u * v);\r\n    return [x, y, (9 * y - (15 * v * y) - (v * x)) / (3 * v)];\r\n  };\r\n\r\n  Color.LABtoLCH = function(L, a, b) {\r\n    var h;\r\n    h = Math.atan2(b, a);\r\n    h = h > 0 ? 180 * h / Math.PI : 360 - (180 * Math.abs(h) / Math.PI);\r\n    return [L, Math.sqrt(a * a + b * b), h];\r\n  };\r\n\r\n  Color.LCHtoLAB = function(L, c, h) {\r\n    var radH;\r\n    radH = Math.PI * h / 180;\r\n    return [L, Math.cos(radH) * c, Math.sin(radH) * c];\r\n  };\r\n\r\n  Color.LUVtoLCH = function(L, u, v) {\r\n    return LABtoLCH(L, u, v);\r\n  };\r\n\r\n  Color.LCHtoLUV = function(L, c, h) {\r\n    return LCHtoLAB(L, c, h);\r\n  };\r\n\r\n  return Color;\r\n\r\n})(Vector);\r\n\r\nthis.Color = Color;\r\n\r\nCircle = (function(superClass) {\r\n  extend(Circle, superClass);\r\n\r\n  function Circle() {\r\n    Circle.__super__.constructor.apply(this, arguments);\r\n    this.radius = arguments[3] != null ? arguments[3] : 0;\r\n  }\r\n\r\n  Circle.prototype.setRadius = function(r) {\r\n    this.radius = r;\r\n    return this;\r\n  };\r\n\r\n  Circle.prototype.intersectPoint = function(args) {\r\n    var d, item;\r\n    item = new Vector(Point.get(arguments));\r\n    d = item.$subtract(this);\r\n    return d.x * d.x + d.y * d.y < this.radius * this.radius;\r\n  };\r\n\r\n  Circle.prototype.intersectPath = function(path, get_pts) {\r\n    var a, b, c, d, disc, discSqrt, f, p, p1, p2, q, t1, t2;\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    if (!path instanceof Pair) {\r\n      return false;\r\n    }\r\n    d = path.direction();\r\n    f = this.$subtract(path);\r\n    a = d.dot(d, Const.xy);\r\n    b = f.dot(d, Const.xy);\r\n    c = f.dot(f, Const.xy) - (this.radius * this.radius);\r\n    p = b / a;\r\n    q = c / a;\r\n    disc = p * p - q;\r\n    if (disc < 0) {\r\n      return (get_pts ? [] : false);\r\n    } else {\r\n      if (!get_pts) {\r\n        return true;\r\n      }\r\n      discSqrt = Math.sqrt(disc);\r\n      t1 = -p + discSqrt;\r\n      t2 = -p - discSqrt;\r\n      p1 = new Point(path.x - d.x * t1, path.y - d.y * t1);\r\n      p2 = new Point(path.x - d.x * t2, path.y - d.y * t2);\r\n      if (disc === 0) {\r\n        return [p1];\r\n      } else {\r\n        return [p1, p2];\r\n      }\r\n    }\r\n  };\r\n\r\n  Circle.prototype.intersectLine = function(line, get_pts) {\r\n    var aa, bounds, len1, p, pi, pts;\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    pts = this.intersectPath(line);\r\n    if (pts && pts.length > 0) {\r\n      pi = [];\r\n      bounds = line.bounds();\r\n      for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n        p = pts[aa];\r\n        if (Rectangle.contain(p, bounds, bounds.p1)) {\r\n          if (!get_pts) {\r\n            return true;\r\n          }\r\n          pi.push(p);\r\n        }\r\n      }\r\n      return (get_pts ? pi : pi.length > 0);\r\n    } else {\r\n      return (get_pts ? [] : false);\r\n    }\r\n  };\r\n\r\n  Circle.prototype.intersectLines = function(lines, get_pts) {\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    return Line.intersectLines(this, lines, get_pts);\r\n  };\r\n\r\n  Circle.prototype.intersectCircle = function(circle, get_pts) {\r\n    var a, ca_r2, cb_r2, dr, dr2, dv, h, p;\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    dv = circle.$subtract(this);\r\n    dr2 = dv.magnitude(false);\r\n    dr = Math.sqrt(dr2);\r\n    ca_r2 = this.radius * this.radius;\r\n    cb_r2 = circle.radius * circle.radius;\r\n    if (dr > this.radius + circle.radius) {\r\n      return (get_pts ? [] : false);\r\n    } else if (dr < Math.abs(this.radius - circle.radius)) {\r\n      return (get_pts ? [new Vector(this), new Vector(circle)] : true);\r\n    } else {\r\n      if (!get_pts) {\r\n        return true;\r\n      }\r\n      a = (ca_r2 - cb_r2 + dr2) / (2 * dr);\r\n      h = Math.sqrt(ca_r2 - a * a);\r\n      p = dv.$multiply(a / dr).add(this);\r\n      return [new Vector(p.x + h * dv.y / dr, p.y - h * dv.x / dr), new Vector(p.x - h * dv.y / dr, p.y + h * dv.x / dr)];\r\n    }\r\n  };\r\n\r\n  Circle.prototype.hasIntersect = function(item, get_pts) {\r\n    var d, ins;\r\n    if (get_pts == null) {\r\n      get_pts = false;\r\n    }\r\n    if (item instanceof Circle) {\r\n      return this.intersectCircle(item, get_pts);\r\n    } else if (item instanceof Rectangle || item instanceof PointSet || item instanceof Triangle) {\r\n      return this.intersectLines(item.sides(), get_pts);\r\n    } else if (item instanceof Pair) {\r\n      ins = this.intersectLine(item);\r\n      if (!get_pts) {\r\n        return ins.length > 0;\r\n      } else {\r\n        return ins;\r\n      }\r\n    } else if (item instanceof Point) {\r\n      d = item.$subtract(this);\r\n      return d.x * d.x + d.y * d.y < this.radius * this.radius;\r\n    } else {\r\n      if (get_pts) {\r\n        return [];\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n\r\n  return Circle;\r\n\r\n})(Vector);\r\n\r\nthis.Circle = Circle;\r\n\r\nParticle = (function(superClass) {\r\n  extend(Particle, superClass);\r\n\r\n  function Particle() {\r\n    Particle.__super__.constructor.apply(this, arguments);\r\n    this.id = 0;\r\n    this.life = {\r\n      age: 0,\r\n      maxAge: 0,\r\n      active: true,\r\n      complete: false\r\n    };\r\n    this.momentum = new Vector();\r\n    this.velocity = new Vector();\r\n    this.mass = 2;\r\n    this.friction = 0;\r\n    this.frame_ms = 20;\r\n  }\r\n\r\n  Particle.prototype.play = function(time, timeDiff) {\r\n    var dt, results, t;\r\n    t = 0;\r\n    results = [];\r\n    while (timeDiff > 0) {\r\n      dt = Math.min(timeDiff, this.frame_ms);\r\n      this.integrate(t / 1000, dt / 1000);\r\n      timeDiff -= dt;\r\n      t += dt;\r\n      results.push(this.life.age++);\r\n    }\r\n    return results;\r\n  };\r\n\r\n  Particle.prototype.integrate = function(t, dt) {\r\n    return this.integrateRK4(t, dt);\r\n  };\r\n\r\n  Particle.prototype.forces = function(state, t) {\r\n    return {\r\n      force: new Vector()\r\n    };\r\n  };\r\n\r\n  Particle.prototype.impulse = function(force_dt) {\r\n    this.momentum.add(force_dt);\r\n    return this.velocity = this.momentum.$divide(this.mass);\r\n  };\r\n\r\n  Particle.prototype._evaluate = function(t, dt, derivative) {\r\n    var f, state;\r\n    if (dt == null) {\r\n      dt = 0;\r\n    }\r\n    if (derivative == null) {\r\n      derivative = false;\r\n    }\r\n    if (dt !== 0 && derivative) {\r\n      state = {\r\n        position: this.$add(derivative.velocity.$multiply(dt)),\r\n        momentum: this.momentum.$add(derivative.force.$multiply(dt))\r\n      };\r\n    } else {\r\n      state = {\r\n        position: new Vector(this),\r\n        momentum: new Vector(this.momentum)\r\n      };\r\n    }\r\n    state.velocity = state.momentum.$divide(this.mass);\r\n    f = this.forces(state, t + dt);\r\n    return {\r\n      velocity: state.velocity,\r\n      force: f.force\r\n    };\r\n  };\r\n\r\n  Particle.prototype.integrateRK4 = function(t, dt) {\r\n    var _map, a, b, c, d;\r\n    _map = function(m1, m2, m3, m4) {\r\n      var v;\r\n      v = new Vector((m1.x + 2 * (m2.x + m3.x) + m4.x) / 6, (m1.y + 2 * (m2.y + m3.y) + m4.y) / 6, (m1.z + 2 * (m2.z + m3.z) + m4.z) / 6);\r\n      return v;\r\n    };\r\n    a = this._evaluate(t, 0);\r\n    b = this._evaluate(t, dt * 0.5, a);\r\n    c = this._evaluate(t, dt * 0.5, b);\r\n    d = this._evaluate(t, dt, c);\r\n    this.add(_map(a.velocity, b.velocity, c.velocity, d.velocity));\r\n    return this.momentum.add(_map(a.force, b.force, c.force, d.force));\r\n  };\r\n\r\n  Particle.prototype.integrateEuler = function(t, dt) {\r\n    var f;\r\n    f = this.forces({\r\n      position: new Vector(this),\r\n      momentum: new Vector(this.momentum)\r\n    }, t + dt);\r\n    this.add(this.velocity);\r\n    this.momentum.add(f.force);\r\n    return this.velocity = this.momentum.$divide(this.mass);\r\n  };\r\n\r\n  Particle.prototype.collideLine2d = function(wall, precise) {\r\n    var collideEndPt, collided, crossed, curr_dist, curr_pos, dot, end_path, next_dist, next_pos, path, perpend, prev_pt_on_wall, proj, pt, pt2, pt_on_wall, pvec, r, tangent, wall_path;\r\n    if (precise == null) {\r\n      precise = true;\r\n    }\r\n    curr_pos = new Vector(this);\r\n    curr_dist = Math.abs(wall.getDistanceFromPoint(curr_pos));\r\n    collided = Math.abs(curr_dist) < this.radius;\r\n    if (precise) {\r\n      next_pos = this.$add(this.velocity);\r\n      next_dist = Math.abs(wall.getDistanceFromPoint(next_pos));\r\n      crossed = wall.intersectLine(new Line(curr_pos).to(next_pos));\r\n      if (crossed) {\r\n        next_pos = crossed.$add(this.velocity.$normalize().$multiply(-this.radius / 2));\r\n        next_dist = Math.abs(wall.getDistanceFromPoint(next_pos));\r\n        collided = true;\r\n      }\r\n    }\r\n    if (collided) {\r\n      pt_on_wall = wall.getPerpendicularFromPoint(curr_pos);\r\n      wall_path = wall.$subtract(wall.p1);\r\n      collideEndPt = false;\r\n      if (!wall.withinBounds(pt_on_wall, Const.xy)) {\r\n        if (this.intersectPoint(wall)) {\r\n          collideEndPt = true;\r\n          end_path = this.$subtract(wall);\r\n        }\r\n        if (this.intersectPoint(wall.p1)) {\r\n          collideEndPt = true;\r\n          end_path = this.$subtract(wall.p1);\r\n        }\r\n        if (collideEndPt) {\r\n          wall_path = new Vector(-end_path.y, end_path.x);\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n      dot = wall_path.dot(this.velocity);\r\n      proj = wall_path.$multiply(dot / wall_path.dot(wall_path));\r\n      tangent = proj.$subtract(this.velocity);\r\n      this.velocity = proj.$add(tangent);\r\n      this.momentum = this.velocity.$multiply(this.mass);\r\n      if (precise && !collideEndPt) {\r\n        perpend = new Line(pt_on_wall).to(curr_pos);\r\n        prev_pt_on_wall = wall.getPerpendicularFromPoint(next_pos);\r\n        path = new Line(pt_on_wall).to(prev_pt_on_wall);\r\n        pvec = path.direction();\r\n        r = (this.radius - curr_dist) / (next_dist - curr_dist);\r\n        pt = pvec.$multiply(r).$add(path);\r\n        pt2 = pt.$add(perpend.direction().$normalize().$multiply(this.radius));\r\n        this.set(pt2.$add(this.velocity.$normalize()));\r\n      }\r\n    }\r\n    return collided;\r\n  };\r\n\r\n  Particle.prototype.collideWithinBounds = function(bound) {\r\n    if (this.x - this.radius < bound.x || this.x + this.radius > bound.p1.x) {\r\n      if (this.x - this.radius < bound.x) {\r\n        this.x = bound.x + this.radius;\r\n      } else if (this.x + this.radius > bound.p1.x) {\r\n        this.x = bound.p1.x - this.radius;\r\n      }\r\n      this.velocity.x *= -1;\r\n      this.momentum = this.velocity.$multiply(this.mass);\r\n      return true;\r\n    } else if (this.y - this.radius < bound.y || this.y + this.radius > bound.p1.y) {\r\n      if (this.y - this.radius < bound.y) {\r\n        this.y = bound.y + this.radius;\r\n      } else if (this.y + this.radius > bound.p1.y) {\r\n        this.y = bound.p1.y - this.radius;\r\n      }\r\n      this.velocity.y *= -1;\r\n      this.momentum = this.velocity.$multiply(this.mass);\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  Particle.prototype.collideParticle2d = function(pb) {\r\n    if (this.hasIntersect(pb)) {\r\n      return Particle.collideParticle2d(this, pb, true);\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  Particle.collideParticle2d = function(pa, pb, update, checkOverlap) {\r\n    var d1, d2, dir, dot1n, dot1t, dot2n, dot2t, mag, magDiff, normal, pav, pbv, tangent, v1n, v1t, v2n, v2t;\r\n    if (update == null) {\r\n      update = true;\r\n    }\r\n    if (checkOverlap == null) {\r\n      checkOverlap = true;\r\n    }\r\n    normal = pa.$subtract(pb).normalize();\r\n    tangent = new Vector(-normal.y, normal.x);\r\n    dot1n = normal.dot(pa.velocity);\r\n    dot1t = tangent.dot(pa.velocity);\r\n    dot2n = normal.dot(pb.velocity);\r\n    dot2t = tangent.dot(pb.velocity);\r\n    d1 = (dot1n * (pa.mass - pb.mass) + 2 * pb.mass * dot2n) / (pa.mass + pb.mass);\r\n    d2 = (dot2n * (pb.mass - pa.mass) + 2 * pa.mass * dot1n) / (pa.mass + pb.mass);\r\n    v1n = normal.$multiply(d1);\r\n    v1t = tangent.$multiply(dot1t);\r\n    v2n = normal.$multiply(d2);\r\n    v2t = tangent.$multiply(dot2t);\r\n    pav = v1n.$add(v1t);\r\n    pbv = v2n.$add(v2t);\r\n    if (checkOverlap) {\r\n      mag = pa.magnitude(pb);\r\n      if (mag < pa.radius + pb.radius) {\r\n        dir = pa.$subtract(pb).normalize();\r\n        magDiff = Math.abs(mag - pa.radius - pb.radius) / 1.98;\r\n        pa.add(dir.multiply(magDiff));\r\n        pb.add(dir.multiply(-magDiff));\r\n      }\r\n    }\r\n    if (update) {\r\n      pa.velocity = pav;\r\n      pb.velocity = pbv;\r\n      pa.momentum = pa.velocity.$multiply(pa.mass);\r\n      pb.momentum = pb.velocity.$multiply(pb.mass);\r\n    }\r\n    return [pav, pbv];\r\n  };\r\n\r\n  Particle.force_gravitation = function(state, t, pa, pb, g) {\r\n    var d, force, mag, meterToPixel;\r\n    if (g == null) {\r\n      g = 0.0067;\r\n    }\r\n    meterToPixel = 30;\r\n    d = pb.$subtract(state.position);\r\n    mag = d.magnitude() / meterToPixel;\r\n    force = mag === 0 ? 0 : t * g * pa.mass * pb.mass / (mag * mag);\r\n    d.normalize().multiply(force);\r\n    return {\r\n      force: d\r\n    };\r\n  };\r\n\r\n  Particle.RK4 = function(c, d, func, dt, t) {\r\n    var a1, a2, a3, c1, c2, c3, c4, d1, d2, d3, d4, dc, dd;\r\n    c1 = c;\r\n    d1 = d;\r\n    a1 = func(c1, d1, 0, t);\r\n    c2 = c + 0.5 * d1 * dt;\r\n    d2 = d + 0.5 * a1 * dt;\r\n    a2 = func(c2, d2, dt / 2, t);\r\n    c3 = c + 0.5 * d2 * dt;\r\n    d3 = d + 0.5 * a2 * dt;\r\n    a3 = func(c3, d3, dt / 2, t);\r\n    c4 = c + d3 * dt;\r\n    d4 = d + a3 * dt;\r\n    dc = (c1 + 2 * (c2 + c3) + c4) / 6;\r\n    dd = (d1 + 2 * (d2 + d3) + d4) / 6;\r\n    return {\r\n      c: c + dc * dt,\r\n      d: d + dd * dt\r\n    };\r\n  };\r\n\r\n  return Particle;\r\n\r\n})(Circle);\r\n\r\nthis.Particle = Particle;\r\n\r\nParticleSystem = (function() {\r\n  function ParticleSystem() {\r\n    this.count = 0;\r\n    this.particles = [];\r\n    this.time = 0;\r\n  }\r\n\r\n  ParticleSystem.prototype.add = function(particle) {\r\n    particle.id = this.count++;\r\n    this.particles.push(particle);\r\n    return this;\r\n  };\r\n\r\n  ParticleSystem.prototype.remove = function(particle) {\r\n    if (particle && particle.life) {\r\n      particle.life.complete = true;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  ParticleSystem.prototype.animate = function(time, frame, ctx) {\r\n    var _remove, aa, ab, i, index, len1, len2, p, ref, results;\r\n    this.time++;\r\n    _remove = [];\r\n    ref = this.particles;\r\n    for (i = aa = 0, len1 = ref.length; aa < len1; i = ++aa) {\r\n      p = ref[i];\r\n      if (p.life.complete) {\r\n        _remove.push(i);\r\n      } else if (p.life.active) {\r\n        p.animate(time, frame, ctx);\r\n      }\r\n    }\r\n    if (_remove.length > 0) {\r\n      results = [];\r\n      for (ab = 0, len2 = _remove.length; ab < len2; ab++) {\r\n        index = _remove[ab];\r\n        results.push(this.particles.splice(index, 1));\r\n      }\r\n      return results;\r\n    }\r\n  };\r\n\r\n  return ParticleSystem;\r\n\r\n})();\r\n\r\nthis.ParticleSystem = ParticleSystem;\r\n\r\nPair = (function(superClass) {\r\n  extend(Pair, superClass);\r\n\r\n  function Pair() {\r\n    Pair.__super__.constructor.apply(this, arguments);\r\n    this.p1 = new Vector(this.x, this.y, this.z);\r\n    if (arguments.length === 4) {\r\n      this.z = 0;\r\n      this.p1.set(arguments[2], arguments[3]);\r\n    } else if (arguments.length === 6) {\r\n      this.p1.set(arguments[3], arguments[4], arguments[5]);\r\n    }\r\n  }\r\n\r\n  Pair.prototype.to = function() {\r\n    this.p1 = new Vector(Point.get(arguments));\r\n    return this;\r\n  };\r\n\r\n  Pair.prototype.getAt = function(index) {\r\n    if (index === 1 || index === \"p1\") {\r\n      return this.p1;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Pair.prototype.$getAt = function(index) {\r\n    return new Vector(this.getAt(index));\r\n  };\r\n\r\n  Pair.prototype.relative = function() {\r\n    this.p1.add(this);\r\n    return this;\r\n  };\r\n\r\n  Pair.prototype.$relative = function() {\r\n    return this.$add(this.p1);\r\n  };\r\n\r\n  Pair.prototype.bounds = function() {\r\n    return new Pair(this.$min(this.p1)).to(this.$max(this.p1));\r\n  };\r\n\r\n  Pair.prototype.withinBounds = function(pt, axis) {\r\n    var a, b;\r\n    if (axis) {\r\n      a = this.get2D(axis);\r\n      b = this.p1.get2D(axis);\r\n      if (a.x === b.x) {\r\n        return pt.y >= Math.min(a.y, b.y) && pt.y <= Math.max(a.y, b.y);\r\n      } else if (a.y === b.y) {\r\n        return pt.x >= Math.min(a.x, b.x) && pt.x <= Math.max(a.x, b.x);\r\n      } else {\r\n        return pt.x >= Math.min(a.x, b.x) && pt.y >= Math.min(a.y, b.y) && pt.x <= Math.max(a.x, b.x) && pt.y <= Math.max(a.y, b.y);\r\n      }\r\n    } else {\r\n      return pt.x >= Math.min(this.x, this.p1.x) && pt.y >= Math.min(this.y, this.p1.y) && pt.z >= Math.min(this.z, this.p1.z) && pt.x <= Math.max(this.x, this.p1.x) && pt.y <= Math.max(this.y, this.p1.y) && pt.z <= Math.max(this.z, this.p1.z);\r\n    }\r\n  };\r\n\r\n  Pair.prototype.interpolate = function(t, relative) {\r\n    var p2;\r\n    if (relative == null) {\r\n      relative = false;\r\n    }\r\n    p2 = relative ? this.$relative() : this.p1;\r\n    return new Vector((1 - t) * this.x + t * p2.x, (1 - t) * this.y + t * p2.y, (1 - t) * this.z + t * p2.z);\r\n  };\r\n\r\n  Pair.prototype.midpoint = function() {\r\n    return this.interpolate(0.5);\r\n  };\r\n\r\n  Pair.prototype.direction = function(reverse) {\r\n    if (reverse) {\r\n      return this.$subtract(this.p1);\r\n    } else {\r\n      return this.p1.$subtract(this);\r\n    }\r\n  };\r\n\r\n  Pair.prototype.size = function() {\r\n    if (arguments.length > 0) {\r\n      this.p1 = this.$add(Point.get(arguments));\r\n      return this;\r\n    } else {\r\n      return this.p1.$subtract(this).abs();\r\n    }\r\n  };\r\n\r\n  Pair.prototype.length = function(sqrt) {\r\n    var d, dx, dy, dz;\r\n    if (sqrt == null) {\r\n      sqrt = true;\r\n    }\r\n    dz = this.z - this.p1.z;\r\n    dy = this.y - this.p1.y;\r\n    dx = this.x - this.p1.x;\r\n    d = dx * dx + dy * dy + dz * dz;\r\n    if (sqrt) {\r\n      return Math.sqrt(d);\r\n    } else {\r\n      return d;\r\n    }\r\n  };\r\n\r\n  Pair.prototype.collinear = function(point) {\r\n    return (this.p1.x - this.x) * (point.y - this.y) - (point.x - this.x) * (this.p1.y - this.y);\r\n  };\r\n\r\n  Pair.prototype.resetBounds = function() {\r\n    var temp;\r\n    temp = this.$min(this.p1);\r\n    this.p1.set(this.$max(this.p1));\r\n    this.set(temp);\r\n    return this;\r\n  };\r\n\r\n  Pair.prototype.equal = function(epsilon) {\r\n    if (epsilon == null) {\r\n      epsilon = false;\r\n    }\r\n    if (arguments[0] instanceof Pair) {\r\n      return Pair.__super__.equal.call(this, arguments[0]) && this.p1.equal(arguments[0].p1);\r\n    } else {\r\n      return Pair.__super__.equal.apply(this, arguments);\r\n    }\r\n  };\r\n\r\n  Pair.prototype.clone = function() {\r\n    var p;\r\n    p = new Pair(this);\r\n    p.to(this.p1.clone());\r\n    return p;\r\n  };\r\n\r\n  Pair.prototype.floor = function() {\r\n    Pair.__super__.floor.apply(this, arguments);\r\n    return this.p1.floor();\r\n  };\r\n\r\n  Pair.prototype.toString = function() {\r\n    return \"Pair of vectors from (\" + this.x + \", \" + this.y + \", \" + this.z + \") to (\" + this.p1.x + \", \" + this.p1.y + \", \" + this.p1.z + \")\";\r\n  };\r\n\r\n  Pair.prototype.toArray = function() {\r\n    return [this, this.p1];\r\n  };\r\n\r\n  return Pair;\r\n\r\n})(Vector);\r\n\r\nthis.Pair = Pair;\r\n\r\nLine = (function(superClass) {\r\n  extend(Line, superClass);\r\n\r\n  function Line() {\r\n    Line.__super__.constructor.apply(this, arguments);\r\n  }\r\n\r\n  Line.slope = function(a, b, axis) {\r\n    var p1, p2;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    p1 = a.get2D(axis);\r\n    p2 = b.get2D(axis);\r\n    if (p2.x - p1.x === 0) {\r\n      return false;\r\n    } else {\r\n      return (p2.y - p1.y) / (p2.x - p1.x);\r\n    }\r\n  };\r\n\r\n  Line.intercept = function(a, b, axis) {\r\n    var c, m, p1, p2;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    p1 = a.get2D(axis);\r\n    p2 = b.get2D(axis);\r\n    if (p2.x - p1.x === 0) {\r\n      return false;\r\n    } else {\r\n      m = (p2.y - p1.y) / (p2.x - p1.x);\r\n      c = p1.y - m * p1.x;\r\n      return {\r\n        slope: m,\r\n        yi: c,\r\n        xi: m === 0 ? false : -c / m\r\n      };\r\n    }\r\n  };\r\n\r\n  Line.isPerpendicularLine = function(line1, line2, axis) {\r\n    var s1, s2;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    s1 = Line.slope(line1, line1.p1, axis);\r\n    s2 = Line.slope(line2, line2.p1, axis);\r\n    if (s1 === false) {\r\n      return s2 === 0;\r\n    } else if (s2 === false) {\r\n      return s1 === 0;\r\n    } else {\r\n      return s1 * s2 === -1;\r\n    }\r\n  };\r\n\r\n  Line.prototype.slope = function(axis) {\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    return Line.slope(this, this.p1, axis);\r\n  };\r\n\r\n  Line.prototype.intercept = function(axis) {\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    return Line.intercept(this, this.p1, axis);\r\n  };\r\n\r\n  Line.prototype.getPerpendicular = function(t, len, reverse, axis) {\r\n    var line, pn, pp;\r\n    if (len == null) {\r\n      len = 10;\r\n    }\r\n    if (reverse == null) {\r\n      reverse = false;\r\n    }\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    pn = this.direction().normalize().perpendicular(axis);\r\n    pp = reverse ? pn[1] : pn[0];\r\n    line = new Line(this.interpolate(t));\r\n    line.to(pp.multiply(len).add(line));\r\n    return line;\r\n  };\r\n\r\n  Line.prototype.getDistanceFromPoint = function(pt) {\r\n    var normal, path;\r\n    path = this.$subtract(this.p1);\r\n    normal = new Vector(-path.y, path.x).normalize();\r\n    return this.$subtract(pt).dot(normal);\r\n  };\r\n\r\n  Line.prototype.getPerpendicularFromPoint = function(pt, fromProjection) {\r\n    var proj;\r\n    if (fromProjection == null) {\r\n      fromProjection = true;\r\n    }\r\n    proj = this.p1.$subtract(this).projection(pt.$subtract(this));\r\n    if (!fromProjection) {\r\n      return proj;\r\n    } else {\r\n      return proj.add(this);\r\n    }\r\n  };\r\n\r\n  Line.prototype.intersectPath = function(line, axis) {\r\n    var a, b, ln, p, px, py, y1;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    a = this.intercept(axis);\r\n    b = line.intercept(axis);\r\n    p = this.get2D(axis);\r\n    ln = line.get2D(axis);\r\n    if (a === false) {\r\n      if (b === false) {\r\n        return false;\r\n      }\r\n      y1 = -b.slope * (ln.x - p.x) + ln.y;\r\n      if (axis === Const.xy) {\r\n        return new Vector(p.x, y1);\r\n      } else {\r\n        return new Vector(p.x, y1).get2D(axis, true);\r\n      }\r\n    } else {\r\n      if (b === false) {\r\n        y1 = -a.slope * (p.x - ln.x) + p.y;\r\n        return new Vector(ln.x, y1);\r\n      } else if (b.slope !== a.slope) {\r\n        px = (a.slope * p.x - b.slope * ln.x + ln.y - p.y) / (a.slope - b.slope);\r\n        py = a.slope * (px - p.x) + p.y;\r\n        if (axis === Const.xy) {\r\n          return new Vector(px, py);\r\n        } else {\r\n          return new Vector(px, py).get2D(axis, true);\r\n        }\r\n      } else {\r\n        if (a.yi === b.yi) {\r\n          return null;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  Line.prototype.intersectLine = function(line, axis) {\r\n    var pt;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    pt = this.intersectPath(line, axis);\r\n    if (pt && this.withinBounds(pt, axis) && line.withinBounds(pt, axis)) {\r\n      return pt;\r\n    } else {\r\n      if (pt === null) {\r\n        return null;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n\r\n  Line.intersectLines = function(elem, lines, get_pts) {\r\n    var aa, i, ins, len1, ln, p, pts;\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    if (!elem.intersectLine) {\r\n      throw \"No intersectLine function found in \" + elem.toString();\r\n    }\r\n    pts = [];\r\n    for (i in lines) {\r\n      ln = lines[i];\r\n      ins = elem.intersectLine(ln, get_pts);\r\n      if (ins) {\r\n        if (!get_pts) {\r\n          return true;\r\n        }\r\n        if (ins.length > 0) {\r\n          for (aa = 0, len1 = ins.length; aa < len1; aa++) {\r\n            p = ins[aa];\r\n            pts.push(p);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (get_pts) {\r\n      return pts;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  Line.prototype.intersectGridLine = function(line, path_only, axis) {\r\n    var a1, a2, b1, b2;\r\n    if (path_only == null) {\r\n      path_only = false;\r\n    }\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    a1 = this.get2D(axis);\r\n    a2 = this.p1.get2D(axis);\r\n    b1 = line.get2D(axis);\r\n    b2 = line.p1.get2D(axis);\r\n    if (a2.x - a1.x === 0) {\r\n      if (b2.y - b1.y === 0 && Util.within(a1.x, b1.x, b2.x)) {\r\n        if (path_only || Util.within(b1.y, a1.y, a2.y)) {\r\n          return new Vector(a1.x, b1.y);\r\n        }\r\n      }\r\n    } else if (a2.y - a1.y === 0) {\r\n      if (b2.x - b1.x === 0 && Util.within(a1.y, b1.y, b2.y)) {\r\n        if (path_only || Util.within(b1.x, a1.x, a2.x)) {\r\n          return new Vector(b1.x, a1.y);\r\n        }\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  Line.prototype.subpoints = function(num) {\r\n    var aa, ref, results, t;\r\n    results = [];\r\n    for (t = aa = 0, ref = num; 0 <= ref ? aa <= ref : aa >= ref; t = 0 <= ref ? ++aa : --aa) {\r\n      results.push(this.interpolate(t / num));\r\n    }\r\n    return results;\r\n  };\r\n\r\n  Line.prototype.clone = function(deep) {\r\n    return new Line(this).to(this.p1);\r\n  };\r\n\r\n  return Line;\r\n\r\n})(Pair);\r\n\r\nthis.Line = Line;\r\n\r\nRectangle = (function(superClass) {\r\n  extend(Rectangle, superClass);\r\n\r\n  function Rectangle() {\r\n    Rectangle.__super__.constructor.apply(this, arguments);\r\n    this.center = new Vector();\r\n  }\r\n\r\n  Rectangle.contain = function(pt, ptl, pbr) {\r\n    return pt.x >= ptl.x && pt.x <= pbr.x && pt.y >= ptl.y && pt.y <= pbr.y && pt.z >= ptl.z && pt.z <= pbr.z;\r\n  };\r\n\r\n  Rectangle.prototype.toString = function() {\r\n    var s;\r\n    s = this.size();\r\n    return \"Rectangle x1 \" + this.x + \", y1 \" + this.y + \", z1 \" + this.z + \", x2 \" + this.p1.x + \", y2 \" + this.p1.y + \", z2 \" + this.p1.z + \", width \" + s.x + \", height \" + s.y;\r\n  };\r\n\r\n  Rectangle.prototype.toPointSet = function() {\r\n    var c;\r\n    c = this.corners();\r\n    return new PointSet(this).to([c.topRight, c.bottomRight, c.bottomLeft, c.topLeft]);\r\n  };\r\n\r\n  Rectangle.prototype.to = function(args) {\r\n    this.p1 = new Vector(Point.get(arguments));\r\n    this.resetBounds();\r\n    this.center = this.midpoint();\r\n    return this;\r\n  };\r\n\r\n  Rectangle.prototype.setCenter = function(args) {\r\n    var halfsize;\r\n    if (arguments.length === 0) {\r\n      this.center = this.midpoint();\r\n      return;\r\n    }\r\n    halfsize = this.size().$divide(2);\r\n    this.center.set(Point.get(arguments));\r\n    this.set(this.center.$subtract(halfsize));\r\n    this.p1.set(this.center.$add(halfsize));\r\n    return this;\r\n  };\r\n\r\n  Rectangle.prototype.resizeTo = function() {\r\n    this.p1 = new Vector(Point.get(arguments));\r\n    this.relative();\r\n    this.center = this.midpoint();\r\n    return this;\r\n  };\r\n\r\n  Rectangle.prototype.resizeCenterTo = function() {\r\n    var size;\r\n    size = new Vector(Point.get(arguments)).divide(2);\r\n    this.set(this.center.$subtract(size));\r\n    this.p1.set(this.center.$add(size));\r\n    return this;\r\n  };\r\n\r\n  Rectangle.prototype.enclose = function(rect) {\r\n    this.set(this.$min(rect));\r\n    this.p1.set(this.p1.$max(rect.p1));\r\n    this.center = this.midpoint();\r\n    return this;\r\n  };\r\n\r\n  Rectangle.prototype.$enclose = function(rect) {\r\n    return this.clone().enclose(rect);\r\n  };\r\n\r\n  Rectangle.prototype.isEnclosed = function(rect) {\r\n    var d, d2;\r\n    d = this.$subtract(rect).multiply(this.p1.$subtract(rect.p1));\r\n    d2 = this.size().subtract(rect.size());\r\n    return d.x <= 0 && d.y <= 0 && d.z <= 0 && (d2.x * d2.y >= 0);\r\n  };\r\n\r\n  Rectangle.prototype.isLarger = function(rect) {\r\n    var s1, s2;\r\n    s1 = this.size();\r\n    s2 = rect.size();\r\n    return s1.x * s1.y > s2.x * s2.y;\r\n  };\r\n\r\n  Rectangle.prototype.intersectPoint = function() {\r\n    var pt;\r\n    pt = Point.get(arguments);\r\n    return pt.x >= this.x && pt.x <= this.p1.x && pt.y >= this.y && pt.y <= this.p1.y && pt.z >= this.z && pt.z <= this.p1.z;\r\n  };\r\n\r\n  Rectangle.prototype.intersectPath = function(line, get_pts) {\r\n    var aa, len1, p, pts, s, sides;\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    sides = this.sides();\r\n    pts = [];\r\n    for (aa = 0, len1 = sides.length; aa < len1; aa++) {\r\n      s = sides[aa];\r\n      p = s.intersectPath(line);\r\n      if (p && this.intersectPoint(p)) {\r\n        if (get_pts) {\r\n          pts.push(p);\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    if (get_pts) {\r\n      return pts;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  Rectangle.prototype.intersectLine = function(line, get_pts) {\r\n    var aa, ip1, ip2, lbound, len1, p, pts, s, sides;\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    ip1 = this.intersectPoint(line);\r\n    ip2 = this.intersectPoint(line.p1);\r\n    if (ip1 && ip2) {\r\n      if (get_pts) {\r\n        return [];\r\n      }\r\n    } else {\r\n      true;\r\n    }\r\n    if (!(ip1 || ip2)) {\r\n      lbound = line.bounds();\r\n      if (!this.intersectRectangle(lbound, false)) {\r\n        if (get_pts) {\r\n          return [];\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    sides = this.sides();\r\n    pts = [];\r\n    for (aa = 0, len1 = sides.length; aa < len1; aa++) {\r\n      s = sides[aa];\r\n      p = line.intersectLine(s);\r\n      if (p) {\r\n        if (get_pts) {\r\n          pts.push(p);\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    if (get_pts) {\r\n      return pts;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  Rectangle.prototype.intersectLines = function(lines, get_pts) {\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    return Line.intersectLines(this, lines, get_pts);\r\n  };\r\n\r\n  Rectangle.prototype.intersectRectangle = function(rect, get_pts) {\r\n    var aa, ab, intersected, len1, len2, p, pts, sa, sb, sidesA, sidesB, xi, yi, zi;\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    xi = (this.p1.x >= rect.x) && (this.x <= rect.p1.x);\r\n    yi = (this.p1.y >= rect.y) && (this.y <= rect.p1.y);\r\n    zi = (this.p1.z >= rect.z) && (this.z <= rect.p1.z);\r\n    intersected = xi && yi && zi;\r\n    if (!get_pts) {\r\n      return intersected;\r\n    }\r\n    if (this.isEnclosed(rect)) {\r\n      return (get_pts ? [] : true);\r\n    }\r\n    if (!intersected) {\r\n      return [];\r\n    }\r\n    sidesA = this.sides();\r\n    sidesB = rect.sides();\r\n    pts = [];\r\n    for (aa = 0, len1 = sidesA.length; aa < len1; aa++) {\r\n      sa = sidesA[aa];\r\n      for (ab = 0, len2 = sidesB.length; ab < len2; ab++) {\r\n        sb = sidesB[ab];\r\n        p = sa.intersectGridLine(sb);\r\n        if (p) {\r\n          pts.push(p);\r\n        }\r\n      }\r\n    }\r\n    return pts;\r\n  };\r\n\r\n  Rectangle.prototype.hasIntersect = function(item, get_pts) {\r\n    if (get_pts == null) {\r\n      get_pts = false;\r\n    }\r\n    if (item instanceof Circle) {\r\n      return item.intersectLines(this.sides(), get_pts);\r\n    } else if (item instanceof Rectangle) {\r\n      return this.intersectRectangle(item, get_pts);\r\n    } else if (item instanceof PointSet || item instanceof Triangle) {\r\n      return this.intersectLines(item.sides(), get_pts);\r\n    } else if (item instanceof Pair) {\r\n      return this.intersectLine(item, get_pts);\r\n    } else if (item instanceof Point) {\r\n      return Rectangle.contain(item, this, this.p1);\r\n    } else {\r\n      if (get_pts) {\r\n        return [];\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n\r\n  Rectangle.prototype.corners = function() {\r\n    return {\r\n      topLeft: new Vector(Math.min(this.x, this.p1.x), Math.min(this.y, this.p1.y), Math.max(this.z, this.p1.z)),\r\n      topRight: new Vector(Math.max(this.x, this.p1.x), Math.min(this.y, this.p1.y), Math.min(this.z, this.p1.z)),\r\n      bottomLeft: new Vector(Math.min(this.x, this.p1.x), Math.max(this.y, this.p1.y), Math.max(this.z, this.p1.z)),\r\n      bottomRight: new Vector(Math.max(this.x, this.p1.x), Math.max(this.y, this.p1.y), Math.min(this.z, this.p1.z))\r\n    };\r\n  };\r\n\r\n  Rectangle.prototype.sides = function() {\r\n    var c;\r\n    c = this.corners();\r\n    return [new Line(c.topLeft).to(c.topRight), new Line(c.topRight).to(c.bottomRight), new Line(c.bottomRight).to(c.bottomLeft), new Line(c.bottomLeft).to(c.topLeft)];\r\n  };\r\n\r\n  Rectangle.prototype.quadrants = function() {\r\n    var c;\r\n    c = this.corners();\r\n    return {\r\n      topLeft: new this.__proto__.constructor(c.topLeft).to(this.center),\r\n      topRight: new this.__proto__.constructor(c.topRight).to(this.center),\r\n      bottomLeft: new this.__proto__.constructor(c.bottomLeft).to(this.center),\r\n      bottomRight: new this.__proto__.constructor(c.bottomRight).to(this.center)\r\n    };\r\n  };\r\n\r\n  Rectangle.prototype.clone = function() {\r\n    var p;\r\n    p = new Rectangle(this).to(this.p1);\r\n    p.to(this.p1.clone());\r\n    return p;\r\n  };\r\n\r\n  return Rectangle;\r\n\r\n})(Pair);\r\n\r\nthis.Rectangle = Rectangle;\r\n\r\nGrid = (function(superClass) {\r\n  extend(Grid, superClass);\r\n\r\n  function Grid() {\r\n    Grid.__super__.constructor.apply(this, arguments);\r\n    this.cell = {\r\n      type: 'fix-fix',\r\n      size: new Vector()\r\n    };\r\n    this.rows = 0;\r\n    this.columns = 0;\r\n    this.layout = [];\r\n    this.cellCallback = null;\r\n  }\r\n\r\n  Grid.prototype.toString = function() {\r\n    var s;\r\n    s = this.size();\r\n    return (\"Grid width \" + s.x + \", height \" + s.y + \", columns \" + this.columns + \", rows \" + this.rows + \", \") + (\"cell (\" + this.cell.size.x + \", \" + this.cell.size.y + \"), type \" + this.cell.type);\r\n  };\r\n\r\n  Grid.prototype.init = function(x, y, xtype, ytype) {\r\n    var size;\r\n    if (xtype == null) {\r\n      xtype = 'fix';\r\n    }\r\n    if (ytype == null) {\r\n      ytype = 'fix';\r\n    }\r\n    size = this.size();\r\n    this.cell.type = xtype + '-' + ytype;\r\n    this.rows = y;\r\n    this.columns = x;\r\n    if (xtype === 'stretch') {\r\n      this.cell.size.x = size.x / x;\r\n      this.columns = x;\r\n    } else if (xtype === 'flex') {\r\n      this.columns = Math.round(size.x / x);\r\n      this.cell.size.x = size.x / this.columns;\r\n    } else {\r\n      this.cell.size.x = x;\r\n      this.columns = Math.floor(size.x / this.cell.size.x);\r\n    }\r\n    if (ytype === 'stretch') {\r\n      this.cell.size.y = size.y / y;\r\n      this.rows = y;\r\n    } else if (ytype === 'flex') {\r\n      this.rows = Math.round(size.y / y);\r\n      this.cell.size.y = size.y / this.rows;\r\n    } else {\r\n      this.cell.size.y = y;\r\n      this.rows = Math.floor(size.y / this.cell.size.y);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Grid.prototype.generate = function(callback) {\r\n    if (typeof callback === \"function\") {\r\n      this.cellCallback = callback;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Grid.prototype.create = function() {\r\n    var aa, ab, c, cell, isOccupied, pos, r, ref, ref1;\r\n    if (!this.cellCallback) {\r\n      return this;\r\n    }\r\n    for (c = aa = 0, ref = this.columns; 0 <= ref ? aa < ref : aa > ref; c = 0 <= ref ? ++aa : --aa) {\r\n      for (r = ab = 0, ref1 = this.rows; 0 <= ref1 ? ab < ref1 : ab > ref1; r = 0 <= ref1 ? ++ab : --ab) {\r\n        cell = this.cell.size.clone();\r\n        pos = this.$add(cell.$multiply(c, r));\r\n        isOccupied = this.layout.length > 0 && this.layout[0].length > 0 ? this.layout[r][c] === 1 : false;\r\n        this.cellCallback(cell, pos, r, c, this.cell.type, isOccupied);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Grid.prototype.getCellSize = function() {\r\n    return this.cell.size.clone();\r\n  };\r\n\r\n  Grid.prototype.cellToRectangle = function(c, r, allowOutofBound) {\r\n    var rect;\r\n    if (allowOutofBound == null) {\r\n      allowOutofBound = false;\r\n    }\r\n    if (allowOutofBound || (c >= 0 && c < this.columns && r >= 0 && r < this.rows)) {\r\n      rect = new Rectangle(this.$add(this.cell.size.$multiply(c, r))).resizeTo(this.cell.size);\r\n      return rect;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  Grid.prototype.positionToCell = function(args) {\r\n    var cellpos, pos;\r\n    pos = new Vector(this._getArgs(arguments));\r\n    cellpos = pos.$subtract(this).$divide(this.cell.size).floor();\r\n    cellpos.max(0, 0).min(this.columns - 1, this.rows - 1);\r\n    return cellpos;\r\n  };\r\n\r\n  Grid.prototype.resetLayout = function(callback) {\r\n    var aa, ab, c, r, ref, ref1;\r\n    this.layout = [];\r\n    for (r = aa = 0, ref = this.rows; 0 <= ref ? aa < ref : aa > ref; r = 0 <= ref ? ++aa : --aa) {\r\n      this.layout[r] = [];\r\n      for (c = ab = 0, ref1 = this.columns; 0 <= ref1 ? ab < ref1 : ab > ref1; c = 0 <= ref1 ? ++ab : --ab) {\r\n        this.layout[r][c] = 0;\r\n        if (callback) {\r\n          callback(this, r, c);\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Grid.prototype.occupy = function(x, y, w, h, occupy) {\r\n    var aa, ab, c, r, ref, ref1;\r\n    if (occupy == null) {\r\n      occupy = true;\r\n    }\r\n    if (this.rows <= 0 || this.columns <= 0) {\r\n      return this;\r\n    }\r\n    if (this.layout.length < 1) {\r\n      this.resetLayout();\r\n    }\r\n    for (c = aa = 0, ref = w; 0 <= ref ? aa < ref : aa > ref; c = 0 <= ref ? ++aa : --aa) {\r\n      for (r = ab = 0, ref1 = h; 0 <= ref1 ? ab < ref1 : ab > ref1; r = 0 <= ref1 ? ++ab : --ab) {\r\n        this.layout[Math.min(this.layout.length - 1, y + r)][x + c] = (occupy ? 1 : 0);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Grid.prototype.canFit = function(x, y, w, h) {\r\n    var aa, ab, cell, currCol, currRow, ref, ref1, ref2, ref3;\r\n    for (currRow = aa = ref = y, ref1 = Math.min(this.rows, y + h); ref <= ref1 ? aa < ref1 : aa > ref1; currRow = ref <= ref1 ? ++aa : --aa) {\r\n      for (currCol = ab = ref2 = x, ref3 = Math.min(this.columns, x + w); ref2 <= ref3 ? ab < ref3 : ab > ref3; currCol = ref2 <= ref3 ? ++ab : --ab) {\r\n        cell = this.layout[currRow][currCol];\r\n        if ((cell != null) && cell > 0) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  Grid.prototype.fit = function(cols, rows) {\r\n    var aa, ab, b, cell, colCount, colSize, currCol, currRow, freeCol, ref, ref1;\r\n    colSize = Math.min(cols, this.columns);\r\n    for (currRow = aa = 0, ref = this.rows; 0 <= ref ? aa < ref : aa > ref; currRow = 0 <= ref ? ++aa : --aa) {\r\n      colCount = colSize;\r\n      freeCol = 0;\r\n      for (currCol = ab = 0, ref1 = this.columns; 0 <= ref1 ? ab < ref1 : ab > ref1; currCol = 0 <= ref1 ? ++ab : --ab) {\r\n        cell = this.layout[currRow][currCol];\r\n        if ((cell != null) && cell > 0) {\r\n          freeCol++;\r\n          colCount = colSize;\r\n        } else {\r\n          colCount--;\r\n          if (colCount <= 0) {\r\n            this.occupy(freeCol, currRow, colSize, rows);\r\n            b = new Rectangle(this.$add(this.cell.size.$multiply(freeCol, currRow)));\r\n            b.resizeTo(this.cell.size.$multiply(colSize, rows));\r\n            return {\r\n              row: currRow,\r\n              column: freeCol,\r\n              columnSize: colSize,\r\n              rowSize: rows,\r\n              bound: b\r\n            };\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  Grid.prototype.neighbors = function(c, r) {\r\n    var aa, len1, n, ns, temp;\r\n    temp = [[c - 1, r - 1], [c, r - 1], [c + 1, r - 1], [c + 1, r], [c + 1, r + 1], [c, r + 1], [c - 1, r + 1], [c - 1, r]];\r\n    ns = [];\r\n    for (aa = 0, len1 = temp.length; aa < len1; aa++) {\r\n      n = temp[aa];\r\n      if (n[0] >= 0 && n[0] < this.columns && n[1] >= 0 && n[1] < this.rows) {\r\n        ns.push(new Vector(n[0], n[1], this.layout[n[1]][n[0]]));\r\n      } else {\r\n        ns.push(false);\r\n      }\r\n    }\r\n    return ns;\r\n  };\r\n\r\n  return Grid;\r\n\r\n})(Rectangle);\r\n\r\nthis.Grid = Grid;\r\n\r\nPointSet = (function(superClass) {\r\n  extend(PointSet, superClass);\r\n\r\n  function PointSet() {\r\n    PointSet.__super__.constructor.apply(this, arguments);\r\n    this.points = [];\r\n  }\r\n\r\n  PointSet.prototype.toString = function() {\r\n    var aa, len1, p, ref, str;\r\n    str = \"PointSet [ \";\r\n    ref = this.points;\r\n    for (aa = 0, len1 = ref.length; aa < len1; aa++) {\r\n      p = ref[aa];\r\n      str += p.x + \",\" + p.y + \",\" + p.z + \", \";\r\n    }\r\n    return str + \" ]\";\r\n  };\r\n\r\n  PointSet.prototype.toArray = function() {\r\n    return this.points.slice();\r\n  };\r\n\r\n  PointSet.prototype.to = function(args) {\r\n    var aa, len1, p, ref;\r\n    if (arguments.length > 0) {\r\n      if (Array.isArray(arguments[0]) && arguments[0].length > 0 && typeof arguments[0][0] === 'object') {\r\n        ref = arguments[0];\r\n        for (aa = 0, len1 = ref.length; aa < len1; aa++) {\r\n          p = ref[aa];\r\n          this.points.push(new Vector(p));\r\n        }\r\n      } else {\r\n        this.points.push(new Vector(Point.get(arguments)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  PointSet.prototype.getAt = function(index) {\r\n    return this.points[Math.min(this.points.length - 1, Math.max(0, index))];\r\n  };\r\n\r\n  PointSet.prototype.$getAt = function(index) {\r\n    return new Vector(this.getAt(index));\r\n  };\r\n\r\n  PointSet.prototype.setAt = function(index, p) {\r\n    this.points[index] = p;\r\n    return this;\r\n  };\r\n\r\n  PointSet.prototype.count = function() {\r\n    return this.points.length;\r\n  };\r\n\r\n  PointSet.prototype.connectFromAnchor = function(args) {\r\n    var aa, len1, p, ref;\r\n    if (arguments.length > 0) {\r\n      if (Array.isArray(arguments[0]) && arguments[0].length > 0) {\r\n        ref = arguments[0];\r\n        for (aa = 0, len1 = ref.length; aa < len1; aa++) {\r\n          p = ref[aa];\r\n          this.points.push(this.$add(p));\r\n        }\r\n      } else {\r\n        this.points.push(this.$add(Point.get(arguments)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  PointSet.prototype.disconnect = function(index) {\r\n    if (index == null) {\r\n      index = -1;\r\n    }\r\n    if (index < 0) {\r\n      this.points = this.points.slice(0, this.points.length + index);\r\n    } else {\r\n      this.points = this.points.slice(index + 1);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  PointSet.prototype.sides = function(close_path) {\r\n    var aa, lastP, len1, p, ref, sides;\r\n    if (close_path == null) {\r\n      close_path = true;\r\n    }\r\n    lastP = null;\r\n    sides = [];\r\n    ref = this.points;\r\n    for (aa = 0, len1 = ref.length; aa < len1; aa++) {\r\n      p = ref[aa];\r\n      if (lastP) {\r\n        sides.push(new Line(lastP).to(p));\r\n      }\r\n      lastP = p;\r\n    }\r\n    if (this.points.length > 1 && close_path) {\r\n      sides.push(new Line(lastP).to(this.points[0]));\r\n    }\r\n    return sides;\r\n  };\r\n\r\n  PointSet.prototype.angles = function(axis) {\r\n    var aa, angles, i, ref, v1, v2;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    angles = [];\r\n    for (i = aa = 1, ref = this.points.length - 1; aa < ref; i = aa += 1) {\r\n      v1 = this.points[i - 1].$subtract(this.points[i]);\r\n      v2 = this.points[i + 1].$subtract(this.points[i]);\r\n      angles.push({\r\n        p0: this.points[i - 1],\r\n        p1: this.points[i],\r\n        p2: this.points[i + 1],\r\n        angle: v1.angleBetween(v2)\r\n      });\r\n    }\r\n    return angles;\r\n  };\r\n\r\n  PointSet.prototype.bounds = function() {\r\n    return Util.boundingBox(this.points);\r\n  };\r\n\r\n  PointSet.prototype.centroid = function() {\r\n    return Util.centroid(this.points);\r\n  };\r\n\r\n  PointSet.prototype.convexHull = function(sort) {\r\n    var dq, i, left, pt, pts;\r\n    if (sort == null) {\r\n      sort = true;\r\n    }\r\n    if (this.points.length < 3) {\r\n      return [];\r\n    }\r\n    if (sort) {\r\n      pts = this.points.slice();\r\n      pts.sort(function(a, b) {\r\n        return a.x - b.x;\r\n      });\r\n    } else {\r\n      pts = this.points;\r\n    }\r\n    left = function(a, b, pt) {\r\n      return (b.x - a.x) * (pt.y - a.y) - (pt.x - a.x) * (b.y - a.y) > 0;\r\n    };\r\n    dq = [];\r\n    if (left(pts[0], pts[1], pts[2])) {\r\n      dq.push(pts[0]);\r\n      dq.push(pts[1]);\r\n    } else {\r\n      dq.push(pts[1]);\r\n      dq.push(pts[0]);\r\n    }\r\n    dq.unshift(pts[2]);\r\n    dq.push(pts[2]);\r\n    i = 3;\r\n    while (i < pts.length) {\r\n      pt = pts[i];\r\n      if (left(pt, dq[0], dq[1]) && left(dq[dq.length - 2], dq[dq.length - 1], pt)) {\r\n        i++;\r\n        continue;\r\n      }\r\n      while (!left(dq[dq.length - 2], dq[dq.length - 1], pt)) {\r\n        dq.pop();\r\n      }\r\n      dq.push(pt);\r\n      while (!left(dq[0], dq[1], pt)) {\r\n        dq.shift();\r\n      }\r\n      dq.unshift(pt);\r\n      i++;\r\n    }\r\n    return dq;\r\n  };\r\n\r\n  PointSet.prototype.clone = function() {\r\n    return new PointSet(this).to(Util.clonePoints(this.points));\r\n  };\r\n\r\n  return PointSet;\r\n\r\n})(Vector);\r\n\r\nthis.PointSet = PointSet;\r\n\r\nCurve = (function(superClass) {\r\n  extend(Curve, superClass);\r\n\r\n  function Curve() {\r\n    Curve.__super__.constructor.apply(this, arguments);\r\n    this.is3D = false;\r\n  }\r\n\r\n  Curve.prototype._getSteps = function(steps) {\r\n    var aa, ref, s, t, ts;\r\n    ts = [];\r\n    for (s = aa = 0, ref = steps; aa <= ref; s = aa += 1) {\r\n      t = s / steps;\r\n      ts.push([t, t * t, t * t * t]);\r\n    }\r\n    return ts;\r\n  };\r\n\r\n  Curve.prototype.controlPoints = function(index, copyStart) {\r\n    var _index, p0, p1, p2, p3;\r\n    if (index == null) {\r\n      index = 0;\r\n    }\r\n    if (copyStart == null) {\r\n      copyStart = false;\r\n    }\r\n    _index = (function(_this) {\r\n      return function(i) {\r\n        var idx;\r\n        idx = i < _this.points.length - 1 ? i : _this.points.length - 1;\r\n        return idx;\r\n      };\r\n    })(this);\r\n    p0 = this.points[index];\r\n    if (p0.x == null) {\r\n      return false;\r\n    }\r\n    index = copyStart ? index : index + 1;\r\n    p1 = this.points[_index(index++)];\r\n    p2 = this.points[_index(index++)];\r\n    p3 = this.points[_index(index++)];\r\n    return {\r\n      p0: p0,\r\n      p1: p1,\r\n      p2: p2,\r\n      p3: p3\r\n    };\r\n  };\r\n\r\n  Curve.prototype.catmullRom = function(steps) {\r\n    var aa, ab, c, i, k, ps, ref, ref1, ts;\r\n    if (steps == null) {\r\n      steps = 10;\r\n    }\r\n    if (this.points.length < 2) {\r\n      return [];\r\n    }\r\n    ps = [];\r\n    ts = this._getSteps(steps);\r\n    c = this.controlPoints(0, true);\r\n    for (i = aa = 0, ref = steps; aa <= ref; i = aa += 1) {\r\n      ps.push(this.catmullRomPoint(ts[i], c));\r\n    }\r\n    k = 0;\r\n    while (k < this.points.length - 2) {\r\n      c = this.controlPoints(k);\r\n      if (c) {\r\n        for (i = ab = 0, ref1 = steps; ab <= ref1; i = ab += 1) {\r\n          ps.push(this.catmullRomPoint(ts[i], c));\r\n        }\r\n        k++;\r\n      }\r\n    }\r\n    return ps;\r\n  };\r\n\r\n  Curve.prototype.catmullRomPoint = function(step, ctrls) {\r\n    var h1, h2, h3, h4, t, t2, t3, x, y, z;\r\n    t = step[0];\r\n    t2 = step[1];\r\n    t3 = step[2];\r\n    h1 = -0.5 * t3 + t2 - 0.5 * t;\r\n    h2 = 1.5 * t3 - 2.5 * t2 + 1;\r\n    h3 = -1.5 * t3 + 2 * t2 + 0.5 * t;\r\n    h4 = 0.5 * t3 - 0.5 * t2;\r\n    x = h1 * ctrls.p0.x + h2 * ctrls.p1.x + h3 * ctrls.p2.x + h4 * ctrls.p3.x;\r\n    y = h1 * ctrls.p0.y + h2 * ctrls.p1.y + h3 * ctrls.p2.y + h4 * ctrls.p3.y;\r\n    z = !this.is3D ? 0 : h1 * ctrls.p0.z + h2 * ctrls.p1.z + h3 * ctrls.p2.z + h4 * ctrls.p3.z;\r\n    return new Point(x, y, z);\r\n  };\r\n\r\n  Curve.prototype.cardinal = function(steps, tension) {\r\n    var aa, ab, c, i, k, ps, ref, ref1, ts;\r\n    if (steps == null) {\r\n      steps = 10;\r\n    }\r\n    if (tension == null) {\r\n      tension = 0.5;\r\n    }\r\n    if (this.points.length < 2) {\r\n      return [];\r\n    }\r\n    ps = [];\r\n    ts = this._getSteps(steps);\r\n    c = this.controlPoints(0, true);\r\n    for (i = aa = 0, ref = steps; aa <= ref; i = aa += 1) {\r\n      ps.push(this.cardinalPoint(ts[i], c, tension));\r\n    }\r\n    k = 0;\r\n    while (k < this.points.length - 2) {\r\n      c = this.controlPoints(k);\r\n      if (c) {\r\n        for (i = ab = 0, ref1 = steps; ab <= ref1; i = ab += 1) {\r\n          ps.push(this.cardinalPoint(ts[i], c, tension));\r\n        }\r\n        k++;\r\n      }\r\n    }\r\n    return ps;\r\n  };\r\n\r\n  Curve.prototype.cardinalPoint = function(step, ctrls, tension) {\r\n    var h1, h2, h2a, h3, h3a, h4, t, t2, t3, x, y, z;\r\n    if (tension == null) {\r\n      tension = 0.5;\r\n    }\r\n    t = step[0];\r\n    t2 = step[1];\r\n    t3 = step[2];\r\n    h1 = tension * (-1 * t3 + 2 * t2 - t);\r\n    h2 = tension * (-1 * t3 + t2);\r\n    h2a = 2 * t3 - 3 * t2 + 1;\r\n    h3 = tension * (t3 - 2 * t2 + t);\r\n    h3a = -2 * t3 + 3 * t2;\r\n    h4 = tension * (t3 - t2);\r\n    x = ctrls.p0.x * h1 + ctrls.p1.x * h2 + h2a * ctrls.p1.x + ctrls.p2.x * h3 + h3a * ctrls.p2.x + ctrls.p3.x * h4;\r\n    y = ctrls.p0.y * h1 + ctrls.p1.y * h2 + h2a * ctrls.p1.y + ctrls.p2.y * h3 + h3a * ctrls.p2.y + ctrls.p3.y * h4;\r\n    z = !this.is3D ? 0 : ctrls.p0.z * h1 + ctrls.p1.z * h2 + h2a * ctrls.p1.z + ctrls.p2.z * h3 + h3a * ctrls.p2.z + ctrls.p3.z * h4;\r\n    return new Point(x, y, z);\r\n  };\r\n\r\n  Curve.prototype.bezier = function(steps) {\r\n    var aa, c, i, k, ps, ref, ts;\r\n    if (steps == null) {\r\n      steps = 10;\r\n    }\r\n    if (this.points.length < 4) {\r\n      return [];\r\n    }\r\n    ps = [];\r\n    ts = this._getSteps(steps);\r\n    k = 0;\r\n    while (k <= this.points.length - 3) {\r\n      c = this.controlPoints(k);\r\n      if (c) {\r\n        for (i = aa = 0, ref = steps; aa <= ref; i = aa += 1) {\r\n          ps.push(this.bezierPoint(ts[i], c));\r\n        }\r\n        k += 3;\r\n      }\r\n    }\r\n    return ps;\r\n  };\r\n\r\n  Curve.prototype.bezierPoint = function(step, ctrls) {\r\n    var h1, h2, h3, h4, t, t2, t3, x, y, z;\r\n    t = step[0];\r\n    t2 = step[1];\r\n    t3 = step[2];\r\n    h1 = -1 * t3 + 3 * t2 - 3 * t + 1;\r\n    h2 = 3 * t3 - 6 * t2 + 3 * t;\r\n    h3 = -3 * t3 + 3 * t2;\r\n    h4 = t3;\r\n    x = h1 * ctrls.p0.x + h2 * ctrls.p1.x + h3 * ctrls.p2.x + h4 * ctrls.p3.x;\r\n    y = h1 * ctrls.p0.y + h2 * ctrls.p1.y + h3 * ctrls.p2.y + h4 * ctrls.p3.y;\r\n    z = !this.is3D ? 0 : h1 * ctrls.p0.z + h2 * ctrls.p1.z + h3 * ctrls.p2.z + h4 * ctrls.p3.z;\r\n    return new Point(x, y, z);\r\n  };\r\n\r\n  Curve.prototype.bspline = function(steps, tension) {\r\n    var aa, ab, c, i, k, ps, ref, ref1, ts;\r\n    if (steps == null) {\r\n      steps = 10;\r\n    }\r\n    if (tension == null) {\r\n      tension = false;\r\n    }\r\n    if (this.points.length < 2) {\r\n      return [];\r\n    }\r\n    ps = [];\r\n    ts = this._getSteps(steps);\r\n    k = 0;\r\n    while (k < this.points.length - 2) {\r\n      c = this.controlPoints(k);\r\n      if (c) {\r\n        if (!tension) {\r\n          for (i = aa = 0, ref = steps; aa <= ref; i = aa += 1) {\r\n            ps.push(this.bsplinePoint(ts[i], c));\r\n          }\r\n        } else {\r\n          for (i = ab = 0, ref1 = steps; ab <= ref1; i = ab += 1) {\r\n            ps.push(this.bsplineTensionPoint(ts[i], c, tension));\r\n          }\r\n        }\r\n        k++;\r\n      }\r\n    }\r\n    return ps;\r\n  };\r\n\r\n  Curve.prototype.bsplinePoint = function(step, ctrls) {\r\n    var h1, h2, h3, h4, t, t2, t3, x, y, z;\r\n    t = step[0];\r\n    t2 = step[1];\r\n    t3 = step[2];\r\n    h1 = -0.16666666666 * t3 + 0.5 * t2 - 0.5 * t + 0.16666666666;\r\n    h2 = 0.5 * t3 - t2 + 0.66666666666;\r\n    h3 = -0.5 * t3 + 0.5 * t2 + 0.5 * t + 0.16666666666;\r\n    h4 = 0.16666666666 * t3;\r\n    x = h1 * ctrls.p0.x + h2 * ctrls.p1.x + h3 * ctrls.p2.x + h4 * ctrls.p3.x;\r\n    y = h1 * ctrls.p0.y + h2 * ctrls.p1.y + h3 * ctrls.p2.y + h4 * ctrls.p3.y;\r\n    z = !this.is3D ? 0 : h1 * ctrls.p0.z + h2 * ctrls.p1.z + h3 * ctrls.p2.z + h4 * ctrls.p3.z;\r\n    return new Point(x, y, z);\r\n  };\r\n\r\n  Curve.prototype.bsplineTensionPoint = function(step, ctrls, tension) {\r\n    var h1, h2, h2a, h3, h3a, h4, t, t2, t3, x, y, z;\r\n    if (tension == null) {\r\n      tension = 1;\r\n    }\r\n    t = step[0];\r\n    t2 = step[1];\r\n    t3 = step[2];\r\n    h1 = tension * (-0.16666666666 * t3 + 0.5 * t2 - 0.5 * t + 0.16666666666);\r\n    h2 = tension * (-1.5 * t3 + 2 * t2 - 0.33333333333);\r\n    h2a = 2 * t3 - 3 * t2 + 1;\r\n    h3 = tension * (1.5 * t3 - 2.5 * t2 + 0.5 * t + 0.16666666666);\r\n    h3a = -2 * t3 + 3 * t2;\r\n    h4 = tension * (0.16666666666 * t3);\r\n    x = h1 * ctrls.p0.x + h2 * ctrls.p1.x + h2a * ctrls.p1.x + h3 * ctrls.p2.x + h3a * ctrls.p2.x + h4 * ctrls.p3.x;\r\n    y = h1 * ctrls.p0.y + h2 * ctrls.p1.y + h2a * ctrls.p1.y + h3 * ctrls.p2.y + h3a * ctrls.p2.y + h4 * ctrls.p3.y;\r\n    z = !this.is3D ? 0 : h1 * ctrls.p0.z + h2 * ctrls.p1.z + h2a * ctrls.p1.y + h3 * ctrls.p2.z + h3a * ctrls.p2.z + h4 * ctrls.p3.z;\r\n    return new Point(x, y, z);\r\n  };\r\n\r\n  return Curve;\r\n\r\n})(PointSet);\r\n\r\nthis.Curve = Curve;\r\n\r\nTriangle = (function(superClass) {\r\n  extend(Triangle, superClass);\r\n\r\n  function Triangle() {\r\n    Triangle.__super__.constructor.apply(this, arguments);\r\n    this.p1 = new Vector(this.x - 1, this.y - 1, this.z);\r\n    this.p2 = new Vector(this.x + 1, this.y + 1, this.z);\r\n  }\r\n\r\n  Triangle.prototype.to = function(args) {\r\n    if (arguments.length > 0) {\r\n      if (typeof arguments[0] === 'object' && arguments.length === 2) {\r\n        this.p1.set(arguments[0]);\r\n        this.p2.set(arguments[1]);\r\n      } else {\r\n        if (arguments.length < 6) {\r\n          this.p1.set([arguments[0], arguments[1]]);\r\n          this.p2.set([arguments[2], arguments[3]]);\r\n        } else {\r\n          this.p1.set([arguments[0], arguments[1], arguments[2]]);\r\n          this.p2.set([arguments[3], arguments[4], arguments[5]]);\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Triangle.prototype.toArray = function() {\r\n    return [this, this.p1, this.p2];\r\n  };\r\n\r\n  Triangle.prototype.toString = function() {\r\n    return \"Triangle (\" + this.x + \", \" + this.y + \", \" + this.z + \"), (\" + this.p1.x + \", \" + this.p1.y + \", \" + this.p1.z + \"), (\" + this.p2.x + \", \" + this.p2.y + \", \" + this.p2.z + \")\";\r\n  };\r\n\r\n  Triangle.prototype.getAt = function(index) {\r\n    if (index === 1 || index === \"p1\") {\r\n      return this.p1;\r\n    }\r\n    if (index === 2 || index === \"p2\") {\r\n      return this.p2;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  Triangle.prototype.$getAt = function(index) {\r\n    return new Vector(this.getAt(index));\r\n  };\r\n\r\n  Triangle.prototype.toPointSet = function() {\r\n    var p0;\r\n    p0 = new Vector(this);\r\n    return new PointSet(p0).to([p0, this.p1, this.p2]);\r\n  };\r\n\r\n  Triangle.prototype.sides = function() {\r\n    return [new Line(this).to(this.p1), new Line(this.p1).to(this.p2), new Line(this.p2).to(this)];\r\n  };\r\n\r\n  Triangle.prototype.angles = function(axis) {\r\n    var angles;\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    angles = [this.p2.$subtract(this).angleBetween(this.p1.$subtract(this), axis), this.$subtract(this.p1).angleBetween(this.p2.$subtract(this.p1), axis)];\r\n    angles.push(Math.PI - angles[0] - angles[1]);\r\n    return angles;\r\n  };\r\n\r\n  Triangle.prototype.medial = function() {\r\n    var pts, side, sides;\r\n    sides = this.sides();\r\n    pts = (function() {\r\n      var aa, len1, results;\r\n      results = [];\r\n      for (aa = 0, len1 = sides.length; aa < len1; aa++) {\r\n        side = sides[aa];\r\n        results.push(side.midpoint());\r\n      }\r\n      return results;\r\n    })();\r\n    return new Triangle(pts[0]).to(pts[1], pts[2]);\r\n  };\r\n\r\n  Triangle.prototype.perimeter = function() {\r\n    var lens, sides;\r\n    sides = this.sides();\r\n    lens = [sides[0].length(), sides[1].length(), sides[2].length()];\r\n    return {\r\n      sides: sides,\r\n      value: lens[0] + lens[1] + lens[2],\r\n      lengths: lens\r\n    };\r\n  };\r\n\r\n  Triangle.prototype.area = function() {\r\n    var hp, p;\r\n    p = this.perimeter();\r\n    hp = p.value / 2;\r\n    return {\r\n      value: Math.sqrt(hp * (hp - p.lengths[0]) * (hp - p.lengths[1]) * (hp - p.lengths[2])),\r\n      perimeter: p\r\n    };\r\n  };\r\n\r\n  Triangle.prototype.oppositeSide = function(id) {\r\n    if (id === \"p1\") {\r\n      return new Line(this).to(this.p2);\r\n    } else if (id === \"p2\") {\r\n      return new Line(this).to(this.p1);\r\n    } else {\r\n      return new Line(this.p1).to(this.p2);\r\n    }\r\n  };\r\n\r\n  Triangle.prototype.adjacentSides = function(id) {\r\n    if (id === \"p1\") {\r\n      return [new Line(this.p1).to(this), new Line(this.p1).to(this.p2)];\r\n    } else if (id === \"p2\") {\r\n      return [new Line(this.p2).to(this), new Line(this.p2).to(this.p1)];\r\n    } else {\r\n      return [new Line(this).to(this.p1), new Line(this).to(this.p2)];\r\n    }\r\n  };\r\n\r\n  Triangle.prototype.bisector = function(id, asLine, size) {\r\n    var ad, bp, p;\r\n    if (asLine == null) {\r\n      asLine = false;\r\n    }\r\n    if (size == null) {\r\n      size = 100;\r\n    }\r\n    ad = this.adjacentSides(id);\r\n    p = new Vector(ad[0]);\r\n    ad[0].moveTo(0, 0);\r\n    ad[1].moveTo(0, 0);\r\n    bp = ad[0].p1.bisect(ad[1].p1);\r\n    if (asLine) {\r\n      return new Line(p).to(bp.multiply(size).add(p));\r\n    } else {\r\n      return bp;\r\n    }\r\n  };\r\n\r\n  Triangle.prototype.altitude = function(id) {\r\n    if (id === \"p1\" || id === \"p2\") {\r\n      return new Line(this[id]).to(this.oppositeSide(id).getPerpendicularFromPoint(this[id]));\r\n    } else {\r\n      return new Line(this).to(this.oppositeSide().getPerpendicularFromPoint(this));\r\n    }\r\n  };\r\n\r\n  Triangle.prototype.centroid = function() {\r\n    var c0, c1, c2;\r\n    c0 = this.$divide(3);\r\n    c1 = this.p1.$divide(3);\r\n    c2 = this.p2.$divide(3);\r\n    return new Vector(c0.x + c1.x + c2.x, c0.y + c1.y + c2.y, c0.z + c1.z + c2.z);\r\n  };\r\n\r\n  Triangle.prototype.orthocenter = function() {\r\n    var a, b;\r\n    a = this.altitude();\r\n    b = this.altitude(\"p1\");\r\n    return a.intersectPath(b, Const.xyz);\r\n  };\r\n\r\n  Triangle.prototype.incenter = function() {\r\n    var a, b;\r\n    a = this.bisector(\"p0\", true);\r\n    b = this.bisector(\"p1\", true);\r\n    return a.intersectPath(b, Const.xyz);\r\n  };\r\n\r\n  Triangle.prototype.incircle = function() {\r\n    var area, center, radius;\r\n    center = this.incenter();\r\n    area = this.area();\r\n    radius = 2 * area.value / area.perimeter.value;\r\n    return new Circle(center).setRadius(radius);\r\n  };\r\n\r\n  Triangle.prototype.circumcenter = function() {\r\n    var medial, pbs;\r\n    medial = this.medial();\r\n    pbs = [new Line(medial).to(this.$subtract(medial).perpendicular()[0].$add(medial)), new Line(medial.p1).to(this.p1.$subtract(medial.p1).perpendicular()[0].$add(medial.p1)), new Line(medial.p2).to(this.p2.$subtract(medial.p2).perpendicular()[0].$add(medial.p2))];\r\n    return {\r\n      center: pbs[0].intersectPath(pbs[1], Const.xyz),\r\n      bisectors: pbs\r\n    };\r\n  };\r\n\r\n  Triangle.prototype.circumcircle = function() {\r\n    var center, r;\r\n    center = this.circumcenter();\r\n    r = this.magnitude(center.center);\r\n    return new Circle(center.center).setRadius(r);\r\n  };\r\n\r\n  Triangle.prototype.intersectPoint = function(p) {\r\n    var hp, s, sides;\r\n    sides = this.sides();\r\n    hp = (function() {\r\n      var aa, len1, results;\r\n      results = [];\r\n      for (aa = 0, len1 = sides.length; aa < len1; aa++) {\r\n        s = sides[aa];\r\n        results.push(s.collinear(p) > 0);\r\n      }\r\n      return results;\r\n    })();\r\n    return hp[0] === hp[1] && hp[1] === hp[2];\r\n  };\r\n\r\n  Triangle.prototype.intersectPath = function(path, get_pts, axis) {\r\n    var aa, len1, p, pts, s, sides;\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    sides = this.sides();\r\n    pts = [];\r\n    for (aa = 0, len1 = sides.length; aa < len1; aa++) {\r\n      s = sides[aa];\r\n      p = s.intersectPath(path);\r\n      if (p && s.withinBounds(p, axis)) {\r\n        if (!get_pts) {\r\n          return true;\r\n        }\r\n        pts.push(p);\r\n      }\r\n    }\r\n    if (get_pts) {\r\n      return pts;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  Triangle.prototype.intersectLine = function(line, get_pts, axis) {\r\n    var aa, ins, len1, p, pts;\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    if (axis == null) {\r\n      axis = Const.xy;\r\n    }\r\n    ins = this.intersectPath(line, true, axis);\r\n    pts = [];\r\n    for (aa = 0, len1 = ins.length; aa < len1; aa++) {\r\n      p = ins[aa];\r\n      if (line.withinBounds(p)) {\r\n        if (!get_pts) {\r\n          return true;\r\n        }\r\n        pts.push(p);\r\n      }\r\n    }\r\n    if (get_pts) {\r\n      return pts;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  Triangle.prototype.intersectLines = function(lines, get_pts) {\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    return Line.intersectLines(this, lines, get_pts);\r\n  };\r\n\r\n  Triangle.prototype.intersectPath3D = function(path, get_pts) {\r\n    var det, dir, e1, e2, inv_det, pvec, qvec, t, tvec, u, v;\r\n    e1 = this.p1.$subtract(this);\r\n    e2 = this.p2.$subtract(this);\r\n    dir = path.direction().normalize();\r\n    pvec = dir.cross(e2);\r\n    det = e1.dot(pvec);\r\n    if (det > -Const.epsilon && det < Const.epsilon) {\r\n      return false;\r\n    }\r\n    inv_det = 1 / det;\r\n    tvec = path.$subtract(this);\r\n    u = tvec.dot(pvec) * inv_det;\r\n    if (u < 0 || u > 1) {\r\n      return false;\r\n    }\r\n    qvec = tvec.cross(e1);\r\n    v = dir.dot(qvec) * inv_det;\r\n    if (v < 0 || v > 1) {\r\n      return false;\r\n    }\r\n    t = e2.dot(qvec) * inv_det;\r\n    if (t > Const.epsilon) {\r\n      if (get_pts) {\r\n        return [u, v, t];\r\n      } else {\r\n        return true;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  Triangle.prototype.intersectRectangle = function(rect, get_pts) {\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    return rect.intersectLines(this.sides(), get_pts);\r\n  };\r\n\r\n  Triangle.prototype.intersectCircle = function(circle, get_pts) {\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    return circle.intersectLines(this.sides(), get_pts);\r\n  };\r\n\r\n  Triangle.prototype.intersectTriangle = function(tri, get_pts) {\r\n    if (get_pts == null) {\r\n      get_pts = true;\r\n    }\r\n    return tri.intersectLines(this.sides(), get_pts);\r\n  };\r\n\r\n  Triangle.prototype.clone = function() {\r\n    return new Triangle(this).to(this.p1, this.p2);\r\n  };\r\n\r\n  return Triangle;\r\n\r\n})(Vector);\r\n\r\nthis.Triangle = Triangle;\r\n\r\nSVGForm = (function() {\r\n  SVGForm._domId = 0;\r\n\r\n  function SVGForm(space) {\r\n    this.cc = space.ctx || {};\r\n    this.cc.group = this.cc.group || null;\r\n    this.cc.groupID = \"ptx\";\r\n    this.cc.groupCount = 0;\r\n    this.cc.currentID = \"ptx0\";\r\n    this.cc.style = {\r\n      fill: \"#999\",\r\n      stroke: \"#666\",\r\n      \"stroke-width\": 1,\r\n      \"stroke-linejoin\": false,\r\n      \"stroke-linecap\": false\r\n    };\r\n    this.cc.font = \"11px sans-serif\";\r\n    this.cc.fontSize = 11;\r\n    this.cc.fontFace = \"sans-serif\";\r\n  }\r\n\r\n  SVGForm.prototype.fill = function(c) {\r\n    this.cc.style.fill = c ? c : false;\r\n    return this;\r\n  };\r\n\r\n  SVGForm.prototype.stroke = function(c, width, joint, cap) {\r\n    this.cc.style.stroke = c ? c : false;\r\n    if (width) {\r\n      this.cc.style[\"stroke-width\"] = width;\r\n    }\r\n    if (joint) {\r\n      this.cc.style[\"stroke-linejoin\"] = joint;\r\n    }\r\n    if (cap) {\r\n      this.cc.style[\"stroke-linecap\"] = joint;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  SVGForm.prototype.scope = function(group_id, group) {\r\n    if (group == null) {\r\n      group = false;\r\n    }\r\n    if (group) {\r\n      this.cc.group = group;\r\n    }\r\n    this.cc.groupID = group_id;\r\n    this.cc.groupCount = 0;\r\n    this.nextID();\r\n    return this.cc;\r\n  };\r\n\r\n  SVGForm.prototype.getScope = function(item) {\r\n    if (!item || item.animateID === null) {\r\n      throw \"getScope()'s item must be added to a Space, and has an animateID property. Otherwise, use scope() instead.\";\r\n    }\r\n    return this.scope(SVGForm._scopeID(item));\r\n  };\r\n\r\n  SVGForm.prototype.nextID = function() {\r\n    this.cc.groupCount++;\r\n    this.cc.currentID = this.cc.groupID + \"-\" + this.cc.groupCount;\r\n    return this.cc.currentID;\r\n  };\r\n\r\n  SVGForm.id = function(ctx) {\r\n    return ctx.currentID || \"p-\" + SVGForm._domId++;\r\n  };\r\n\r\n  SVGForm._scopeID = function(item) {\r\n    return \"item\" + item.animateID;\r\n  };\r\n\r\n  SVGForm.style = function(elem, styles) {\r\n    var k, st, v;\r\n    st = {};\r\n    for (k in styles) {\r\n      v = styles[k];\r\n      if (!v) {\r\n        if (k === \"fill\" || k === \"stroke\") {\r\n          st[k] = \"none\";\r\n        }\r\n      } else {\r\n        st[k] = v;\r\n      }\r\n    }\r\n    return DOMSpace.attr(elem, st);\r\n  };\r\n\r\n  SVGForm.point = function(ctx, pt, halfsize, fill, stroke, circle) {\r\n    var elem;\r\n    if (halfsize == null) {\r\n      halfsize = 2;\r\n    }\r\n    if (fill == null) {\r\n      fill = true;\r\n    }\r\n    if (stroke == null) {\r\n      stroke = true;\r\n    }\r\n    if (circle == null) {\r\n      circle = false;\r\n    }\r\n    elem = SVGSpace.svgElement(ctx.group, (circle ? \"circle\" : \"rect\"), SVGForm.id(ctx));\r\n    if (!elem) {\r\n      return;\r\n    }\r\n    if (circle) {\r\n      DOMSpace.attr(elem, {\r\n        cx: pt.x,\r\n        cy: pt.y,\r\n        r: halfsize\r\n      });\r\n    } else {\r\n      DOMSpace.attr(elem, {\r\n        x: pt.x - halfsize,\r\n        y: pt.y - halfsize,\r\n        width: halfsize + halfsize,\r\n        height: halfsize + halfsize\r\n      });\r\n    }\r\n    SVGForm.style(elem, ctx.style);\r\n    return elem;\r\n  };\r\n\r\n  SVGForm.prototype.point = function(p, halfsize, isCircle) {\r\n    if (halfsize == null) {\r\n      halfsize = 2;\r\n    }\r\n    if (isCircle == null) {\r\n      isCircle = false;\r\n    }\r\n    this.nextID();\r\n    SVGForm.point(this.cc, p, halfsize, true, true, isCircle);\r\n    return this;\r\n  };\r\n\r\n  SVGForm.points = function(ctx, pts, halfsize, fill, stroke, circle) {\r\n    var p;\r\n    if (halfsize == null) {\r\n      halfsize = 2;\r\n    }\r\n    if (fill == null) {\r\n      fill = true;\r\n    }\r\n    if (stroke == null) {\r\n      stroke = true;\r\n    }\r\n    if (circle == null) {\r\n      circle = false;\r\n    }\r\n    return (function() {\r\n      var aa, len1, results;\r\n      results = [];\r\n      for (aa = 0, len1 = pts.length; aa < len1; aa++) {\r\n        p = pts[aa];\r\n        results.push(SVGForm.point(ctx, p, halfsize, fill, stroke, circle));\r\n      }\r\n      return results;\r\n    })();\r\n  };\r\n\r\n  SVGForm.prototype.points = function(ps, halfsize, isCircle) {\r\n    var aa, len1, p;\r\n    if (halfsize == null) {\r\n      halfsize = 2;\r\n    }\r\n    if (isCircle == null) {\r\n      isCircle = false;\r\n    }\r\n    for (aa = 0, len1 = ps.length; aa < len1; aa++) {\r\n      p = ps[aa];\r\n      this.point(p, halfsize, isCircle);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  SVGForm.line = function(ctx, pair) {\r\n    var elem;\r\n    if (!pair.p1) {\r\n      throw (pair.toString()) + \" is not a Pair\";\r\n    }\r\n    elem = SVGSpace.svgElement(ctx.group, \"line\", SVGForm.id(ctx));\r\n    DOMSpace.attr(elem, {\r\n      x1: pair.x,\r\n      y1: pair.y,\r\n      x2: pair.p1.x,\r\n      y2: pair.p1.y\r\n    });\r\n    SVGForm.style(elem, ctx.style);\r\n    return elem;\r\n  };\r\n\r\n  SVGForm.prototype.line = function(p) {\r\n    this.nextID();\r\n    SVGForm.line(this.cc, p);\r\n    return this;\r\n  };\r\n\r\n  SVGForm.lines = function(ctx, pairs) {\r\n    var ln;\r\n    return (function() {\r\n      var aa, len1, results;\r\n      results = [];\r\n      for (aa = 0, len1 = pairs.length; aa < len1; aa++) {\r\n        ln = pairs[aa];\r\n        results.push(SVGForm.line(ctx, ln));\r\n      }\r\n      return results;\r\n    })();\r\n  };\r\n\r\n  SVGForm.prototype.lines = function(ps) {\r\n    var aa, len1, p;\r\n    for (aa = 0, len1 = ps.length; aa < len1; aa++) {\r\n      p = ps[aa];\r\n      this.line(p);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  SVGForm.rect = function(ctx, pair, fill, stroke) {\r\n    var elem, size;\r\n    if (fill == null) {\r\n      fill = true;\r\n    }\r\n    if (stroke == null) {\r\n      stroke = true;\r\n    }\r\n    if (!pair.p1) {\r\n      throw \"\" + (pair.toString() === !a(Pair));\r\n    }\r\n    elem = SVGSpace.svgElement(ctx.group, \"rect\", SVGForm.id(ctx));\r\n    size = pair.size();\r\n    DOMSpace.attr(elem, {\r\n      x: pair.x,\r\n      y: pair.y,\r\n      width: size.x,\r\n      height: size.y\r\n    });\r\n    SVGForm.style(elem, ctx.style);\r\n    return elem;\r\n  };\r\n\r\n  SVGForm.prototype.rect = function(p, checkBounds) {\r\n    var r;\r\n    if (checkBounds == null) {\r\n      checkBounds = true;\r\n    }\r\n    this.nextID();\r\n    r = checkBounds ? p.bounds() : p;\r\n    SVGForm.rect(this.cc, r);\r\n    return this;\r\n  };\r\n\r\n  SVGForm.circle = function(ctx, c, fill, stroke) {\r\n    var elem;\r\n    if (fill == null) {\r\n      fill = true;\r\n    }\r\n    if (stroke == null) {\r\n      stroke = false;\r\n    }\r\n    elem = SVGSpace.svgElement(ctx.group, \"circle\", SVGForm.id(ctx));\r\n    if (!elem) {\r\n      return;\r\n    }\r\n    DOMSpace.attr(elem, {\r\n      cx: c.x,\r\n      cy: c.y,\r\n      r: c.radius\r\n    });\r\n    SVGForm.style(elem, ctx.style);\r\n    return elem;\r\n  };\r\n\r\n  SVGForm.prototype.circle = function(c) {\r\n    this.nextID();\r\n    SVGForm.circle(this.cc, c);\r\n    return this;\r\n  };\r\n\r\n  SVGForm.polygon = function(ctx, pts, closePath, fill, stroke) {\r\n    var elem, i, points;\r\n    if (closePath == null) {\r\n      closePath = true;\r\n    }\r\n    if (fill == null) {\r\n      fill = true;\r\n    }\r\n    if (stroke == null) {\r\n      stroke = true;\r\n    }\r\n    elem = SVGSpace.svgElement(ctx.group, (closePath ? \"polygon\" : \"polyline\"), SVGForm.id(ctx));\r\n    if (!elem) {\r\n      return;\r\n    }\r\n    if (pts.length <= 1) {\r\n      return;\r\n    }\r\n    points = (function() {\r\n      var aa, ref, results;\r\n      results = [];\r\n      for (i = aa = 0, ref = pts.length; aa < ref; i = aa += 1) {\r\n        results.push(pts[i].x + \",\" + pts[i].y);\r\n      }\r\n      return results;\r\n    })();\r\n    DOMSpace.attr(elem, {\r\n      points: points.join(\" \")\r\n    });\r\n    SVGForm.style(elem, ctx.style);\r\n    return elem;\r\n  };\r\n\r\n  SVGForm.prototype.polygon = function(ps, closePath) {\r\n    this.nextID();\r\n    SVGForm.polygon(this.cc, ps, closePath);\r\n    return this;\r\n  };\r\n\r\n  SVGForm.triangle = function(ctx, tri, fill, stroke) {\r\n    if (fill == null) {\r\n      fill = true;\r\n    }\r\n    if (stroke == null) {\r\n      stroke = false;\r\n    }\r\n    return SVGForm.polygon(ctx, tri.toArray());\r\n  };\r\n\r\n  SVGForm.prototype.triangle = function(tri) {\r\n    this.nextID();\r\n    SVGForm.triangle(this.cc, tri);\r\n    return this;\r\n  };\r\n\r\n  SVGForm.curve = function(ctx, pts, closePath) {\r\n    if (closePath == null) {\r\n      closePath = false;\r\n    }\r\n    return SVGForm.polygon(ctx, pts, closePath);\r\n  };\r\n\r\n  SVGForm.prototype.curve = function(ps, closePath) {\r\n    if (closePath == null) {\r\n      closePath = false;\r\n    }\r\n    this.nextID();\r\n    SVGForm.curve(this.cc, ps, closePath);\r\n    return this;\r\n  };\r\n\r\n  SVGForm.text = function(ctx, pt, txt, maxWidth, dx, dy) {\r\n    var elem;\r\n    if (maxWidth == null) {\r\n      maxWidth = 0;\r\n    }\r\n    if (dx == null) {\r\n      dx = 0;\r\n    }\r\n    if (dy == null) {\r\n      dy = 0;\r\n    }\r\n    elem = SVGSpace.svgElement(ctx.group, \"text\", SVGForm.id(ctx));\r\n    if (!elem) {\r\n      return;\r\n    }\r\n    DOMSpace.attr(elem, {\r\n      \"pointer-events\": \"none\",\r\n      x: pt.x,\r\n      y: pt.y,\r\n      dx: 0,\r\n      dy: 0\r\n    });\r\n    elem.textContent = txt;\r\n    SVGForm.style(elem, {\r\n      fill: ctx.style.fill,\r\n      stroke: ctx.style.stroke,\r\n      \"font-family\": ctx.fontFace || false,\r\n      \"font-size\": ctx.fontSize || false\r\n    });\r\n    return elem;\r\n  };\r\n\r\n  SVGForm.prototype.text = function(p, txt, maxWidth, xoff, yoff) {\r\n    if (maxWidth == null) {\r\n      maxWidth = 1000;\r\n    }\r\n    this.nextID();\r\n    SVGForm.text(this.cc, p, txt, maxWidth, xoff, yoff);\r\n    return this;\r\n  };\r\n\r\n  SVGForm.prototype.font = function(size, face) {\r\n    if (face == null) {\r\n      face = false;\r\n    }\r\n    this.cc.fontFace = face;\r\n    this.cc.fontSize = size;\r\n    this.cc.font = size + \"px \" + face;\r\n    return this;\r\n  };\r\n\r\n  SVGForm.prototype.draw = function(shape) {\r\n    return this.sketch(shape);\r\n  };\r\n\r\n  SVGForm.prototype.sketch = function(shape) {\r\n    shape.floor();\r\n    if (shape instanceof Circle) {\r\n      SVGForm.circle(this.cc, shape, this.filled, this.stroked);\r\n    } else if (shape instanceof Rectangle) {\r\n      SVGForm.rect(this.cc, shape, this.filled, this.stroked);\r\n    } else if (shape instanceof Triangle) {\r\n      SVGForm.triangle(this.cc, shape, this.filled, this.stroked);\r\n    } else if (shape instanceof Line || shape instanceof Pair) {\r\n      SVGForm.line(this.cc, shape);\r\n    } else if (shape instanceof PointSet) {\r\n      SVGForm.polygon(this.cc, shape.points);\r\n    } else if (shape instanceof Vector || shape instanceof Point) {\r\n      SVGForm.point(this.cc, shape);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  return SVGForm;\r\n\r\n})();\r\n\r\nthis.SVGForm = SVGForm;\r\n\r\nSVGSpace = (function(superClass) {\r\n  extend(SVGSpace, superClass);\r\n\r\n  function SVGSpace(id, bgcolor, context) {\r\n    if (id == null) {\r\n      id = 'pt_space';\r\n    }\r\n    if (bgcolor == null) {\r\n      bgcolor = false;\r\n    }\r\n    if (context == null) {\r\n      context = 'svg';\r\n    }\r\n    SVGSpace.__super__.constructor.apply(this, arguments);\r\n    this.bg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\r\n    this.bg.setAttribute(\"id\", id + \"_bg\");\r\n    this.bg.setAttribute(\"fill\", bgcolor);\r\n    this.space.appendChild(this.bg);\r\n  }\r\n\r\n  SVGSpace.prototype._createSpaceElement = function() {\r\n    this.space = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n    this.space.setAttribute(\"id\", this.id);\r\n    return this.appended = false;\r\n  };\r\n\r\n  SVGSpace.svgElement = function(parent, name, id) {\r\n    var elem;\r\n    if (!parent || !parent.appendChild) {\r\n      throw \"parent parameter needs to be a DOM node\";\r\n    }\r\n    elem = document.querySelector(\"#\" + id);\r\n    if (!elem) {\r\n      elem = document.createElementNS(\"http://www.w3.org/2000/svg\", name);\r\n      elem.setAttribute(\"id\", id);\r\n      elem.setAttribute(\"class\", id.substring(0, id.indexOf(\"-\")));\r\n      parent.appendChild(elem);\r\n    }\r\n    return elem;\r\n  };\r\n\r\n  SVGSpace.prototype.resize = function(w, h, evt) {\r\n    var k, p, ref;\r\n    this.size.set(w, h);\r\n    this.center = new Vector(w / 2, h / 2);\r\n    this.space.setAttribute(\"width\", w);\r\n    this.space.setAttribute(\"height\", h);\r\n    this.bg.setAttribute(\"width\", w);\r\n    this.bg.setAttribute(\"height\", h);\r\n    ref = this.items;\r\n    for (k in ref) {\r\n      p = ref[k];\r\n      if (p.onSpaceResize != null) {\r\n        p.onSpaceResize(w, h, evt);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  SVGSpace.prototype.remove = function(item) {\r\n    var aa, len1, t, temp;\r\n    temp = this.space.querySelectorAll(\".\" + SVGForm._scopeID(item));\r\n    for (aa = 0, len1 = temp.length; aa < len1; aa++) {\r\n      t = temp[aa];\r\n      t.parentNode.removeChild(t);\r\n    }\r\n    delete this.items[item.animateID];\r\n    return this;\r\n  };\r\n\r\n  SVGSpace.prototype.removeAll = function() {\r\n    while (this.space.firstChild) {\r\n      this.space.removeChild(this.space.firstChild);\r\n      return this;\r\n    }\r\n  };\r\n\r\n  return SVGSpace;\r\n\r\n})(DOMSpace);\r\n\r\nthis.SVGSpace = SVGSpace;\r\n\r\nEasing = (function() {\r\n  function Easing() {}\r\n\r\n  Easing.linear = function(t, b, c, d) {\r\n    return c * (t /= d) + b;\r\n  };\r\n\r\n  Easing._linear = function(t) {\r\n    return Easing.linear(t, 0, 1, 1);\r\n  };\r\n\r\n  Easing.quadIn = function(t, b, c, d) {\r\n    return c * (t /= d) * t + b;\r\n  };\r\n\r\n  Easing._quadIn = function(t) {\r\n    return Easing.quadIn(t, 0, 1, 1);\r\n  };\r\n\r\n  Easing.quadOut = function(t, b, c, d) {\r\n    return -c * (t /= d) * (t - 2) + b;\r\n  };\r\n\r\n  Easing._quadOut = function(t) {\r\n    return Easing.quadOut(t, 0, 1, 1);\r\n  };\r\n\r\n  Easing.cubicIn = function(t, b, c, d) {\r\n    t = t / d;\r\n    return c * t * t * t + b;\r\n  };\r\n\r\n  Easing._cubicIn = function(t) {\r\n    return Easing.cubicIn(t, 0, 1, 1);\r\n  };\r\n\r\n  Easing.cubicOut = function(t, b, c, d) {\r\n    t = t / d;\r\n    return c * ((t - 1) * t * t + 1) + b;\r\n  };\r\n\r\n  Easing._cubicOut = function(t) {\r\n    return Easing.cubicOut(t, 0, 1, 1);\r\n  };\r\n\r\n  Easing.elastic = function(t, b, c, d, el) {\r\n    var a, p, s;\r\n    if (el == null) {\r\n      el = 0.3;\r\n    }\r\n    s = 1.70158;\r\n    p = d * el;\r\n    a = c;\r\n    if (t === 0) {\r\n      return b;\r\n    }\r\n    t = t / d;\r\n    if (t === 1) {\r\n      return b + c;\r\n    }\r\n    if (a < Math.abs(c)) {\r\n      a = c;\r\n      s = p / 4;\r\n    } else if (a !== 0) {\r\n      s = p / Const.two_pi * Math.asin(c / a);\r\n    } else {\r\n      s = 0;\r\n    }\r\n    return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * Const.two_pi / p) + c + b;\r\n  };\r\n\r\n  Easing._elastic = function(t) {\r\n    return Easing.elastic(t, 0, 1, 1);\r\n  };\r\n\r\n  Easing.bounce = function(t, b, c, d) {\r\n    if ((t /= d) < (1 / 2.75)) {\r\n      return c * (7.5625 * t * t) + b;\r\n    } else if (t < (2 / 2.75)) {\r\n      return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\r\n    } else if (t < (2.5 / 2.75)) {\r\n      return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\r\n    } else {\r\n      return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\r\n    }\r\n  };\r\n\r\n  Easing._bounce = function(t) {\r\n    return Easing.bounce(t, 0, 1, 1);\r\n  };\r\n\r\n  return Easing;\r\n\r\n})();\r\n\r\nthis.Easing = Easing;\r\n\r\nGridCascade = (function(superClass) {\r\n  extend(GridCascade, superClass);\r\n\r\n  function GridCascade() {\r\n    GridCascade.__super__.constructor.apply(this, arguments);\r\n    this.startRow = 0;\r\n  }\r\n\r\n  GridCascade.prototype.resetLayout = function() {\r\n    this.layout = [];\r\n    return this.startRow = 0;\r\n  };\r\n\r\n  GridCascade.prototype.occupy = function(x, y, w, h) {\r\n    var aa, ab, c, r, ref, ref1, ref2, ref3;\r\n    for (c = aa = ref = x, ref1 = w + x; ref <= ref1 ? aa < ref1 : aa > ref1; c = ref <= ref1 ? ++aa : --aa) {\r\n      for (r = ab = ref2 = y, ref3 = h + y; ref2 <= ref3 ? ab < ref3 : ab > ref3; r = ref2 <= ref3 ? ++ab : --ab) {\r\n        if (this.layout[r] == null) {\r\n          this.layout[r] = [];\r\n        }\r\n        this.layout[r][c] = 1;\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  GridCascade.prototype.findStartRow = function() {\r\n    var aa, ab, c, index, r, ref, ref1, ref2;\r\n    index = this.startRow;\r\n    for (r = aa = ref = this.startRow, ref1 = this.rows; ref <= ref1 ? aa < ref1 : aa > ref1; r = ref <= ref1 ? ++aa : --aa) {\r\n      index = r;\r\n      for (c = ab = 0, ref2 = this.columns; 0 <= ref2 ? ab < ref2 : ab > ref2; c = 0 <= ref2 ? ++ab : --ab) {\r\n        if (this.layout[r] != null) {\r\n          if ((this.layout[r][c] == null) || this.layout[r][c] <= 0) {\r\n            return index;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return index;\r\n  };\r\n\r\n  GridCascade.prototype.fit = function(cols, rows) {\r\n    var aa, ab, ac, allRowsFree, b, cell, colCount, colSize, currCol, currRow, freeCol, rc, ref, ref1, ref2, ref3, ref4;\r\n    colSize = Math.min(cols, this.columns);\r\n    for (currRow = aa = ref = this.startRow, ref1 = this.rows; ref <= ref1 ? aa < ref1 : aa > ref1; currRow = ref <= ref1 ? ++aa : --aa) {\r\n      colCount = colSize;\r\n      freeCol = 0;\r\n      if (currRow + rows >= this.rows) {\r\n        this.rows += rows;\r\n      }\r\n      if (this.layout[currRow] == null) {\r\n        this.layout[currRow] = [];\r\n      }\r\n      for (currCol = ab = 0, ref2 = this.columns; 0 <= ref2 ? ab < ref2 : ab > ref2; currCol = 0 <= ref2 ? ++ab : --ab) {\r\n        cell = this.layout[currRow][currCol];\r\n        if ((cell != null) && cell > 0) {\r\n          freeCol = currCol + 1;\r\n          colCount = colSize;\r\n        } else {\r\n          colCount--;\r\n          if (colCount === 0) {\r\n            allRowsFree = true;\r\n            if (rows > 1) {\r\n              for (rc = ac = ref3 = currRow, ref4 = currRow + rows; ref3 <= ref4 ? ac < ref4 : ac > ref4; rc = ref3 <= ref4 ? ++ac : --ac) {\r\n                if (rc <= this.rows && (this.layout[rc] != null) && this.layout[rc][freeCol] > 0) {\r\n                  allRowsFree = false;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n            if (allRowsFree) {\r\n              this.occupy(freeCol, currRow, colSize, rows);\r\n              if (currRow > this.startRow) {\r\n                this.startRow = this.findStartRow();\r\n              }\r\n              b = new Rectangle(this.$add(this.cell.size.$multiply(freeCol, currRow)));\r\n              b.resizeTo(this.cell.size.$multiply(colSize, rows));\r\n              return {\r\n                row: currRow,\r\n                column: freeCol,\r\n                columnSize: colSize,\r\n                rowSize: rows,\r\n                bound: b\r\n              };\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    console.error(\"cannot fit \" + currRow + \" \" + freeCol + \" \" + cols + \" \" + rows);\r\n    return false;\r\n  };\r\n\r\n  return GridCascade;\r\n\r\n})(Grid);\r\n\r\nthis.GridCascade = GridCascade;\r\n\r\nParticleEmitter = (function(superClass) {\r\n  extend(ParticleEmitter, superClass);\r\n\r\n  function ParticleEmitter() {\r\n    ParticleEmitter.__super__.constructor.apply(this, arguments);\r\n    this.system = null;\r\n    this.lastTime = 0;\r\n    this.period = 0;\r\n    this.animateID = -1;\r\n  }\r\n\r\n  ParticleEmitter.prototype.init = function(system) {\r\n    return this.system = system;\r\n  };\r\n\r\n  ParticleEmitter.prototype.frequency = function(f) {\r\n    this.period = 1000 / f;\r\n    return this;\r\n  };\r\n\r\n  ParticleEmitter.prototype.emit = function() {};\r\n\r\n  ParticleEmitter.prototype.animate = function(time, frame, ctx) {\r\n    if (time - this.lastTime > this.period) {\r\n      this.emit();\r\n      return this.lastTime = time;\r\n    }\r\n  };\r\n\r\n  return ParticleEmitter;\r\n\r\n})(Vector);\r\n\r\nthis.ParticleEmitter = ParticleEmitter;\r\n\r\nParticleField = (function(superClass) {\r\n  extend(ParticleField, superClass);\r\n\r\n  function ParticleField() {\r\n    ParticleField.__super__.constructor.apply(this, arguments);\r\n    this.system = void 0;\r\n  }\r\n\r\n  ParticleField.prototype.check = function(particles, removal) {\r\n    var aa, len1, p, temp;\r\n    if (removal == null) {\r\n      removal = false;\r\n    }\r\n    temp = [];\r\n    for (aa = 0, len1 = particles.length; aa < len1; aa++) {\r\n      p = particles[aa];\r\n      if (this.hasIntersect(p)) {\r\n        this.work(p);\r\n      } else {\r\n        temp.push(p);\r\n      }\r\n    }\r\n    return (removal ? temp : particles);\r\n  };\r\n\r\n  ParticleField.prototype.work = function(p) {};\r\n\r\n  return ParticleField;\r\n\r\n})(Rectangle);\r\n\r\nthis.ParticleField = ParticleField;\r\n\r\nQuadTree = (function(superClass) {\r\n  extend(QuadTree, superClass);\r\n\r\n  function QuadTree() {\r\n    QuadTree.__super__.constructor.apply(this, arguments);\r\n    this.quads = false;\r\n    this.items = [];\r\n    this.depth = 0;\r\n    this.max_depth = 6;\r\n    this.max_items = 2;\r\n  }\r\n\r\n  QuadTree.prototype.getQuads = function(p, list) {\r\n    var k, q, ref;\r\n    if (list == null) {\r\n      list = [];\r\n    }\r\n    if (this.intersectPoint(p)) {\r\n      list.push(this);\r\n      if (this.quads) {\r\n        ref = this.quads;\r\n        for (k in ref) {\r\n          q = ref[k];\r\n          if (q.intersectPoint(p)) {\r\n            q.getQuads(p, list);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return list;\r\n  };\r\n\r\n  QuadTree.prototype.getItems = function(p) {\r\n    var k, q, ref;\r\n    if (this.intersectPoint(p)) {\r\n      if (!this.quads) {\r\n        return this.items;\r\n      }\r\n      if (this.quads) {\r\n        ref = this.quads;\r\n        for (k in ref) {\r\n          q = ref[k];\r\n          if (q.intersectPoint(p)) {\r\n            return q.getItems(p);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return [];\r\n  };\r\n\r\n  QuadTree.prototype.addToQuad = function(item) {\r\n    var _depth, k, q, ref;\r\n    if (!item) {\r\n      return -1;\r\n    }\r\n    if (this.quads) {\r\n      ref = this.quads;\r\n      for (k in ref) {\r\n        q = ref[k];\r\n        _depth = q.addToQuad(item);\r\n        if (_depth > 0) {\r\n          return _depth;\r\n        }\r\n      }\r\n      return -1;\r\n    }\r\n    if (!this.quads && this.intersectPoint(item)) {\r\n      if (this.items.length >= this.max_items) {\r\n        if (this.depth < this.max_depth) {\r\n          this.splitQuad();\r\n          return this.addToQuad(item);\r\n        } else {\r\n          return -1;\r\n        }\r\n      } else {\r\n        this.items.push(item);\r\n        return this.depth;\r\n      }\r\n    }\r\n    return -1;\r\n  };\r\n\r\n  QuadTree.prototype.splitQuad = function() {\r\n    var _depth, aa, ab, i, item, k, len1, len2, q, ref, ref1, ref2, results, t;\r\n    this.quads = this.quadrants();\r\n    ref = this.quads;\r\n    for (k in ref) {\r\n      q = ref[k];\r\n      q.depth = this.depth + 1;\r\n    }\r\n    ref1 = this.items;\r\n    for (i = aa = 0, len1 = ref1.length; aa < len1; i = ++aa) {\r\n      item = ref1[i];\r\n      _depth = this.addToQuad(item);\r\n      if (_depth > this.depth) {\r\n        this.items[i] = null;\r\n      }\r\n    }\r\n    ref2 = this.items;\r\n    results = [];\r\n    for (ab = 0, len2 = ref2.length; ab < len2; ab++) {\r\n      t = ref2[ab];\r\n      if (!t) {\r\n        results.push(this.items.splice(t, 1));\r\n      } else {\r\n        results.push(void 0);\r\n      }\r\n    }\r\n    return results;\r\n  };\r\n\r\n  QuadTree.prototype.resetQuad = function() {\r\n    var k, q, ref;\r\n    this.items = [];\r\n    if (this.quads) {\r\n      ref = this.quads;\r\n      for (k in ref) {\r\n        q = ref[k];\r\n        q.resetQuad();\r\n      }\r\n      return this.quads = false;\r\n    }\r\n  };\r\n\r\n  return QuadTree;\r\n\r\n})(Rectangle);\r\n\r\nthis.QuadTree = QuadTree;\r\n\r\nSamplePoints = (function(superClass) {\r\n  extend(SamplePoints, superClass);\r\n\r\n  function SamplePoints() {\r\n    SamplePoints.__super__.constructor.apply(this, arguments);\r\n    this.bestcandidate = null;\r\n    this.poisson = null;\r\n    this.bound = null;\r\n    this.boundsize = null;\r\n  }\r\n\r\n  SamplePoints.prototype.setBounds = function(b, anchor) {\r\n    if (anchor == null) {\r\n      anchor = false;\r\n    }\r\n    if (anchor) {\r\n      this.set(b);\r\n    }\r\n    this.bound = new Rectangle(this).size(b.size());\r\n    return this;\r\n  };\r\n\r\n  SamplePoints.prototype.bestCandidateSampler = function() {\r\n    this.points = [];\r\n    if (!this.bound) {\r\n      this.bound = new Rectangle().size(500, 500);\r\n    }\r\n    this.boundsize = this.bound.size();\r\n    this.bestcandidate = {\r\n      halfsize: this.boundsize.$divide(2),\r\n      quartersize: this.boundsize.$divide(4),\r\n      maxDist: this.boundsize.x * this.boundsize.x + this.boundsize.y * this.boundsize.y\r\n    };\r\n    return this;\r\n  };\r\n\r\n  SamplePoints.prototype.poissonSampler = function(radius) {\r\n    var cellsize;\r\n    this.points = [];\r\n    if (!this.bound) {\r\n      this.bound = new Rectangle().size(500, 500);\r\n    }\r\n    this.boundsize = this.bound.size();\r\n    cellsize = radius * Math.SQRT1_2;\r\n    this.poisson = {\r\n      grid: [],\r\n      gridWidth: Math.ceil(this.boundsize.x / cellsize),\r\n      gridHeight: Math.ceil(this.boundsize.y / cellsize),\r\n      cellSize: cellsize,\r\n      radius: radius,\r\n      radius2: radius * radius,\r\n      R: 3 * radius * radius,\r\n      queue: [],\r\n      queueSize: 0,\r\n      sampleSize: 0,\r\n      sincos: Util.sinCosTable()\r\n    };\r\n    return this;\r\n  };\r\n\r\n  SamplePoints.prototype.sample = function(numSamples, type) {\r\n    var a, aa, ab, best, bestDist, i, j, nearest, p, r, ref, ref1, s, x, y;\r\n    if (numSamples == null) {\r\n      numSamples = 10;\r\n    }\r\n    if (type == null) {\r\n      type = false;\r\n    }\r\n    if (this.poisson && type === 'poisson') {\r\n      if (this.poisson.sampleSize > 0 && this.poisson.queueSize === 0) {\r\n        return false;\r\n      }\r\n      if (!this.poisson.sampleSize) {\r\n        return this._poissonSample(this.bound.x + this.boundsize.x / 2, this.bound.y + this.boundsize.y / 2);\r\n      }\r\n      while (this.poisson.queueSize) {\r\n        i = Math.floor(Math.random() * this.poisson.queueSize);\r\n        s = this.poisson.queue[i];\r\n        for (j = aa = 0, ref = numSamples; aa < ref; j = aa += 1) {\r\n          a = Math.floor(360 * Math.random());\r\n          r = Math.sqrt(Math.random() * this.poisson.R + this.poisson.radius2);\r\n          x = s.x + r * this.poisson.sincos.cos[a];\r\n          y = s.y + r * this.poisson.sincos.sin[a];\r\n          if (x >= this.bound.x && x < this.boundsize.x && y >= this.bound.y && y < this.boundsize.y && this._poissonCheck(x, y)) {\r\n            return this._poissonSample(x, y);\r\n          }\r\n        }\r\n        this.poisson.queue[i] = this.poisson.queue[--this.poisson.queueSize];\r\n        this.poisson.queue.length = this.poisson.queueSize;\r\n      }\r\n      return true;\r\n    } else if (this.bestcandidate) {\r\n      best = null;\r\n      bestDist = -1;\r\n      for (i = ab = 0, ref1 = numSamples; ab < ref1; i = ab += 1) {\r\n        p = new Vector(this.bound.x + this.boundsize.x * Math.random(), this.bound.y + this.boundsize.y * Math.random());\r\n        if (this.points.length === 0) {\r\n          best = p;\r\n          break;\r\n        } else {\r\n          nearest = this._bestCandidateCheck(p);\r\n          if (nearest > bestDist) {\r\n            best = p;\r\n            bestDist = nearest;\r\n          }\r\n        }\r\n      }\r\n      if (best) {\r\n        this.points.push(best);\r\n      }\r\n      return best;\r\n    }\r\n  };\r\n\r\n  SamplePoints.prototype._bestCandidateCheck = function(p) {\r\n    var _dist, aa, dist, dx, dy, halfbound, it, len1, matches, w;\r\n    _dist = this.bestcandidate.maxDist;\r\n    halfbound = new Rectangle(p.x - this.bestcandidate.quartersize.x, p.y - this.bestcandidate.quartersize.y).size(this.bestcandidate.halfsize.x, this.bestcandidate.halfsize.y);\r\n    matches = (function() {\r\n      var aa, len1, ref, results;\r\n      ref = this.points;\r\n      results = [];\r\n      for (aa = 0, len1 = ref.length; aa < len1; aa++) {\r\n        it = ref[aa];\r\n        if (halfbound.intersectPoint(it)) {\r\n          results.push(it);\r\n        }\r\n      }\r\n      return results;\r\n    }).call(this);\r\n    for (aa = 0, len1 = matches.length; aa < len1; aa++) {\r\n      w = matches[aa];\r\n      dx = w.x - p.x;\r\n      dy = w.y - p.y;\r\n      dist = dx * dx + dy * dy;\r\n      if (dist < _dist) {\r\n        _dist = dist;\r\n      }\r\n    }\r\n    return _dist;\r\n  };\r\n\r\n  SamplePoints.prototype._poissonSample = function(x, y) {\r\n    var s;\r\n    s = new Point(x, y);\r\n    this.poisson.queue.push(s);\r\n    this.poisson.grid[this.poisson.gridWidth * (y / this.poisson.cellSize | 0) + (x / this.poisson.cellSize | 0)] = s;\r\n    this.poisson.sampleSize++;\r\n    this.poisson.queueSize++;\r\n    return s;\r\n  };\r\n\r\n  SamplePoints.prototype._poissonCheck = function(x, y) {\r\n    var aa, ab, dx, dy, i, i0, i1, j, j0, j1, o, ref, ref1, ref2, ref3, s;\r\n    i = Math.floor(x / this.poisson.cellSize);\r\n    j = Math.floor(y / this.poisson.cellSize);\r\n    i0 = Math.max(i - 2, 0);\r\n    j0 = Math.max(j - 2, 0);\r\n    i1 = Math.min(i + 3, this.poisson.gridWidth);\r\n    j1 = Math.min(j + 3, this.poisson.gridHeight);\r\n    for (j = aa = ref = j0, ref1 = j1; aa < ref1; j = aa += 1) {\r\n      o = j * this.poisson.gridWidth;\r\n      for (i = ab = ref2 = i0, ref3 = i1; ab < ref3; i = ab += 1) {\r\n        s = this.poisson.grid[o + i];\r\n        if (s) {\r\n          dx = s.x - x;\r\n          dy = s.y - y;\r\n          if (dx * dx + dy * dy < this.poisson.radius2) {\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  SamplePoints.bestCandidate = function(bound, items, samples) {\r\n    var _nearest, aa, best, bestDist, halfsize, i, maxDist, nearest, p, quartersize, ref, size;\r\n    if (samples == null) {\r\n      samples = 10;\r\n    }\r\n    size = bound.size();\r\n    halfsize = size.$divide(2);\r\n    quartersize = size.$divide(4);\r\n    maxDist = size.x * size.x + size.y * size.y;\r\n    _nearest = function(p) {\r\n      var _dist, aa, dist, dx, dy, halfbound, it, len1, matches, w;\r\n      _dist = maxDist;\r\n      halfbound = new Rectangle(p.x - quartersize.x, p.y - quartersize.y).size(halfsize.x, halfsize.y);\r\n      matches = (function() {\r\n        var aa, len1, results;\r\n        results = [];\r\n        for (aa = 0, len1 = items.length; aa < len1; aa++) {\r\n          it = items[aa];\r\n          if (halfbound.intersetPoint(it)) {\r\n            results.push(it);\r\n          }\r\n        }\r\n        return results;\r\n      })();\r\n      for (aa = 0, len1 = matches.length; aa < len1; aa++) {\r\n        w = matches[aa];\r\n        dx = w.x - p.x;\r\n        dy = w.y - p.y;\r\n        dist = dx * dx + dy * dy;\r\n        if (dist < _dist) {\r\n          _dist = dist;\r\n        }\r\n      }\r\n      return _dist;\r\n    };\r\n    best = null;\r\n    bestDist = -1;\r\n    for (i = aa = 0, ref = samples; 0 <= ref ? aa < ref : aa > ref; i = 0 <= ref ? ++aa : --aa) {\r\n      p = new Vector(bound.x + size.x * Math.random(), bound.y + size.y * Math.random());\r\n      if (items.length === 0) {\r\n        return p;\r\n      } else {\r\n        nearest = _nearest(p);\r\n        if (nearest > bestDist) {\r\n          best = p;\r\n          bestDist = nearest;\r\n        }\r\n      }\r\n    }\r\n    return best;\r\n  };\r\n\r\n  return SamplePoints;\r\n\r\n})(PointSet);\r\n\r\nthis.SamplePoints = SamplePoints;\r\n\r\nStripeBound = (function(superClass) {\r\n  extend(StripeBound, superClass);\r\n\r\n  function StripeBound() {\r\n    StripeBound.__super__.constructor.apply(this, arguments);\r\n    this.frequency = new Point();\r\n    this.stripes = new Point();\r\n    this.method = 'frequency';\r\n    this.mask = null;\r\n  }\r\n\r\n  StripeBound.prototype.setFrequency = function(x, y) {\r\n    this.frequency = new Vector(x, y);\r\n    return this.method = 'frequency';\r\n  };\r\n\r\n  StripeBound.prototype.setStripes = function(x, y) {\r\n    this.stripes = new Point(x, y);\r\n    return this.method = 'stripes';\r\n  };\r\n\r\n  StripeBound.prototype.getStripes = function() {\r\n    var aa, ab, d, diff, dx, dy, freq, p, ref, ref1, result, size;\r\n    size = this.size();\r\n    result = {\r\n      columns: [],\r\n      rows: []\r\n    };\r\n    freq = this.method === 'frequency' ? this.frequency.clone() : size.$divide(this.stripes).floor();\r\n    diff = size.$divide(freq);\r\n    for (d = aa = 0, ref = freq.y - 1; 0 <= ref ? aa <= ref : aa >= ref; d = 0 <= ref ? ++aa : --aa) {\r\n      dy = diff.y * d;\r\n      p = new Pair(0, dy).to(size.x, dy + diff.y).add(this);\r\n      p.p1.add(this);\r\n      result.rows.push(p);\r\n    }\r\n    for (d = ab = 0, ref1 = freq.x - 1; 0 <= ref1 ? ab <= ref1 : ab >= ref1; d = 0 <= ref1 ? ++ab : --ab) {\r\n      dx = diff.x * d;\r\n      p = new Pair(dx, 0).to(dx + diff.x + 0.5, size.y).add(this);\r\n      p.p1.add(this);\r\n      result.columns.push(p);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  StripeBound.prototype.getStripeLines = function() {\r\n    var aa, ab, d, diff, dx, dy, freq, p, ref, ref1, result, size;\r\n    size = this.size();\r\n    result = {\r\n      columns: [],\r\n      rows: []\r\n    };\r\n    freq = this.method === 'frequency' ? this.frequency.clone() : size.$divide(this.stripes).floor();\r\n    diff = size.$divide(freq);\r\n    for (d = aa = 0, ref = freq.y; 0 <= ref ? aa <= ref : aa >= ref; d = 0 <= ref ? ++aa : --aa) {\r\n      dy = diff.y * d;\r\n      p = new Pair(0, dy).to(size.x, dy).add(this);\r\n      p.p1.add(this);\r\n      result.rows.push(p);\r\n    }\r\n    for (d = ab = 0, ref1 = freq.x; 0 <= ref1 ? ab <= ref1 : ab >= ref1; d = 0 <= ref1 ? ++ab : --ab) {\r\n      dx = diff.x * d;\r\n      p = new Pair(dx, 0).to(dx, size.y).add(this);\r\n      p.p1.add(this);\r\n      result.columns.push(p);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  StripeBound.prototype.setMask = function(w, h, anchor) {\r\n    var diff, sz;\r\n    if (anchor == null) {\r\n      anchor = false;\r\n    }\r\n    this.mask = new Rectangle(this.x, this.y);\r\n    sz = this.size();\r\n    if (!anchor) {\r\n      diff = sz.$subtract(w, h).divide(2);\r\n      anchor = new Point(this.x + diff.x, this.y + diff.y);\r\n    } else {\r\n      anchor = this.$add(anchor);\r\n    }\r\n    return this.mask.set(anchor.x, anchor.y).size(w, h);\r\n  };\r\n\r\n  StripeBound.prototype.anchorMask = function() {\r\n    var d;\r\n    d = this.$subtract(this.mask);\r\n    this.moveBy(d);\r\n    return this.mask.moveBy(d);\r\n  };\r\n\r\n  return StripeBound;\r\n\r\n})(Rectangle);\r\n\r\nthis.StripeBound = StripeBound;\r\n\r\nUI = (function(superClass) {\r\n  extend(UI, superClass);\r\n\r\n  UI.dragTarget = null;\r\n\r\n  function UI() {\r\n    UI.__super__.constructor.apply(this, arguments);\r\n    this.dragging = false;\r\n  }\r\n\r\n  UI.prototype.animate = function(time, frame, ctx) {\r\n    ctx.fillStyle = '#f00';\r\n    return Form.rect(ctx, this);\r\n  };\r\n\r\n  UI.prototype.onMouseAction = function(type, x, y, evt) {\r\n    if (this.intersectPoint(x, y)) {\r\n      if (type === 'drag' && !UI.dragTarget) {\r\n        this.dragging = true;\r\n        UI.dragTarget = this;\r\n      }\r\n    }\r\n    if (this.dragging && type === 'move') {\r\n      this.moveTo(x, y).moveBy(this.size().multiply(-0.5));\r\n    }\r\n    if (type === 'drop') {\r\n      this.dragging = false;\r\n      return UI.dragTarget = null;\r\n    }\r\n  };\r\n\r\n  return UI;\r\n\r\n})(Rectangle);\r\n\r\nthis.UI = UI;\r\n\r\nNoise = (function(superClass) {\r\n  extend(Noise, superClass);\r\n\r\n  Noise.prototype.grad3 = [[1, 1, 0], [-1, 1, 0], [1, -1, 0], [-1, -1, 0], [1, 0, 1], [-1, 0, 1], [1, 0, -1], [-1, 0, -1], [0, 1, 1], [0, -1, 1], [0, 1, -1], [0, -1, -1]];\r\n\r\n  Noise.prototype.simplex = [[0, 1, 2, 3], [0, 1, 3, 2], [0, 0, 0, 0], [0, 2, 3, 1], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [1, 2, 3, 0], [0, 2, 1, 3], [0, 0, 0, 0], [0, 3, 1, 2], [0, 3, 2, 1], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [1, 3, 2, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [1, 2, 0, 3], [0, 0, 0, 0], [1, 3, 0, 2], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [2, 3, 0, 1], [2, 3, 1, 0], [1, 0, 2, 3], [1, 0, 3, 2], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [2, 0, 3, 1], [0, 0, 0, 0], [2, 1, 3, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [2, 0, 1, 3], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [3, 0, 1, 2], [3, 0, 2, 1], [0, 0, 0, 0], [3, 1, 2, 0], [2, 1, 0, 3], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [3, 1, 0, 2], [0, 0, 0, 0], [3, 2, 0, 1], [3, 2, 1, 0]];\r\n\r\n  function Noise() {\r\n    var i;\r\n    Noise.__super__.constructor.apply(this, arguments);\r\n    this.p = [151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9, 129, 22, 39, 253, 9, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180];\r\n    this.perm = (function() {\r\n      var aa, results;\r\n      results = [];\r\n      for (i = aa = 0; aa < 512; i = ++aa) {\r\n        results.push(this.p[i & 255]);\r\n      }\r\n      return results;\r\n    }).call(this);\r\n  }\r\n\r\n  Noise.prototype.seed = function(seed) {\r\n    var aa, i, results, v;\r\n    if (seed > 0 && seed < 1) {\r\n      seed *= 65536;\r\n    }\r\n    seed = Math.floor(seed);\r\n    if (seed < 256) {\r\n      seed |= seed << 8;\r\n    }\r\n    results = [];\r\n    for (i = aa = 0; aa <= 255; i = ++aa) {\r\n      v = i & 1 ? this.p[i] ^ (seed & 255) : this.p[i] ^ ((seed >> 8) & 255);\r\n      results.push(this.perm[i] = this.perm[i + 256] = v);\r\n    }\r\n    return results;\r\n  };\r\n\r\n  Noise.prototype._dot = function(g, x, y) {\r\n    return g[0] * x + g[1] * y;\r\n  };\r\n\r\n  Noise.prototype.perlin2d = function(xin, yin) {\r\n    var _fade, i, j, n00, n01, n10, n11, tx, x, y;\r\n    if (xin == null) {\r\n      xin = this.x;\r\n    }\r\n    if (yin == null) {\r\n      yin = this.y;\r\n    }\r\n    _fade = function(f) {\r\n      return f * f * f * (f * (f * 6 - 15) + 10);\r\n    };\r\n    i = Math.floor(xin) % 255;\r\n    j = Math.floor(yin) % 255;\r\n    x = xin - i;\r\n    y = yin - j;\r\n    n00 = this._dot(this.grad3[(i + this.perm[j]) % 12], x, y);\r\n    n01 = this._dot(this.grad3[(i + this.perm[j + 1]) % 12], x, y - 1);\r\n    n10 = this._dot(this.grad3[(i + 1 + this.perm[j]) % 12], x - 1, y);\r\n    n11 = this._dot(this.grad3[(i + 1 + this.perm[j + 1]) % 12], x - 1, y - 1);\r\n    tx = _fade(x);\r\n    return Util.lerp(Util.lerp(n00, n10, tx), Util.lerp(n01, n11, tx), _fade(y));\r\n  };\r\n\r\n  Noise.prototype.simplex2d = function(xin, yin) {\r\n    var F2, G2, X0, Y0, gi0, gi1, gi2, i, i1, ii, j, j1, jj, n0, n1, n2, s, t, t0, t1, t2, x0, x1, x2, y0, y1, y2;\r\n    if (xin == null) {\r\n      xin = this.x;\r\n    }\r\n    if (yin == null) {\r\n      yin = this.y;\r\n    }\r\n    F2 = 0.5 * (Math.sqrt(3.0) - 1.0);\r\n    s = (xin + yin) * F2;\r\n    i = Math.floor(xin + s);\r\n    j = Math.floor(yin + s);\r\n    G2 = (3.0 - Math.sqrt(3.0)) / 6.0;\r\n    t = (i + j) * G2;\r\n    X0 = i - t;\r\n    Y0 = j - t;\r\n    x0 = xin - X0;\r\n    y0 = yin - Y0;\r\n    if (x0 > y0) {\r\n      i1 = 1;\r\n      j1 = 0;\r\n    } else {\r\n      i1 = 0;\r\n      j1 = 1;\r\n    }\r\n    x1 = x0 - i1 + G2;\r\n    y1 = y0 - j1 + G2;\r\n    x2 = x0 - 1.0 + 2.0 * G2;\r\n    y2 = y0 - 1.0 + 2.0 * G2;\r\n    ii = i & 255;\r\n    jj = j & 255;\r\n    gi0 = this.perm[ii + this.perm[jj]] % 12;\r\n    gi1 = this.perm[ii + i1 + this.perm[jj + j1]] % 12;\r\n    gi2 = this.perm[ii + 1 + this.perm[jj + 1]] % 12;\r\n    t0 = 0.5 - x0 * x0 - y0 * y0;\r\n    if (t0 < 0) {\r\n      n0 = 0.0;\r\n    } else {\r\n      t0 *= t0;\r\n      n0 = t0 * t0 * this._dot(this.grad3[gi0], x0, y0);\r\n    }\r\n    t1 = 0.5 - x1 * x1 - y1 * y1;\r\n    if (t1 < 0) {\r\n      n1 = 0.0;\r\n    } else {\r\n      t1 *= t1;\r\n      n1 = t1 * t1 * this._dot(this.grad3[gi1], x1, y1);\r\n    }\r\n    t2 = 0.5 - x2 * x2 - y2 * y2;\r\n    if (t2 < 0) {\r\n      n2 = 0.0;\r\n    } else {\r\n      t2 *= t2;\r\n      n2 = t2 * t2 * this._dot(this.grad3[gi2], x2, y2);\r\n    }\r\n    return 70.0 * (n0 + n1 + n2);\r\n  };\r\n\r\n  return Noise;\r\n\r\n})(Vector);\r\n\r\n//# sourceMappingURL=pt.js.map\r\n}).call(Pt); module.exports = Pt;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/ptjs/dist/module/pt.js\n ** module id = 61\n ** module chunks = 0\n **/","import configurations from './configurations.js';\n\nclass ReadingTracker {\n\n    constructor(configurations){\n        this._text = document.querySelector(\"#projectDescription\");\n\n        this.selectedConfName = undefined;\n        this._scrollToConf(\"theGrid\");\n        this._bindScrollEvents();\n    }\n\n    _scrollToConf(name){\n        if(configurations[name]){\n            this.forceField = configurations[name].forces;\n            this.visualSettings = configurations[name].visualConfig;\n            this.selectedConfName = name;\n        }\n    }\n\n    _bindScrollEvents(){\n        window.addEventListener(\"scroll\", (e) => {\n            var paragraphs = document.querySelectorAll(\"#projectDescription p\");\n            for(let i = paragraphs.length-1; i>=0; i--){\n                var p = paragraphs.item(i);\n                var boundingBox = p.getBoundingClientRect();\n                if( boundingBox.top < 300 ){\n                    var scrollCallbackName = p.getAttribute(\"data-scrollToConf\");\n                    if(scrollCallbackName && configurations[scrollCallbackName]){\n                        console.log(scrollCallbackName)\n                        this._scrollToConf(scrollCallbackName);\n                        break;\n                    }\n                }\n            }\n        });\n    }\n}\n\nexport default ReadingTracker;\n\n\n/** WEBPACK FOOTER **\n ** ./src/ReadingTracker.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/classCallCheck.js\n ** module id = 63\n ** module chunks = 0\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"babel-runtime/core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/createClass.js\n ** module id = 64\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/define-property.js\n ** module id = 65\n ** module chunks = 0\n **/","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/define-property.js\n ** module id = 66\n ** module chunks = 0\n **/","var $export = require('./_export');\r\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\r\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.object.define-property.js\n ** module id = 67\n ** module chunks = 0\n **/","var configurations = configurations = {\n    theGrid: {\n        forces: [\n\n        ],\n        visualConfig: {\n            step: 70,\n            baseColor: [0,0,0,0],\n            colorInterpolationMode:\"addition\",\n            padding: [0,0,2,0],\n            stroke: [100,100,100,100]\n        }\n    },\n    forces: {\n        forces: [\n            {\n             x: 20,\n             y: 20,\n             decay: \"cosine\",\n             intensity: 60,\n             influencePosition: true,\n             invert: true,\n             color: [255, 150, 0, 255]\n           }\n        ],\n        visualConfig: {\n            stroke: [0,255,0,255]\n        }\n    },\n    colors: {\n        visualConfig: {\n             x: 20,\n             y: 20,\n             decay: \"cosine\",\n             stroke: [0,0,0,0],\n             intensity: 60,\n             influencePosition: true,\n             invert: true,\n             color: [255, 150, 0, 255]\n           },\n       forces: [\n            {\n             x: 20,\n             y: 20,\n             decay: \"cosine\",\n             intensity: 60,\n             influencePosition: true,\n             influenceColor: true,\n             invert: true,\n             color: [100, 150, 0, 255]\n           }\n       ]\n    }\n};\n\nexport default configurations;\n\n\n/** WEBPACK FOOTER **\n ** ./src/configurations.js\n **/"],"sourceRoot":""}